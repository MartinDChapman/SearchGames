var graphNodes = "[(v23 : v22) 0.6919174590289157, (v48 : v83) 9.992381204237418, (v17 : v15) 4.064602296251155, (v63 : v77) 3.8513491039422365, (v63 : v7) 1.5259420927810619, (v95 : v54) 5.261430311237972, (v28 : v82) 7.7243637451692, (v51 : v91) 9.810845005158763, (v62 : v6) 7.959570566763118, (v60 : v65) 6.695479931461491, (v70 : v62) 6.389104745448585, (v44 : v89) 0.510742361928791, (v68 : v75) 8.723157645059592, (v64 : v67) 0.17078455697554062, (v54 : v19) 2.797376052703715, (v52 : v47) 3.618525947660234, (v96 : v48) 0.05882643789210773, (v97 : v32) 2.04456545526581, (v49 : v85) 1.6814786126876236, (v30 : v98) 2.705733363304784, (v69 : v0) 1.1605327058969228, (v48 : v78) 3.8063257648003823, (v31 : v72) 7.391945116297918, (v94 : v15) 3.3648788892302317, (v76 : v99) 7.653082217155214, (v93 : v21) 0.5308221594410045, (v80 : v19) 2.9473540780135843, (v11 : v93) 7.838884742150966, (v41 : v99) 0.9009288100786106, (v69 : v4) 5.701365276080699, (v64 : v45) 6.000504571405081, (v42 : v88) 1.7521915295126378, (v79 : v30) 8.291103839173783, (v96 : v7) 2.091247732493018, (v95 : v81) 9.72174550798043, (v66 : v63) 5.058108743191095, (v44 : v62) 9.800639477537539, (v63 : v57) 0.8227491718837809, (v91 : v97) 6.922518078452136, (v23 : v51) 8.154863440004466, (v18 : v33) 9.13736709908456, (v74 : v57) 8.467304657103632, (v28 : v70) 3.8769369667890405, (v65 : v53) 3.2731860824230607, (v52 : v84) 3.533982167775973, (v69 : v47) 5.107061100093494, (v90 : v92) 6.246498789654491, (v87 : v56) 0.7011723237582634, (v21 : v42) 4.878790774216959, (v34 : v97) 4.647191317289785, (v11 : v45) 3.2727760828982824, (v82 : v88) 9.187544641394457, (v54 : v12) 6.282560975649595, (v6 : v78) 2.349975275518111, (v35 : v6) 7.9752167044686875, (v77 : v56) 9.952329755981001, (v87 : v81) 2.409421980731369, (v20 : v52) 3.5557926883180335, (v82 : v37) 0.4759365015921646, (v64 : v24) 4.134359273343804, (v28 : v95) 8.94076809416678, (v43 : v18) 1.8628220953629093, (v6 : v69) 8.770658111600369, (v70 : v67) 4.217890608103559, (v81 : v40) 6.394641138945967, (v10 : v70) 4.656373591915689, (v8 : v9) 6.274713810599284, (v24 : v22) 1.0060352287744045, (v87 : v2) 6.189080186280309, (v4 : v80) 8.810425720451011, (v1 : v44) 8.29529762744763, (v49 : v98) 9.046576073811046, (v38 : v54) 2.316442782461474, (v52 : v32) 9.628079622735592, (v86 : v10) 0.2159152437536449, (v38 : v94) 5.066137745280762, (v47 : v44) 0.28671672274929283, (v71 : v44) 1.6442812054674871, (v85 : v53) 8.626246954391416, (v97 : v58) 5.931575319171881, (v61 : v77) 6.101360553386803, (v54 : v71) 0.7833046307967029, (v67 : v80) 2.8904066341827104, (v55 : v48) 4.932829638642259, (v5 : v19) 1.935220376856216, (v87 : v39) 3.5451298580579427, (v66 : v47) 8.718840645295609, (v0 : v30) 7.769387239977819, (v64 : v96) 1.93259448142018, (v88 : v91) 0.38898904629364184, (v19 : v32) 7.193880274773092, (v63 : v22) 2.52288323980014, (v14 : v59) 1.064523329307232, (v61 : v73) 7.288995865202442, (v75 : v39) 2.396225605331707, (v80 : v92) 1.1112632506135323, (v58 : v41) 2.3479068774319134, (v37 : v64) 1.5559123273398823, (v18 : v98) 8.289403357603588, (v88 : v75) 3.245321734704174, (v10 : v57) 2.8930611387225245, (v37 : v19) 5.450749348701112, (v13 : v28) 0.8415103706597693, (v45 : v43) 7.746316983410471, (v98 : v80) 7.224844268751177, (v93 : v7) 3.860039272183581, (v96 : v84) 4.4983120657063, (v48 : v72) 0.23376005144111756, (v58 : v21) 7.1134966154345625, (v61 : v90) 0.359253598280056, (v68 : v40) 3.0690438008069676, (v1 : v87) 0.6553605562049003, (v3 : v18) 0.7548547615409851, (v0 : v86) 9.359987127245233, (v16 : v28) 3.8460130005023285, (v23 : v36) 8.90650415142746, (v93 : v19) 0.5556176636810661, (v33 : v67) 0.7181646988919754, (v13 : v47) 0.3513804908741447, (v5 : v39) 1.8745309773748753, (v89 : v21) 8.007855649760529, (v55 : v2) 7.174670475801314, (v16 : v80) 3.489253665511456, (v33 : v41) 0.6434689598064081, (v50 : v48) 6.177969220230488, (v67 : v49) 4.306439885109798, (v20 : v59) 3.0784968034646196, (v7 : v8) 2.307769400814089, (v87 : v74) 5.188821326651332, (v88 : v11) 7.285191360203751, (v47 : v14) 1.751425999362346, (v18 : v67) 6.868984595173414, (v96 : v72) 3.7397833290326665, (v56 : v95) 8.672623360728354, (v26 : v40) 1.0258220535288487, (v86 : v29) 6.02721493747219, (v70 : v65) 0.1879468397869899, (v57 : v62) 6.725034081150971, (v29 : v62) 4.992464008150402, (v35 : v5) 7.329544502753507, (v86 : v66) 0.004770981705320976, (v41 : v13) 4.236967332082725, (v72 : v20) 0.5076439031417923, (v53 : v15) 4.100575959436949, (v75 : v35) 2.5259554319894573, (v47 : v81) 3.822628625127483, (v1 : v86) 4.039898670605936, (v77 : v46) 8.855564778625691, (v37 : v97) 8.828333877490378, (v23 : v95) 6.715452150320923, (v80 : v96) 4.392452722923999, (v26 : v31) 5.484542614844601, (v41 : v45) 4.296109804994175, (v88 : v3) 8.66034477123096, (v88 : v81) 7.407633475799793, (v41 : v25) 3.3962147711227786, (v43 : v25) 3.979764724379795, (v8 : v22) 8.279769793144618, (v45 : v19) 3.4567885219774364, (v64 : v56) 5.023300285844127, (v27 : v32) 6.204488519127044, (v74 : v17) 0.4139783698121935, (v89 : v62) 1.028999967052967, (v18 : v46) 6.616380423892309, (v22 : v83) 0.050993415481009885, (v22 : v48) 9.367330483436255, (v44 : v80) 0.05414872104194446, (v54 : v72) 1.0912086764772333, (v7 : v0) 5.310093896892293, (v45 : v99) 4.736795196908121, (v86 : v94) 6.730661196631519, (v68 : v5) 0.844824693577858, (v9 : v59) 9.3034442005488, (v87 : v20) 5.555356600780498, (v25 : v57) 7.575523127458185, (v82 : v77) 7.918709466449476, (v69 : v84) 3.5663487459148935, (v98 : v62) 6.852191120178509, (v49 : v50) 4.17391941015529, (v72 : v99) 8.662605985065749, (v78 : v85) 4.8045654335846075, (v37 : v63) 6.413126738036345, (v26 : v54) 1.6781192295203362, (v46 : v99) 0.1405219277420766, (v42 : v30) 8.765549982770114, (v8 : v46) 8.519033607797445, (v61 : v98) 3.4899959398075318, (v72 : v45) 5.9208196078087045, (v95 : v27) 2.705594855761777, (v48 : v41) 5.746430706206612, (v57 : v7) 1.7588342595322015, (v80 : v99) 9.605193388847548, (v24 : v44) 1.9878368456729067, (v97 : v52) 9.53374681778311, (v66 : v46) 8.335840593849412, (v50 : v86) 5.476720290445063, (v92 : v97) 9.01212311216481, (v38 : v76) 5.1482984142669155, (v88 : v25) 3.6490448172480194, (v53 : v81) 6.985062676980027, (v40 : v73) 8.156238722821662, (v29 : v8) 6.933201797444106, (v44 : v72) 1.597038745043935, (v64 : v12) 5.437293662951472, (v87 : v47) 8.699016747967551, (v9 : v11) 5.2700679720550525, (v33 : v6) 7.007270577517436, (v97 : v15) 3.2257027524911486, (v38 : v51) 8.799365425269636, (v98 : v78) 7.562475297024502, (v2 : v85) 8.464373330987467, (v96 : v83) 8.19933496706515, (v32 : v49) 7.521264798148773, (v38 : v15) 1.7268512490170806, (v4 : v70) 3.386275944775976, (v56 : v16) 8.373902081452666, (v89 : v14) 8.623299790217981, (v59 : v73) 2.1715388017316806, (v94 : v40) 4.110607808284966, (v50 : v93) 9.075099253429105, (v7 : v29) 9.372310439887425, (v14 : v23) 5.051461417347158, (v97 : v20) 3.4511748953797685, (v92 : v43) 7.823249396014763, (v40 : v4) 9.994259541423022, (v32 : v36) 1.7049407646885184, (v78 : v43) 5.694051371386484, (v66 : v28) 5.792586020062198, (v20 : v29) 4.541430406125722, (v38 : v82) 6.610865704206471, (v67 : v46) 4.325096090397524, (v72 : v98) 8.516383102134752, (v9 : v14) 1.9335849398504046, (v24 : v56) 8.948544762581067, (v64 : v38) 0.915467188108815, (v13 : v93) 2.6595193468577816, (v26 : v37) 6.7217250450527, (v14 : v51) 4.899224677808588, (v37 : v72) 0.5389771506430063, (v84 : v91) 0.1429687176864336, (v69 : v1) 2.7266213119371674, (v36 : v22) 1.1973861840142197, (v38 : v10) 7.854891146641725, (v50 : v53) 5.68008715126502, (v57 : v35) 9.120280904432471, (v73 : v26) 9.121581217550832, (v98 : v54) 4.5620452510668095, (v48 : v53) 8.872465377027401, (v99 : v85) 7.747052616065334, (v74 : v27) 2.1087080116781873, (v16 : v82) 3.31491642713883, (v94 : v0) 7.413502333490216, (v91 : v39) 2.5220689490472656, (v37 : v44) 9.482261014519601, (v81 : v69) 5.389550169575861, (v94 : v34) 3.6607463496564563, (v40 : v47) 6.5982552091138436, (v93 : v10) 3.4042419591227437, (v20 : v71) 9.397013553360905, (v6 : v52) 2.86344593459933, (v65 : v93) 0.6591403646853156, (v33 : v69) 6.092047081997006, (v20 : v89) 6.164308661032987, (v88 : v36) 7.6696322993584545, (v90 : v78) 6.173226260058927, (v54 : v43) 9.585794107631747, (v41 : v67) 0.5374435471517125, (v68 : v18) 0.18745932268996346, (v28 : v51) 0.736682982437814, (v47 : v63) 0.908192580988324, (v35 : v40) 4.308628154150127, (v30 : v41) 9.838405286206802, (v36 : v1) 8.734657984146477, (v23 : v55) 1.3281978022220264, (v93 : v69) 5.729327806243797, (v2 : v79) 2.51534232676435, (v93 : v63) 9.467500053217627, (v56 : v75) 9.621332130717683, (v20 : v99) 0.1431655872894788, (v67 : v75) 4.146359481106093, (v5 : v53) 6.616713262193619, (v70 : v87) 5.713699136241041, (v20 : v86) 3.1574403002956206, (v88 : v44) 9.665624706000637, (v86 : v33) 7.466475523851064, (v1 : v93) 2.9033538974547013, (v48 : v23) 2.469288263299072, (v2 : v21) 6.605456669750901, (v60 : v63) 7.650068975665648, (v95 : v36) 3.9718342818144947, (v22 : v50) 6.972278180571074, (v45 : v60) 1.0491701837339917, (v29 : v23) 7.356585532998626, (v87 : v16) 8.930299560659424, (v1 : v53) 2.091500809541519, (v80 : v36) 2.522146464490943, (v89 : v12) 7.91178821002098, (v42 : v92) 9.888863027042872, (v43 : v95) 8.42998049598203, (v49 : v88) 3.5489772300951836]"; 
 var hidden = new Array(); 
 var path = new Array(); 
hidden[0] = "[v64, v37, v19, v5, v6]"; 
path[0] = "[v78, v6, v52, v84, v91, v88, v42, v21, v93, v19, v5, v68, v18, v3, v18, v43, v25, v41, v67, v64, v38, v15, v97, v32, v36, v22, v83, v96, v48, v72, v20, v99, v46, v66, v86, v10, v57, v63, v47, v44, v80, v92, v90, v61, v98, v30, v0, v69, v1, v87, v56, v16, v82, v37]"; 
var step, play;

function showGraph() {
    
	var width = $(document).width();
	
    var height = $(document).height() - 100;

    var g = new Graph();
	
	var graph = graphNodes.split(",");
	
	var hiddenItems = hidden[$('#round-to-play').val()].substring(0, hidden[$('#round-to-play').val()].length - 1).split(",");
	
	for (var k = 0; k < hiddenItems.length; k++) {
		
		hiddenItems[k] = hiddenItems[k].substring(1, hiddenItems[k].length);
		
		g.addNode(hiddenItems[k], { label : hiddenItems[k] + " HIDE" });
	
		$('#hidden').append(hiddenItems[k] + " ");
	
	}
	
	for (var i = 0; i < graph.length; i++) {
		
		g.addEdge(graph[i].substring(graph[i].indexOf("(") + 1, graph[i].indexOf(":") - 1), graph[i].substring(graph[i].indexOf(":") + 2, graph[i].indexOf(")")));
		 
	}
	
	var layouter = new Graph.Layout.Spring(g);
	
	var searchPath = path[$('#round-to-play').val()].substring(0, path[$('#round-to-play').val()].length - 1).split(",");
	
	var renderer = new Graph.Renderer.Raphael('canvas', g, width, height);
	
	step = function() {
		
		drawPath(hiddenItems, searchPath, g, renderer);
		
		searchPath.splice(0,1);
		
	}
	
	play = function() {
		
		setInterval(function(){step()},1000);
		
	}
		
	step();
	
};

function drawPath(hiddenItems, searchPath, g, renderer) {
	
	
	for (var j = 1; j < searchPath.length; j++) {
		
	
		 /* colourising the shortest paths and setting labels */
		for(e in g.edges) {
			
			if((searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].source.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].target.id) ||
			   (searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].target.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].source.id)) {
			
				$('#output').html(searchPath[j-1].substring(1,searchPath[j-1].length) + " to " + searchPath[j].substring(1,searchPath[j].length));
				
				for (var l = 0; l < hiddenItems.length; l++) {
				
					if ( hiddenItems[l] == g.edges[e].source.id || hiddenItems[l] == g.edges[e].target.id ) {
						
						//alert(hiddenItems[l] + " " + g.edges[e].source.id);
						//alert(hiddenItems[l] + " " + g.edges[e].target.id);
						hiddenItems.splice(l, 1);
						$('#hidden').html("Hidden Items: ");
						
						for (var o = 0; o < hiddenItems.length; o++) {
		
							//alert(hiddenItems);
							
							$('#hidden').append(hiddenItems[o] + " ");
						
						}
	
					}
					
				}
				
				g.edges[e].style.stroke = "#00c8a1";
				g.edges[e].style.fill = "#00c8a1";
				
				renderer.draw();
				return;
				
			} else {
				
				g.edges[e].style.stroke = "#fff";
			
			}
			
		}
		
	}

}

function getRandomColor() {
	
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++ ) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
	
}
