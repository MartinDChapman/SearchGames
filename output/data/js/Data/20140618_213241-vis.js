var graphNodes = "[(v74 : v67) 7.050709057987384, (v3 : v68) 5.229282982025861, (v95 : v64) 4.164011240564367, (v62 : v46) 5.25678091318679, (v99 : v44) 3.2825280816780458, (v7 : v47) 1.1911206285348175, (v9 : v70) 1.1332433847749201, (v37 : v38) 0.23960476803534303, (v40 : v70) 9.254205328268068, (v85 : v74) 5.884946214824942, (v73 : v90) 5.353568691597714, (v41 : v27) 0.4156288912308481, (v7 : v53) 8.496358691000761, (v12 : v19) 4.273487680166637, (v86 : v27) 5.621629574593799, (v16 : v41) 1.8411813656278486, (v93 : v42) 8.809845034734302, (v36 : v27) 2.503388214167405, (v66 : v12) 0.45837606613861936, (v14 : v76) 7.786112153457289, (v77 : v52) 5.060535263220254, (v8 : v24) 2.8525877894993323, (v60 : v65) 4.755276906635563, (v58 : v30) 7.762296386183495, (v14 : v92) 2.011632896436224, (v50 : v89) 8.738214837696038, (v67 : v25) 7.681375302238058, (v91 : v70) 6.699467946450431, (v15 : v45) 9.798826320459742, (v51 : v4) 2.8712322990226613, (v31 : v48) 6.687916641269852, (v0 : v61) 4.156388647359805, (v94 : v58) 3.569574936938147, (v27 : v56) 2.8257178926345605, (v43 : v23) 1.519549188931254, (v12 : v83) 1.043242115785027, (v76 : v3) 0.5363416877283833, (v59 : v47) 4.784808359597474, (v81 : v26) 9.025856290294625, (v50 : v95) 9.23153250097985, (v38 : v81) 2.2346127208310316, (v7 : v30) 8.031965866056987, (v99 : v98) 4.2642508974405535, (v78 : v81) 7.640663675179526, (v28 : v42) 7.130044145806331, (v32 : v97) 9.875376122378624, (v30 : v35) 5.89502243269555, (v51 : v18) 6.915760066077846, (v41 : v62) 8.885104461999724, (v90 : v28) 3.1249218432965753, (v43 : v91) 4.191598630369565, (v99 : v67) 3.649182500307356, (v18 : v8) 8.574091051358439, (v12 : v70) 5.985319809180341, (v90 : v93) 8.123845136136854, (v32 : v82) 4.2485830977021966, (v62 : v13) 4.926415292351146, (v92 : v2) 7.285645766956522, (v69 : v78) 3.91949340282411, (v15 : v71) 8.017236361497057, (v65 : v79) 5.281566815998941, (v58 : v76) 8.334618698563604, (v56 : v67) 1.2685526710759298, (v36 : v99) 8.78776887791011, (v83 : v98) 1.3551831892876653, (v18 : v71) 6.3726479119923205, (v4 : v16) 4.907828288449716, (v39 : v27) 4.5383060962243995, (v63 : v18) 8.144168812410097, (v88 : v86) 3.5857978436902926, (v45 : v70) 8.707433618741153, (v91 : v74) 4.820441390953011, (v94 : v95) 1.3398169646731695, (v85 : v62) 9.953453337031133, (v37 : v9) 6.5784469208037795, (v10 : v62) 6.541325210133166, (v66 : v47) 8.471411697056407, (v45 : v74) 7.820622100532054, (v61 : v34) 9.53063304820841, (v41 : v23) 9.667563882720403, (v65 : v27) 1.6687955702908863, (v57 : v63) 1.0174406856252094, (v73 : v22) 1.0314150381979537, (v99 : v24) 5.756503080016746, (v66 : v10) 5.410909215824543, (v31 : v79) 1.592596337216693, (v69 : v4) 3.452041726460955, (v79 : v91) 3.8708693725756325, (v5 : v95) 0.9183240049533925, (v32 : v19) 2.7840188974008315, (v32 : v85) 6.834170387515304, (v65 : v75) 0.3956261848520759, (v49 : v50) 9.951298258613178, (v77 : v89) 7.71933264638522, (v34 : v58) 7.469844068092623, (v38 : v36) 1.5512981233776346, (v37 : v26) 4.690915748816094, (v97 : v25) 9.520202446084959, (v23 : v61) 7.860108293132674, (v60 : v11) 9.985900189102551, (v97 : v41) 7.109366538882832, (v98 : v73) 9.978849442999124, (v97 : v90) 1.5022841610680415, (v88 : v35) 9.728008563316306, (v95 : v42) 0.776457680606879, (v28 : v88) 0.7816484408536661, (v44 : v13) 5.6531696220630945, (v55 : v34) 6.996392312492466, (v82 : v86) 0.4029479936376601, (v32 : v1) 3.373863492988416, (v86 : v41) 2.7252166927869426, (v76 : v90) 7.887019845791751, (v71 : v89) 9.58732449759681, (v11 : v65) 0.9912183686529286, (v21 : v30) 6.294992549268018, (v30 : v95) 7.796142547416643, (v16 : v76) 5.211146162262237, (v96 : v9) 9.128136104395512, (v78 : v48) 0.8379987601049799, (v36 : v12) 1.5885523174475658, (v71 : v8) 7.719102989867077, (v23 : v88) 8.769127143383546, (v3 : v1) 5.2511891173071685, (v28 : v68) 7.982997123217555, (v73 : v99) 0.12344926715621818, (v92 : v77) 0.07894056137579764, (v75 : v59) 8.984292591307788, (v92 : v62) 6.402126241256838, (v54 : v95) 4.988488643842938, (v4 : v38) 2.928741420036932, (v82 : v6) 6.173311645060254, (v40 : v45) 9.622237919394188, (v20 : v34) 7.879300309327959, (v24 : v57) 4.629706891809333, (v4 : v24) 7.554335685231328, (v40 : v47) 0.9584809469516797, (v8 : v77) 7.799918577434366, (v83 : v16) 4.552088573074874, (v98 : v97) 2.1330690111128705, (v72 : v48) 0.43405936432978964, (v68 : v44) 9.999682847151961, (v77 : v10) 9.926912017460005, (v61 : v72) 0.5952445957291741, (v83 : v53) 0.40737915153750137, (v10 : v71) 4.19250231317862, (v20 : v30) 7.05914239495927, (v72 : v64) 0.2653567489537467, (v66 : v33) 7.468963615876368, (v18 : v23) 1.7122859949686198, (v49 : v54) 7.4252738361281825, (v87 : v97) 7.055911772406183, (v47 : v28) 4.0703578026190135, (v48 : v86) 8.418810889951606, (v58 : v81) 8.684943710375329, (v20 : v43) 3.296663289255657, (v62 : v25) 0.3101318933765329, (v1 : v59) 6.271811172376303, (v97 : v44) 6.505316614180941, (v27 : v99) 1.5930614623018202, (v13 : v99) 3.577484599343693, (v63 : v79) 5.407092152636758, (v10 : v19) 4.278621142490355, (v22 : v69) 3.93541472176521, (v28 : v1) 1.341835679409017, (v41 : v85) 0.27698391737681405, (v28 : v18) 4.3073622900981965, (v21 : v6) 2.1650243069599884, (v10 : v87) 0.2771907079038438, (v83 : v60) 7.9584686224989385, (v0 : v70) 5.838374324610949, (v64 : v20) 0.6008206355912671, (v50 : v23) 3.1229513977855152, (v27 : v34) 4.08582964343978, (v76 : v83) 2.446019612272953, (v68 : v13) 4.139794478900233, (v87 : v8) 3.208232642421093, (v14 : v56) 2.030684074018599, (v37 : v88) 3.6964800997149547, (v46 : v93) 5.466782292830108, (v89 : v72) 5.404639976405191, (v74 : v54) 3.93078179454762, (v19 : v46) 3.769225488186615, (v45 : v97) 3.143930556549146, (v80 : v76) 1.4228536046370288, (v28 : v9) 7.959961702938796, (v67 : v62) 2.7683875029938685, (v33 : v27) 8.297428451031918, (v12 : v80) 6.831252144779682, (v27 : v28) 4.8351797136647185, (v98 : v20) 4.825906966424683, (v46 : v7) 1.3788656952803358, (v57 : v65) 6.950201947099605, (v57 : v39) 7.972532486193877, (v50 : v43) 0.779960952294958, (v90 : v54) 2.0508385248247842, (v5 : v70) 8.86352735684005, (v76 : v0) 5.932719835815073, (v11 : v89) 2.206321879438261, (v54 : v77) 4.631186132953432, (v49 : v98) 7.189071465333567, (v73 : v66) 2.837401759373094, (v52 : v97) 7.88693468488397, (v13 : v5) 8.727517582636922, (v0 : v59) 1.963140855845018, (v58 : v2) 2.2914257913564917, (v45 : v50) 3.419144109825105, (v44 : v78) 9.703440979897296, (v22 : v88) 8.019025579527076, (v72 : v47) 3.0119116438124474, (v22 : v60) 9.60064360236477, (v18 : v22) 6.440183688397174, (v85 : v88) 6.577670124763218, (v18 : v81) 9.84369663479307, (v34 : v4) 5.469353966727254, (v74 : v1) 4.492049558791043, (v46 : v39) 1.41896765253119, (v72 : v62) 2.1316650392880385, (v35 : v94) 7.434089613369012, (v30 : v57) 1.181432307671908, (v69 : v31) 3.9650348664197175, (v5 : v62) 2.523994537883072, (v4 : v85) 6.800996878404126, (v29 : v52) 5.438862762382972, (v39 : v31) 3.882219728221792, (v82 : v53) 3.1963711240842207, (v62 : v17) 4.182407369253554, (v28 : v7) 9.265838511635817, (v7 : v93) 4.3964806391925135, (v82 : v70) 3.2157406246213105, (v75 : v5) 0.7688717071419982, (v72 : v84) 9.582946855169359, (v86 : v65) 4.417173501642563, (v14 : v99) 0.30317815291562966, (v93 : v30) 3.2517930272728437, (v74 : v13) 8.923060431735998, (v71 : v90) 2.777162602229218, (v89 : v94) 2.608974400894486, (v56 : v36) 1.3032143512503591, (v63 : v34) 0.9391473045603127, (v22 : v89) 3.4225745383798687, (v94 : v90) 1.2790520788660853, (v94 : v9) 3.950955540621405, (v94 : v44) 2.018505816033931, (v95 : v40) 4.223394504080615, (v19 : v79) 2.5703426996737324, (v14 : v44) 3.931435332602824, (v70 : v4) 3.429998906986249, (v91 : v96) 6.226501542931412, (v97 : v68) 9.06376671531762, (v27 : v12) 7.159157015540166, (v47 : v55) 9.378126257671811, (v68 : v20) 4.635626595784527, (v13 : v42) 3.126981119629262, (v59 : v9) 7.820975469851199, (v38 : v49) 5.097543147233491, (v86 : v68) 7.5781077284897975, (v72 : v29) 2.1950665717358353, (v98 : v35) 8.284900815317824, (v29 : v59) 5.693896252582087, (v53 : v66) 3.8062126104076244, (v49 : v28) 4.6658496312004, (v72 : v8) 7.007343476670972, (v62 : v71) 0.8216130214922335, (v50 : v93) 5.881179456886134, (v10 : v14) 7.247565024546817, (v36 : v16) 6.929332833793916, (v19 : v96) 2.4865476918569462, (v66 : v98) 1.1010291175496323, (v70 : v17) 9.450083167337542, (v60 : v90) 1.471396232405563, (v85 : v96) 3.2711536384801807, (v98 : v28) 8.458581659806406, (v72 : v51) 8.576939925547274, (v93 : v36) 5.168415437758664, (v79 : v1) 0.10211448720498506, (v88 : v96) 6.254010300543976, (v7 : v92) 9.05392341780347, (v86 : v75) 1.2299229567644077, (v62 : v83) 4.315134582294174, (v14 : v93) 1.6366479667405698, (v17 : v36) 3.220989979635367, (v53 : v72) 8.867940618443361, (v87 : v5) 2.218854284127328, (v25 : v86) 0.31366004924898827, (v68 : v82) 6.817790632593795, (v57 : v2) 9.103601412016985, (v23 : v96) 1.6196204887079324, (v86 : v84) 1.9385803569113402, (v63 : v37) 1.3091143668329719, (v56 : v68) 8.945441031932477, (v35 : v25) 8.841109486326834, (v64 : v87) 4.280604490669577, (v15 : v30) 6.925060386765315, (v48 : v89) 0.32637998826306913, (v55 : v57) 7.657562896619824, (v33 : v37) 7.175920060438701, (v79 : v73) 4.831776332683583, (v78 : v9) 1.9930628609880563, (v99 : v39) 6.256667616942698, (v78 : v98) 5.475246924809238]"; 
 var hidden = new Array(); 
 var path = new Array(); 
hidden[0] = "[v24, v99, v67, v25, v88]"; 
path[0] = "[v31, v79, v1, v28, v88, v86, v25, v62, v71, v90, v94, v95, v42, v13, v99, v73, v22, v89, v48, v72, v64, v20, v43, v50, v23, v96, v19, v32, v82, v53, v83, v12, v66, v98, v97, v45, v74, v54, v77, v92, v14, v93, v30, v57, v63, v34, v27, v41, v85, v4, v51, v18, v8, v24, v57, v65, v75, v5, v87, v10, v14, v56, v67]"; 
var step, play;

function showGraph() {
    
	var width = $(document).width();
	
    var height = $(document).height() - 100;

    var g = new Graph();
	
	var graph = graphNodes.split(",");
	
	var hiddenItems = hidden[$('#round-to-play').val()].substring(0, hidden[$('#round-to-play').val()].length - 1).split(",");
	
	for (var k = 0; k < hiddenItems.length; k++) {
		
		hiddenItems[k] = hiddenItems[k].substring(1, hiddenItems[k].length);
		
		g.addNode(hiddenItems[k], { label : hiddenItems[k] + " HIDE" });
	
		$('#hidden').append(hiddenItems[k] + " ");
	
	}
	
	for (var i = 0; i < graph.length; i++) {
		
		g.addEdge(graph[i].substring(graph[i].indexOf("(") + 1, graph[i].indexOf(":") - 1), graph[i].substring(graph[i].indexOf(":") + 2, graph[i].indexOf(")")));
		 
	}
	
	var layouter = new Graph.Layout.Spring(g);
	
	var searchPath = path[$('#round-to-play').val()].substring(0, path[$('#round-to-play').val()].length - 1).split(",");
	
	var renderer = new Graph.Renderer.Raphael('canvas', g, width, height);
	
	step = function() {
		
		drawPath(hiddenItems, searchPath, g, renderer);
		
		searchPath.splice(0,1);
		
	}
	
	play = function() {
		
		setInterval(function(){step()},1000);
		
	}
		
	step();
	
};

function drawPath(hiddenItems, searchPath, g, renderer) {
	
	
	for (var j = 1; j < searchPath.length; j++) {
		
	
		 /* colourising the shortest paths and setting labels */
		for(e in g.edges) {
			
			if((searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].source.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].target.id) ||
			   (searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].target.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].source.id)) {
			
				$('#output').html(searchPath[j-1].substring(1,searchPath[j-1].length) + " to " + searchPath[j].substring(1,searchPath[j].length));
				
				for (var l = 0; l < hiddenItems.length; l++) {
				
					if ( hiddenItems[l] == g.edges[e].source.id || hiddenItems[l] == g.edges[e].target.id ) {
						
						//alert(hiddenItems[l] + " " + g.edges[e].source.id);
						//alert(hiddenItems[l] + " " + g.edges[e].target.id);
						hiddenItems.splice(l, 1);
						$('#hidden').html("Hidden Items: ");
						
						for (var o = 0; o < hiddenItems.length; o++) {
		
							//alert(hiddenItems);
							
							$('#hidden').append(hiddenItems[o] + " ");
						
						}
	
					}
					
				}
				
				g.edges[e].style.stroke = "#00c8a1";
				g.edges[e].style.fill = "#00c8a1";
				
				renderer.draw();
				return;
				
			} else {
				
				g.edges[e].style.stroke = "#fff";
			
			}
			
		}
		
	}

}

function getRandomColor() {
	
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++ ) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
	
}
