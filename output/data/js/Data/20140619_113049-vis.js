var graphNodes = "[(v79 : v93) 8.365697557376276, (v98 : v31) 8.648496381135296, (v27 : v31) 7.850221806574523, (v56 : v91) 3.195833556428961, (v61 : v16) 4.561534421323572, (v57 : v5) 3.843320363101832, (v97 : v24) 9.076794956697467, (v73 : v38) 3.1599397701975027, (v56 : v37) 6.8849642010028775, (v59 : v2) 4.001337624316633, (v87 : v63) 2.055453426802659, (v47 : v81) 5.891962529414002, (v16 : v25) 6.166198405821001, (v73 : v90) 3.7144322159251897, (v59 : v16) 9.43185101966648, (v39 : v51) 0.6488996215934539, (v97 : v85) 6.515420119187412, (v58 : v64) 8.442615954508486, (v43 : v67) 0.7530709988958095, (v4 : v55) 9.682028635152014, (v77 : v35) 3.575415551738783, (v83 : v41) 4.655750063259373, (v25 : v0) 2.0292772885106136, (v86 : v74) 6.911957764838455, (v75 : v91) 5.407578995769557, (v98 : v23) 7.909922135758814, (v4 : v47) 1.1539880406447467, (v63 : v37) 9.830233825134076, (v65 : v74) 2.1517300732168487, (v89 : v19) 3.1361289013182625, (v58 : v16) 9.117356238745934, (v50 : v32) 9.76941310627142, (v55 : v74) 7.641202599736008, (v50 : v35) 5.725552236484366, (v49 : v84) 4.144112389606033, (v18 : v36) 6.396394204051596, (v26 : v63) 6.0081755276483335, (v9 : v24) 1.6148616106472458, (v0 : v57) 0.8975895513793974, (v13 : v94) 3.3091989551944625, (v93 : v23) 8.980239291482357, (v14 : v4) 9.506611005221336, (v77 : v57) 9.713508264241597, (v59 : v89) 2.9552804824992407, (v80 : v23) 5.04769670222338, (v46 : v20) 8.603943614238306, (v7 : v76) 1.4619798369528048, (v41 : v79) 0.7398290950795128, (v37 : v95) 9.972122679066164, (v79 : v51) 0.7954545439421778, (v19 : v69) 2.0834353149888973, (v92 : v7) 0.15543397109892498, (v97 : v1) 9.210215509622527, (v43 : v13) 7.095206969407675, (v72 : v48) 7.103967346000168, (v94 : v60) 3.0398517535967384, (v62 : v94) 6.74299304843352, (v7 : v57) 4.324530958769816, (v8 : v79) 0.5078264417404754, (v45 : v36) 1.6565240695053784, (v29 : v54) 1.5288988416027038, (v25 : v99) 9.516383709480841, (v45 : v38) 4.22958815488945, (v56 : v76) 2.192874239802073, (v96 : v97) 2.340403185773088, (v39 : v59) 6.329682473544932, (v88 : v93) 4.225765893441295, (v69 : v88) 2.4843069825190023, (v55 : v29) 4.097193817052269, (v1 : v86) 9.880164696081842, (v24 : v39) 6.595413945773282, (v17 : v52) 0.29722284221344153, (v67 : v95) 3.9750739726946884, (v55 : v20) 3.8259749131407306, (v74 : v98) 2.5415311399162444, (v62 : v5) 2.3422513932491373, (v30 : v31) 3.548192769100699, (v80 : v55) 6.290311339380025, (v88 : v26) 4.099836367846793, (v11 : v96) 8.339298446432984, (v79 : v94) 4.013258466659996, (v53 : v76) 9.260110218871256, (v83 : v16) 3.5087610002116842, (v9 : v31) 8.918889856977973, (v70 : v8) 5.147888713993592, (v5 : v46) 9.468887117643515, (v3 : v64) 7.854259153375165, (v92 : v77) 0.9196903053764915, (v96 : v36) 5.071280368903101, (v19 : v44) 7.453490659602474, (v88 : v56) 7.19531180392984, (v65 : v98) 8.72996067709273, (v28 : v56) 7.103885806986952, (v80 : v16) 5.468670202260208, (v17 : v65) 8.760759113043907, (v94 : v2) 5.7211117735286345, (v98 : v22) 2.0638064118322896, (v98 : v8) 4.249995094777949, (v1 : v60) 2.005364740392226, (v65 : v2) 5.534402826532475, (v69 : v15) 9.191125453465611, (v89 : v51) 3.2348074885588716, (v93 : v47) 9.322780599704789, (v28 : v16) 9.007219916744557, (v45 : v46) 6.5574175995754, (v84 : v67) 8.78252812985875, (v81 : v85) 5.035346544639881, (v60 : v87) 8.86326606841397, (v68 : v42) 2.2961926550455756, (v42 : v47) 0.17977603245690976, (v30 : v38) 0.9154232984717015, (v78 : v61) 0.941380648348038, (v62 : v97) 1.281040696305199, (v34 : v11) 3.7724075122783827, (v72 : v59) 9.94022630257761, (v11 : v32) 7.700597423672605, (v79 : v75) 7.981763929417411, (v65 : v85) 1.4357116717267115, (v55 : v19) 1.2418883047684326, (v23 : v40) 7.014443463715153, (v25 : v79) 5.144801841269107, (v82 : v63) 0.7756509809413825, (v32 : v7) 8.286750896799022, (v68 : v50) 6.855368747086031, (v40 : v96) 9.672757434882689, (v29 : v95) 0.9481680751923882, (v94 : v71) 9.202643614881334, (v42 : v78) 4.370587498599478, (v40 : v25) 1.618866739897783, (v62 : v61) 9.790223521523895, (v47 : v95) 2.8701809068240913, (v22 : v62) 6.063506783033963, (v43 : v53) 9.565751928252903, (v13 : v47) 5.075370394491296, (v58 : v83) 6.903870935880789, (v37 : v36) 4.320300375684524, (v45 : v91) 5.823827447271715, (v62 : v68) 5.138311232493804, (v20 : v58) 3.971090900896331, (v60 : v15) 4.359087556635332, (v9 : v55) 7.863234069475741, (v87 : v20) 1.8570231109277069, (v89 : v45) 1.0317597823418911, (v59 : v74) 4.829554470345898, (v31 : v82) 8.184200118814552, (v14 : v65) 2.0376801464055494, (v98 : v13) 2.028794070426172, (v60 : v35) 4.753759079319452, (v82 : v6) 3.434236752850417, (v26 : v97) 1.6167366245820292, (v14 : v8) 8.319205029781143, (v87 : v28) 9.27424094252179, (v45 : v47) 4.9965959051606665, (v15 : v5) 0.7761853918233452, (v51 : v12) 2.707957304896013, (v60 : v77) 6.763453702931759, (v47 : v90) 7.502932523051116, (v20 : v51) 7.062133891836479, (v27 : v40) 2.331477692035706, (v94 : v76) 0.2489265382032857, (v8 : v25) 8.764126609350885, (v21 : v72) 7.903492542200798, (v41 : v24) 2.834965987761252, (v0 : v86) 6.821452834832089, (v47 : v44) 4.4667424461402625, (v11 : v58) 3.546701881998046, (v43 : v33) 1.2974262100891198, (v63 : v92) 9.71899253886767, (v76 : v86) 3.648608400890959, (v69 : v90) 6.354072737274544, (v47 : v86) 8.180602748517655, (v29 : v75) 9.116867359742791, (v65 : v25) 6.4455259094009945, (v23 : v55) 2.6574471475228623, (v12 : v28) 9.212771835588082, (v89 : v55) 9.305220340825542, (v50 : v77) 3.8921260243905778, (v84 : v81) 8.91553513693343, (v91 : v50) 6.565601761149324, (v10 : v97) 1.8975949161827321, (v6 : v65) 0.6634092614789433, (v33 : v51) 4.792419160935745, (v73 : v41) 4.9420638157103305, (v27 : v20) 6.989887736670691, (v42 : v24) 5.559519530718788, (v2 : v44) 1.9563580696034655, (v21 : v80) 2.2656418555521673, (v18 : v71) 6.776816851703842, (v7 : v89) 1.2648210763426893, (v57 : v65) 8.892166598907691, (v47 : v20) 6.5458507355649935, (v98 : v29) 9.033433302752009, (v30 : v18) 4.45335723499234, (v51 : v93) 8.827083403685515, (v98 : v81) 0.1923411497342009, (v58 : v7) 1.0821004006088208, (v92 : v88) 9.666293368163306, (v40 : v7) 9.9891841916148, (v55 : v3) 0.5596375245815943, (v26 : v73) 8.390756764652462, (v76 : v1) 5.552954768664438, (v84 : v95) 4.849034237487274, (v97 : v61) 0.8268135636611751, (v11 : v80) 5.786160936245407, (v54 : v5) 0.0455903566404714, (v9 : v28) 7.739417329498197, (v2 : v25) 8.451184408563254, (v16 : v20) 3.4162156503208574, (v10 : v61) 1.829006537733614, (v29 : v91) 8.304619616622634, (v28 : v74) 9.382352679263658, (v81 : v75) 4.058356919607378, (v53 : v90) 9.069731783973582, (v79 : v11) 1.5998830141238674, (v23 : v28) 4.982715451215106, (v80 : v37) 3.146379769847889, (v83 : v90) 2.7853889327995973, (v51 : v19) 4.343289578069641, (v8 : v66) 5.172804425061162, (v77 : v65) 7.975971725785471, (v0 : v53) 1.4634669440814807, (v80 : v71) 0.8164729296516804, (v79 : v82) 5.704594978480275, (v45 : v33) 7.949606886270274, (v91 : v84) 5.579698548247817, (v95 : v57) 1.217200281052403, (v33 : v19) 9.663188909018842, (v16 : v50) 3.4343490840396864, (v47 : v14) 5.519768436926034, (v63 : v12) 9.885999084257682, (v25 : v97) 3.3070370708028007, (v81 : v10) 6.831503426074445, (v52 : v74) 4.074089301143591, (v99 : v40) 0.7606558766994675, (v21 : v45) 4.179137720969738, (v80 : v65) 5.794943093064518, (v98 : v28) 5.153902330083794, (v32 : v98) 2.656544743280845, (v68 : v2) 5.056409769411131, (v41 : v68) 5.185330688057142, (v85 : v25) 3.6679692484260307, (v48 : v70) 7.527385908068524, (v69 : v92) 0.7517059106309876, (v84 : v60) 1.3103464924805364, (v38 : v93) 7.602642771845489, (v57 : v9) 0.7301843071880632, (v15 : v2) 6.042696425026767, (v96 : v33) 9.27641972866217, (v78 : v92) 2.2641194283608126, (v4 : v98) 3.499721390717058, (v79 : v96) 2.0741223548437793, (v35 : v69) 1.8653583756412706, (v1 : v72) 8.370186918423748, (v62 : v52) 4.332133589529842, (v30 : v54) 5.4646763566323, (v71 : v7) 6.249657245095763, (v85 : v4) 0.2198008147540509, (v89 : v11) 7.78373484741395, (v23 : v92) 9.04704300997772, (v37 : v81) 3.0731548012714107, (v60 : v0) 7.522340827251971, (v36 : v27) 6.310392881381768, (v92 : v74) 5.6793888133253585, (v87 : v53) 0.949106602915335, (v64 : v23) 4.634405525904512, (v34 : v89) 3.2044029023174803, (v62 : v14) 6.8888647281590565, (v0 : v67) 8.265623712542677, (v64 : v48) 3.9305310613676903, (v47 : v18) 2.429945673054561, (v81 : v4) 6.242440395235954, (v24 : v93) 3.3388237216908454, (v38 : v95) 5.825221431534501, (v95 : v61) 4.214856931732156, (v14 : v84) 3.2876671880015094, (v72 : v14) 3.41692829165566, (v75 : v57) 6.567209602125283, (v94 : v80) 3.625576537154841, (v53 : v62) 7.665720299062752, (v65 : v31) 2.8139321889509414, (v45 : v0) 6.342867119240464, (v32 : v37) 3.033783282496223, (v7 : v23) 4.571343524225577, (v80 : v69) 0.5393603820513748, (v28 : v57) 4.454211807120374, (v80 : v66) 8.377368287064606, (v99 : v97) 2.1190857048741485, (v13 : v17) 8.191020221739588, (v35 : v88) 5.377964501058533, (v10 : v14) 3.425032818165258, (v42 : v87) 8.372479085712216, (v81 : v22) 9.590545498617615, (v50 : v6) 9.365632551879187, (v17 : v90) 5.872943032508653, (v7 : v6) 0.8025787640032445, (v90 : v34) 4.666920493234052, (v24 : v5) 3.9106074372963615, (v11 : v73) 4.033509872211373, (v61 : v5) 3.7645476235560493, (v41 : v59) 1.4310635167054764]"; 
 var hidden = new Array(); 
 var path = new Array(); 
hidden[0] = "[v2, v35, v69, v8, v0]"; 
path[0] = "[v84, v60, v1, v76, v94, v13, v98, v81, v37, v32, v11, v79, v8, v70, v48, v64, v23, v55, v3, v55, v19, v69, v80, v71, v7, v92, v77, v35, v88, v26, v97, v61, v78, v42, v47, v4, v85, v65, v6, v82, v63, v87, v53, v0, v57, v9, v24, v41, v59, v89, v45, v36, v96, v33, v43, v67, v95, v29, v54, v5, v15, v2]"; 
var step, play;

function showGraph() {
    
	var width = $(document).width();
	
    var height = $(document).height() - 100;

    var g = new Graph();
	
	var graph = graphNodes.split(",");
	
	var hiddenItems = hidden[$('#round-to-play').val()].substring(0, hidden[$('#round-to-play').val()].length - 1).split(",");
	
	for (var k = 0; k < hiddenItems.length; k++) {
		
		hiddenItems[k] = hiddenItems[k].substring(1, hiddenItems[k].length);
		
		g.addNode(hiddenItems[k], { label : hiddenItems[k] + " HIDE" });
	
		$('#hidden').append(hiddenItems[k] + " ");
	
	}
	
	for (var i = 0; i < graph.length; i++) {
		
		g.addEdge(graph[i].substring(graph[i].indexOf("(") + 1, graph[i].indexOf(":") - 1), graph[i].substring(graph[i].indexOf(":") + 2, graph[i].indexOf(")")));
		 
	}
	
	var layouter = new Graph.Layout.Spring(g);
	
	var searchPath = path[$('#round-to-play').val()].substring(0, path[$('#round-to-play').val()].length - 1).split(",");
	
	var renderer = new Graph.Renderer.Raphael('canvas', g, width, height);
	
	step = function() {
		
		drawPath(hiddenItems, searchPath, g, renderer);
		
		searchPath.splice(0,1);
		
	}
	
	play = function() {
		
		setInterval(function(){step()},1000);
		
	}
		
	step();
	
};

function drawPath(hiddenItems, searchPath, g, renderer) {
	
	
	for (var j = 1; j < searchPath.length; j++) {
		
	
		 /* colourising the shortest paths and setting labels */
		for(e in g.edges) {
			
			if((searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].source.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].target.id) ||
			   (searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].target.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].source.id)) {
			
				$('#output').html(searchPath[j-1].substring(1,searchPath[j-1].length) + " to " + searchPath[j].substring(1,searchPath[j].length));
				
				for (var l = 0; l < hiddenItems.length; l++) {
				
					if ( hiddenItems[l] == g.edges[e].source.id || hiddenItems[l] == g.edges[e].target.id ) {
						
						//alert(hiddenItems[l] + " " + g.edges[e].source.id);
						//alert(hiddenItems[l] + " " + g.edges[e].target.id);
						hiddenItems.splice(l, 1);
						$('#hidden').html("Hidden Items: ");
						
						for (var o = 0; o < hiddenItems.length; o++) {
		
							//alert(hiddenItems);
							
							$('#hidden').append(hiddenItems[o] + " ");
						
						}
	
					}
					
				}
				
				g.edges[e].style.stroke = "#00c8a1";
				g.edges[e].style.fill = "#00c8a1";
				
				renderer.draw();
				return;
				
			} else {
				
				g.edges[e].style.stroke = "#fff";
			
			}
			
		}
		
	}

}

function getRandomColor() {
	
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++ ) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
	
}
