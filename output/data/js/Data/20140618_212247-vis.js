var graphNodes = "[(v25 : v4) 5.0063689440210615, (v75 : v99) 5.399748520303673, (v27 : v87) 0.6934996393036297, (v80 : v99) 9.13164464222058, (v96 : v83) 6.256894677412857, (v98 : v85) 5.733350491641735, (v32 : v69) 4.834593661050688, (v69 : v75) 5.364711285826067, (v12 : v25) 7.966048091621312, (v19 : v2) 5.082524685171432, (v11 : v98) 5.862703358209236, (v42 : v28) 8.123177634192848, (v46 : v31) 4.914601083802385, (v18 : v69) 3.1179879988485473, (v28 : v44) 9.287785032320379, (v16 : v71) 6.241908975067918, (v4 : v29) 8.377615979145498, (v24 : v6) 5.289649300750473, (v67 : v16) 4.254955192090536, (v33 : v10) 5.691660632696021, (v29 : v95) 7.304114381934617, (v87 : v32) 3.5200301612433735, (v16 : v97) 3.388219460126314, (v28 : v20) 9.991436636057955, (v86 : v62) 9.130239712980737, (v75 : v44) 0.1576609004567986, (v61 : v90) 0.4636482534494757, (v51 : v62) 6.096553410250617, (v68 : v79) 3.339011407285788, (v65 : v15) 1.5970037932078551, (v56 : v31) 9.381542767823891, (v62 : v52) 2.095714860192216, (v12 : v15) 6.045784938468173, (v21 : v47) 5.403102083226555, (v71 : v47) 3.2294003483122258, (v84 : v96) 6.888309599526442, (v89 : v60) 1.8670451467070648, (v24 : v87) 7.523288333344615, (v37 : v92) 5.362253010079495, (v10 : v61) 6.163519891828402, (v78 : v2) 0.12118105654719269, (v10 : v18) 4.224933016126274, (v96 : v45) 5.374222048691378, (v77 : v60) 3.4657277333039205, (v66 : v83) 6.0134001514202104, (v95 : v91) 6.767346116058466, (v51 : v67) 1.5948908938909667, (v30 : v14) 9.906097491647573, (v10 : v19) 3.8729591887618096, (v53 : v39) 5.497595589584588, (v14 : v24) 8.316372201994538, (v69 : v20) 1.1680936605733827, (v31 : v20) 8.739403980113785, (v15 : v17) 4.054135387732906, (v19 : v90) 0.34170191015142404, (v44 : v26) 5.855099211076473, (v30 : v86) 4.6355249558179334, (v49 : v32) 3.668789326515356, (v97 : v88) 9.64246641640128, (v38 : v96) 4.941174816056063, (v49 : v71) 2.7182526581357793, (v71 : v4) 2.176764728706675, (v20 : v27) 8.923329996457776, (v17 : v40) 8.111401052140096, (v29 : v30) 0.16472936422612272, (v50 : v38) 2.276021226936251, (v64 : v12) 4.713396498891154, (v67 : v5) 9.116130880997051, (v22 : v10) 1.1293166696933676, (v62 : v82) 8.821453539972511, (v81 : v47) 8.239105718362064, (v97 : v49) 8.91386988878499, (v10 : v95) 4.398300387759245, (v12 : v95) 5.495991915951447, (v88 : v85) 5.780628396601438, (v48 : v72) 2.3403997478920324, (v6 : v39) 8.472588970828559, (v97 : v81) 7.069861502633813, (v49 : v2) 1.473492440551506, (v25 : v82) 1.3171369534906907, (v33 : v35) 3.7246968246260526, (v38 : v18) 4.640884076498601, (v13 : v39) 4.589436543691569, (v18 : v30) 5.199626232724465, (v57 : v56) 3.004836548191413, (v77 : v86) 7.7428478692452405, (v97 : v44) 0.21525146349856805, (v44 : v32) 6.767444137738774, (v5 : v55) 6.6119481346772035, (v81 : v73) 9.015608158653944, (v42 : v3) 6.945640748782607, (v88 : v52) 0.5696899886834528, (v71 : v24) 4.899016936873798, (v53 : v67) 4.2497240166136105, (v32 : v46) 7.715889671572765, (v87 : v14) 8.865623080709172, (v84 : v94) 1.9480411669924858, (v37 : v56) 3.0500775308775676, (v32 : v53) 0.22240583482862508, (v28 : v80) 9.237902374618955, (v46 : v40) 6.72852785334211, (v30 : v76) 3.107062130841869, (v12 : v73) 1.5139520837658516, (v66 : v89) 7.10627197520942, (v2 : v91) 3.9444183017296366, (v80 : v9) 4.120566351359223, (v84 : v17) 7.283666515703949, (v23 : v74) 5.83242746560586, (v87 : v54) 5.3778441296687385, (v48 : v13) 5.791121293524135, (v30 : v35) 0.151720990376909, (v55 : v4) 6.882188649596123, (v48 : v96) 3.954148885158996, (v94 : v21) 7.974219568131846, (v71 : v17) 2.8007427132520766, (v87 : v53) 2.5989947982052133, (v87 : v61) 6.981111222687769, (v2 : v6) 0.08795510647329974, (v71 : v70) 1.210885929454173, (v16 : v72) 4.543127909432361, (v13 : v46) 2.0563325958057077, (v90 : v25) 1.1707733180021518, (v4 : v19) 0.4387039992841357, (v62 : v85) 1.0639646257295832, (v81 : v29) 8.99025492319857, (v33 : v34) 1.6052616023485078, (v51 : v33) 0.3937446217181817, (v85 : v4) 8.797939984006796, (v36 : v18) 3.75830608286107, (v14 : v1) 2.4555508861345943, (v58 : v28) 1.8890479937436677, (v52 : v92) 4.122807241130538, (v58 : v84) 5.974169758814407, (v27 : v96) 8.610039951093082, (v80 : v3) 3.876499937326927, (v44 : v53) 2.249157390905947, (v36 : v88) 9.667205330802853, (v40 : v30) 7.477794657006353, (v61 : v97) 1.2252555013449207, (v12 : v34) 3.593061836681021, (v41 : v86) 8.250549366364202, (v76 : v40) 5.856114038997923, (v93 : v84) 8.661212491666978, (v16 : v43) 9.34908892641053, (v55 : v21) 8.482452781706197, (v28 : v12) 3.7683976539477615, (v50 : v73) 0.5577834181053432, (v11 : v24) 0.7708323602512746, (v45 : v15) 4.95192035886914, (v40 : v5) 5.565587206783532, (v44 : v78) 8.152975210129949, (v62 : v91) 9.566486381273808, (v91 : v56) 6.160730833399058, (v27 : v15) 5.391097407665821, (v68 : v9) 5.465058562608486, (v44 : v91) 0.029888892089114938, (v83 : v85) 5.627443931577681, (v49 : v57) 6.228290980230549, (v18 : v53) 2.6888671493782867, (v26 : v50) 7.0528441052631505, (v32 : v6) 6.604999643578697, (v33 : v9) 9.181194037331649, (v54 : v74) 1.1770354750747636, (v33 : v52) 8.002432076409033, (v24 : v66) 6.982045316470396, (v36 : v65) 2.3832882799557886, (v85 : v5) 7.245254628693304, (v63 : v95) 0.597394710342759, (v73 : v47) 1.7291303202805586, (v64 : v29) 6.985855210123716, (v79 : v77) 2.987879476431139, (v58 : v73) 3.3805865239977217, (v76 : v84) 3.85443570224719, (v42 : v59) 1.046494763427579, (v79 : v93) 1.0499991195777936, (v33 : v97) 0.15986483567489218, (v38 : v27) 1.2497067349502622, (v18 : v27) 0.82006993731355, (v49 : v37) 6.87433885002105, (v50 : v36) 4.877683178832086, (v59 : v71) 6.0355879958070515, (v31 : v19) 2.948482585613478, (v94 : v0) 6.3261330181662, (v3 : v0) 8.770050017486566, (v32 : v67) 5.056564132783597, (v86 : v71) 0.35231573543086925, (v48 : v82) 8.796368257709496, (v55 : v76) 7.388393808202527, (v42 : v21) 5.029229030576129, (v88 : v34) 9.246525090453542, (v52 : v68) 5.893570571724313, (v4 : v18) 1.0832765357867957, (v58 : v71) 3.5136263447529625, (v70 : v91) 4.633998651903247, (v82 : v19) 3.6565646453213976, (v96 : v14) 8.886782899249766, (v13 : v93) 7.355910566269727, (v50 : v96) 6.874948284174174, (v45 : v88) 1.8554103899256702, (v69 : v45) 2.3808054811852686, (v23 : v28) 3.541602548921924, (v97 : v30) 2.486731354259529, (v12 : v90) 7.394978866755254, (v19 : v76) 3.101334086437734, (v65 : v16) 3.5022232500659856, (v40 : v6) 8.197850508362146, (v49 : v5) 0.09539822779697227, (v95 : v76) 4.304250117547141, (v36 : v89) 0.8341070990999067, (v35 : v88) 8.461509601855958, (v63 : v16) 8.195868677552747, (v58 : v62) 5.506018851562381, (v68 : v1) 4.11671282903876, (v81 : v68) 3.1282526620409348, (v86 : v50) 7.813106843548701, (v58 : v18) 6.113059921089715, (v76 : v25) 1.0587638899793173, (v39 : v10) 3.7838513306387678, (v78 : v84) 5.282948206133447, (v45 : v1) 2.6664669304989097, (v53 : v20) 7.554064795484242, (v50 : v49) 4.377741657267679, (v1 : v76) 3.823400053561329, (v73 : v52) 2.7541425951731133, (v97 : v14) 5.394860639452251, (v4 : v21) 4.198960681558926, (v75 : v28) 6.279705290422384, (v22 : v0) 7.4803008783750755, (v85 : v13) 5.369115935424969, (v19 : v12) 9.00066833990581, (v44 : v95) 3.846740544458137, (v29 : v89) 3.5326794530474515, (v79 : v21) 8.259110757453005, (v9 : v8) 9.130977403356733, (v44 : v45) 6.611340968515719, (v75 : v84) 5.350700411354946, (v87 : v71) 4.862260526547686, (v54 : v31) 1.896966359887754, (v92 : v2) 5.5169047647389196, (v0 : v13) 7.673201071966082, (v12 : v81) 7.571091087749967, (v58 : v45) 9.070376866058353, (v39 : v87) 6.924901095501992, (v62 : v53) 8.832254282854981, (v78 : v96) 0.27780704815549506, (v50 : v5) 9.437648677768603, (v72 : v79) 0.33266840471330994, (v33 : v5) 5.559983155781577, (v15 : v24) 0.40991192543438637, (v53 : v52) 0.6035813394194045, (v68 : v31) 7.004155343659656, (v77 : v44) 0.7881668769987737, (v83 : v48) 6.756854415989475, (v66 : v47) 3.877049160460632, (v54 : v94) 2.280022881481567, (v25 : v81) 6.945828093823707, (v41 : v10) 9.413687373012204, (v69 : v41) 0.9988465060590157, (v1 : v17) 7.155792440561278, (v12 : v70) 8.597877947684538, (v46 : v7) 3.646246063191785, (v24 : v83) 1.7158687096643732, (v78 : v83) 5.351488051335105, (v40 : v42) 9.918290141519327, (v87 : v96) 7.773364747526429, (v91 : v97) 6.762484385060066, (v64 : v22) 0.543490404078012, (v94 : v15) 4.454161270461379, (v65 : v92) 6.265165888376436, (v16 : v88) 1.679090768182926, (v17 : v2) 4.6890810447839595, (v97 : v21) 6.912411424186945, (v52 : v26) 3.172477003796892, (v22 : v52) 3.0794850711571353, (v93 : v64) 2.4464250408792445, (v70 : v37) 9.288762647245218, (v42 : v35) 7.730937446817801, (v0 : v4) 0.47282631818746257, (v27 : v64) 8.577504583938317, (v77 : v4) 6.559028850134284, (v30 : v93) 3.5243809840242015, (v14 : v76) 3.5526013710143003, (v7 : v96) 4.918779267217169, (v93 : v29) 0.36564057237877146, (v35 : v67) 4.945591374298514, (v78 : v86) 6.984152397056725, (v79 : v32) 1.014118775270647, (v49 : v28) 2.657714142602602, (v23 : v65) 9.858543149164765, (v55 : v70) 2.153957773138809, (v24 : v29) 7.826816295073736, (v23 : v19) 5.080872756781303, (v24 : v67) 5.344760705993301, (v80 : v47) 8.088007150584945, (v72 : v21) 7.082256533735877, (v9 : v49) 4.063410727470559, (v4 : v38) 4.207435527817866, (v92 : v0) 1.8032450762179741, (v91 : v4) 9.740079764000376, (v48 : v53) 6.008287869884825]"; 
 var hidden = new Array(); 
 var path = new Array(); 
hidden[0] = "[v58, v20, v31, v13, v62]"; 
path[0] = "[v78, v2, v6, v24, v15, v65, v36, v89, v60, v77, v44, v91, v70, v71, v86, v30, v35, v33, v97, v61, v90, v19, v4, v0, v92, v52, v88, v16, v67, v51, v62, v85, v13, v46, v7, v96, v48, v72, v79, v32, v53, v87, v27, v18, v69, v41, v10, v22, v64, v93, v29, v95, v63, v16, v43, v16, v63, v16, v43, v16, v63, v16, v88, v45, v1, v14, v76, v25, v82, v25, v81, v68, v9, v49, v5, v40, v17, v84, v94, v54, v74, v23, v28, v58, v73, v50, v38, v18, v53, v39, v53, v20, v31]"; 
var step, play;

function showGraph() {
    
	var width = $(document).width();
	
    var height = $(document).height() - 100;

    var g = new Graph();
	
	var graph = graphNodes.split(",");
	
	var hiddenItems = hidden[$('#round-to-play').val()].substring(0, hidden[$('#round-to-play').val()].length - 1).split(",");
	
	for (var k = 0; k < hiddenItems.length; k++) {
		
		hiddenItems[k] = hiddenItems[k].substring(1, hiddenItems[k].length);
		
		g.addNode(hiddenItems[k], { label : hiddenItems[k] + " HIDE" });
	
		$('#hidden').append(hiddenItems[k] + " ");
	
	}
	
	for (var i = 0; i < graph.length; i++) {
		
		g.addEdge(graph[i].substring(graph[i].indexOf("(") + 1, graph[i].indexOf(":") - 1), graph[i].substring(graph[i].indexOf(":") + 2, graph[i].indexOf(")")));
		 
	}
	
	var layouter = new Graph.Layout.Spring(g);
	
	var searchPath = path[$('#round-to-play').val()].substring(0, path[$('#round-to-play').val()].length - 1).split(",");
	
	var renderer = new Graph.Renderer.Raphael('canvas', g, width, height);
	
	step = function() {
		
		drawPath(hiddenItems, searchPath, g, renderer);
		
		searchPath.splice(0,1);
		
	}
	
	play = function() {
		
		setInterval(function(){step()},1000);
		
	}
		
	step();
	
};

function drawPath(hiddenItems, searchPath, g, renderer) {
	
	
	for (var j = 1; j < searchPath.length; j++) {
		
	
		 /* colourising the shortest paths and setting labels */
		for(e in g.edges) {
			
			if((searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].source.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].target.id) ||
			   (searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].target.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].source.id)) {
			
				$('#output').html(searchPath[j-1].substring(1,searchPath[j-1].length) + " to " + searchPath[j].substring(1,searchPath[j].length));
				
				for (var l = 0; l < hiddenItems.length; l++) {
				
					if ( hiddenItems[l] == g.edges[e].source.id || hiddenItems[l] == g.edges[e].target.id ) {
						
						//alert(hiddenItems[l] + " " + g.edges[e].source.id);
						//alert(hiddenItems[l] + " " + g.edges[e].target.id);
						hiddenItems.splice(l, 1);
						$('#hidden').html("Hidden Items: ");
						
						for (var o = 0; o < hiddenItems.length; o++) {
		
							//alert(hiddenItems);
							
							$('#hidden').append(hiddenItems[o] + " ");
						
						}
	
					}
					
				}
				
				g.edges[e].style.stroke = "#00c8a1";
				g.edges[e].style.fill = "#00c8a1";
				
				renderer.draw();
				return;
				
			} else {
				
				g.edges[e].style.stroke = "#fff";
			
			}
			
		}
		
	}

}

function getRandomColor() {
	
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++ ) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
	
}
