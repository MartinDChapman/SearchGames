var graphNodes = "[(v1 : v45) 5.972353640510119, (v29 : v94) 2.1005712660143105, (v81 : v29) 7.8465506914802505, (v10 : v15) 3.9795431071663376, (v56 : v61) 8.659267348687688, (v85 : v34) 6.552343501676963, (v63 : v62) 0.6937695467820582, (v72 : v13) 3.773367068996972, (v68 : v36) 2.0522143034900955, (v35 : v52) 0.4415638261270072, (v11 : v41) 8.426165763434371, (v25 : v14) 0.6835042204908737, (v53 : v46) 6.618364085203503, (v97 : v69) 9.465199828311405, (v40 : v87) 3.13179163491351, (v14 : v33) 9.385733465767478, (v73 : v40) 7.225489311181127, (v40 : v3) 7.299196548113395, (v47 : v52) 9.838569414983855, (v7 : v51) 0.6181601523888636, (v69 : v34) 2.2454577222332315, (v90 : v45) 3.2786017692576372, (v8 : v12) 5.923841003293099, (v47 : v8) 4.505726140084975, (v95 : v40) 5.245623762333556, (v86 : v85) 6.831623328386057, (v20 : v39) 9.750154182306844, (v11 : v86) 1.8045735244825267, (v32 : v76) 3.0941094829038973, (v60 : v80) 4.9276866380981446, (v14 : v10) 1.6159678244253373, (v52 : v32) 4.4093419234980304, (v28 : v78) 9.783478173935716, (v59 : v42) 9.043707231224644, (v39 : v83) 0.7447293909593633, (v32 : v16) 8.116870080972122, (v22 : v0) 3.5683215182840233, (v30 : v9) 3.709427063121793, (v67 : v97) 0.4830364537840215, (v68 : v62) 2.6026592772499155, (v68 : v35) 6.115797067217816, (v20 : v21) 9.5618100393204, (v85 : v57) 0.13836491988943544, (v29 : v95) 5.841849537598138, (v4 : v87) 6.284163868454554, (v82 : v88) 0.02012822360520139, (v39 : v15) 5.959110757196598, (v13 : v49) 2.794351998978911, (v17 : v41) 7.872886235697411, (v70 : v58) 2.1875131589170116, (v52 : v73) 5.64445586341558, (v76 : v55) 1.074165924296171, (v22 : v56) 0.22888777148463824, (v79 : v72) 9.391387610654926, (v85 : v99) 0.46883824885666225, (v86 : v92) 9.53580492021043, (v17 : v29) 2.947052210913974, (v95 : v3) 4.894331222961607, (v60 : v1) 6.615567911871084, (v86 : v9) 9.236144250448197, (v60 : v59) 1.0690865286842532, (v75 : v27) 3.738578004098445, (v33 : v23) 2.636398020193065, (v92 : v0) 0.06789419534019459, (v5 : v95) 5.1633744660767835, (v15 : v89) 2.43148081601384, (v10 : v71) 3.0886277792166537, (v44 : v42) 0.5112915672018192, (v60 : v92) 1.4594666618747232, (v76 : v73) 4.235918864513177, (v20 : v15) 9.348574645856287, (v23 : v22) 2.4134963101767704, (v37 : v81) 0.8143666299884733, (v40 : v76) 1.1987688680765196, (v54 : v82) 7.360022894165371, (v87 : v98) 7.4805675421276705, (v92 : v65) 1.7037910925897581, (v18 : v71) 2.732195118247959, (v26 : v15) 8.648521482428627, (v61 : v28) 7.2547856540278435, (v11 : v69) 1.6600934516723675, (v9 : v69) 4.556659788334433, (v69 : v62) 5.317167158036195, (v68 : v51) 3.7504765694942312, (v36 : v22) 3.6195602826977047, (v83 : v60) 1.121190546182993, (v17 : v72) 1.9367739814969698, (v48 : v5) 3.6343863480204943, (v13 : v6) 8.495303438850414, (v91 : v52) 9.235587897621617, (v78 : v10) 7.253102424803753, (v17 : v55) 4.862043327680619, (v2 : v43) 2.957987031387378, (v85 : v82) 0.5808925934143361, (v31 : v94) 6.456076209177209, (v76 : v21) 1.0194373540759927, (v71 : v79) 1.8851410049734119, (v11 : v82) 6.008573262028253, (v12 : v56) 0.39069243205482995, (v42 : v77) 5.269734179535632, (v72 : v20) 8.230836008908753, (v27 : v33) 5.095537077207598, (v63 : v50) 1.5365845464904082, (v1 : v56) 2.767636184700316, (v18 : v73) 9.171000208618759, (v69 : v32) 0.2912074119615915, (v28 : v0) 7.842975038523242, (v84 : v11) 7.679388487871959, (v27 : v30) 6.295683498493473, (v32 : v4) 6.174549237877932, (v72 : v18) 4.578008707941709, (v44 : v53) 8.534322696702528, (v17 : v33) 9.348082504347035, (v27 : v39) 0.8330689117172685, (v51 : v53) 1.2362337437444193, (v94 : v43) 3.534220230247105, (v68 : v52) 7.551162391876192, (v7 : v62) 8.182449833458382, (v98 : v61) 5.245254574242707, (v98 : v2) 5.659665085252556, (v29 : v62) 9.916220365315267, (v74 : v45) 7.1646328051838175, (v4 : v24) 6.72235203582138, (v59 : v46) 5.937953761702509, (v53 : v69) 6.093756925044192, (v63 : v38) 6.193783095342695, (v70 : v64) 8.854129796092183, (v76 : v58) 2.0750105299659927, (v87 : v88) 2.305532400487873, (v39 : v34) 8.963734424277366, (v98 : v46) 6.607011170314443, (v11 : v71) 8.804156121269157, (v79 : v9) 2.687706313677655, (v36 : v42) 0.7871330850963276, (v86 : v8) 2.4236759944036415, (v42 : v65) 5.767463876026149, (v62 : v43) 4.97846683485407, (v57 : v95) 3.005653001339642, (v92 : v52) 1.3202966398798344, (v36 : v28) 8.520827421231209, (v25 : v77) 0.8995808063325383, (v9 : v2) 6.692288473371347, (v85 : v40) 9.371689184446822, (v55 : v69) 8.341757323571624, (v64 : v29) 5.809801136161164, (v23 : v12) 5.860874156485973, (v90 : v16) 8.956273863163778, (v42 : v64) 6.9193134285894455, (v62 : v90) 9.249094604740646, (v50 : v77) 4.70462056748547, (v46 : v75) 1.329990833681295, (v63 : v52) 2.7184699635054743, (v81 : v23) 7.8461580093337595, (v33 : v72) 3.0045976697118713, (v49 : v77) 2.108095297839175, (v30 : v5) 6.8366012071638345, (v13 : v32) 4.727715965529217, (v76 : v17) 8.780734534095135, (v91 : v37) 8.056012745371238, (v97 : v50) 7.507665869901285, (v47 : v90) 5.046600550199296, (v26 : v28) 7.502048789181021, (v29 : v18) 4.2252042001571954, (v54 : v11) 4.0600615572479715, (v28 : v67) 5.5366369210778394, (v51 : v3) 2.729457227912496, (v58 : v2) 8.917258550288555, (v55 : v88) 3.0970060853893533, (v71 : v32) 7.105867301230628, (v51 : v18) 3.9336589639626327, (v97 : v68) 0.21919254203517036, (v42 : v96) 1.943699493783717, (v78 : v60) 3.395666882622721, (v16 : v17) 3.4122265647852714, (v12 : v72) 1.9252022418785886, (v16 : v15) 6.993403880250561, (v88 : v61) 4.9618151418266185, (v9 : v31) 5.724177158367395, (v21 : v13) 8.544882405872405, (v90 : v69) 7.484977170521066, (v60 : v12) 8.274610998704226, (v9 : v78) 9.866939964130648, (v69 : v76) 8.79518854885237, (v77 : v9) 8.457279888199803, (v21 : v52) 1.0886238268015314, (v41 : v33) 6.539773687342281, (v85 : v95) 4.483186505470141, (v70 : v33) 0.15126952255607118, (v22 : v67) 0.8986968615154456, (v93 : v98) 0.2693300027918377, (v76 : v6) 7.008897294213172, (v30 : v18) 4.968484934964658, (v47 : v35) 1.1773342034235335, (v69 : v57) 8.917200933823109, (v79 : v46) 6.852314694555722, (v75 : v53) 7.24501696020606, (v7 : v90) 0.8796112538115586, (v89 : v63) 1.1459247308026776, (v14 : v44) 2.3559324368619903, (v93 : v87) 5.562947684181809, (v60 : v36) 6.305275634306612, (v71 : v97) 5.789070279801885, (v32 : v36) 2.873888593292282, (v48 : v13) 2.096635908155604, (v59 : v84) 0.8237091133274543, (v41 : v34) 5.75265773639082, (v12 : v53) 7.9311004034813335, (v62 : v41) 8.579113948141408, (v77 : v35) 7.195947280421427, (v65 : v45) 3.0693120706994295, (v91 : v7) 8.420523371164398, (v10 : v39) 3.8742520443731276, (v31 : v71) 9.268959462101424, (v34 : v82) 1.033192488756478, (v11 : v76) 8.06393982245223, (v22 : v29) 3.853239034732842, (v83 : v73) 4.670917488708708, (v54 : v13) 3.962876231166781, (v79 : v69) 3.3714450006029315, (v26 : v10) 0.29931606415612877, (v86 : v3) 7.802187273902721, (v79 : v67) 5.071017328777982, (v1 : v31) 8.157063765730975, (v75 : v82) 1.9025933471053447, (v84 : v58) 2.8953009466717172, (v0 : v6) 8.163741469492983, (v94 : v38) 4.30269971005949, (v4 : v91) 7.057166302264269, (v15 : v32) 0.2081774427711125, (v23 : v93) 9.449380777081709, (v10 : v99) 3.9098783240740485, (v21 : v5) 5.13564625818145, (v13 : v50) 4.518378518983637, (v71 : v37) 1.6052894221440195, (v55 : v7) 9.238521045167312, (v40 : v59) 0.19159960312022495, (v16 : v83) 4.002200347406878, (v45 : v8) 3.4331236041334456, (v36 : v66) 5.904239739124835, (v62 : v79) 8.628291680286335, (v21 : v19) 9.310919502992208, (v47 : v97) 4.927111750116318, (v11 : v89) 1.6904190898086457, (v9 : v66) 0.2725146975317372, (v68 : v32) 7.1975231627626, (v90 : v78) 9.386475469143612, (v13 : v19) 8.028612800163453, (v96 : v33) 0.5051731249678815, (v16 : v0) 0.4007733788258572, (v85 : v80) 1.3223104874373226, (v54 : v71) 3.7105474954648274, (v47 : v72) 9.625688209316078, (v37 : v40) 5.659469468313256, (v17 : v14) 1.3408726469492138, (v43 : v35) 0.7172920584811071, (v38 : v46) 4.465176665159555, (v31 : v62) 4.708286991187535, (v6 : v58) 6.929351979398515, (v43 : v11) 0.18591950168586502, (v81 : v48) 6.4137471777513255, (v1 : v6) 8.89758854764113, (v82 : v19) 1.12686636329847, (v91 : v8) 2.4812496847673526, (v85 : v26) 9.490149222231825, (v98 : v16) 6.683116846243699, (v94 : v79) 9.432540596812071, (v55 : v78) 9.100029117596375, (v12 : v64) 1.8574006779272556, (v45 : v5) 4.64749759936431, (v8 : v87) 8.984177587148727, (v4 : v59) 5.707171149942635, (v8 : v57) 4.275908578427493, (v46 : v33) 6.943992535200486, (v7 : v39) 3.035173681463621, (v12 : v30) 4.9884414202114975, (v15 : v64) 9.385992562275106, (v90 : v9) 5.09396041471367, (v7 : v59) 8.063965043688825, (v84 : v67) 5.201242629330315, (v23 : v21) 6.424604697895074, (v89 : v59) 9.922999552364185, (v89 : v57) 0.46943757605877656, (v83 : v0) 5.314917154682176, (v22 : v64) 7.006437830843215, (v7 : v16) 0.08676134594454155, (v12 : v41) 4.737368033643541, (v9 : v34) 0.4542512360947426, (v23 : v94) 8.937496894170364, (v80 : v52) 7.115938040818694, (v94 : v59) 5.207111483748152, (v35 : v98) 1.9946303023311684, (v15 : v59) 6.679605920196472, (v78 : v4) 5.20094326178858, (v47 : v57) 9.124384489577784, (v89 : v6) 5.104561462298937, (v69 : v4) 9.04720828996554, (v35 : v30) 5.040326553080963, (v98 : v67) 9.535137743929806, (v60 : v17) 2.791043280058565, (v81 : v84) 6.993212002896301]"; 
 var hidden = new Array(); 
 var path = new Array(); 
hidden[0] = "[v28, v36, v53, v69, v62]"; 
path[0] = "[v17, v14, v25, v77, v49, v13, v48, v5, v45, v65, v92, v0, v16, v7, v51, v53, v69, v32, v15, v89, v57, v85, v99, v10, v26, v28, v67, v97, v68, v36, v42, v44, v53, v46, v75, v82, v88, v87, v40, v59, v84, v58, v76, v21, v52, v35, v43, v11, v86, v8, v91, v4, v78, v60, v83, v39, v27, v33, v70, v64, v12, v56, v22, v23, v81, v37, v71, v79, v9, v66, v36, v42, v96, v42, v96, v33, v72, v18, v29, v94, v38, v63, v62]"; 
var step, play;

function showGraph() {
    
	var width = $(document).width();
	
    var height = $(document).height() - 100;

    var g = new Graph();
	
	var graph = graphNodes.split(",");
	
	var hiddenItems = hidden[$('#round-to-play').val()].substring(0, hidden[$('#round-to-play').val()].length - 1).split(",");
	
	for (var k = 0; k < hiddenItems.length; k++) {
		
		hiddenItems[k] = hiddenItems[k].substring(1, hiddenItems[k].length);
		
		g.addNode(hiddenItems[k], { label : hiddenItems[k] + " HIDE" });
	
		$('#hidden').append(hiddenItems[k] + " ");
	
	}
	
	for (var i = 0; i < graph.length; i++) {
		
		g.addEdge(graph[i].substring(graph[i].indexOf("(") + 1, graph[i].indexOf(":") - 1), graph[i].substring(graph[i].indexOf(":") + 2, graph[i].indexOf(")")));
		 
	}
	
	var layouter = new Graph.Layout.Spring(g);
	
	var searchPath = path[$('#round-to-play').val()].substring(0, path[$('#round-to-play').val()].length - 1).split(",");
	
	var renderer = new Graph.Renderer.Raphael('canvas', g, width, height);
	
	step = function() {
		
		drawPath(hiddenItems, searchPath, g, renderer);
		
		searchPath.splice(0,1);
		
	}
	
	play = function() {
		
		setInterval(function(){step()},1000);
		
	}
		
	step();
	
};

function drawPath(hiddenItems, searchPath, g, renderer) {
	
	
	for (var j = 1; j < searchPath.length; j++) {
		
	
		 /* colourising the shortest paths and setting labels */
		for(e in g.edges) {
			
			if((searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].source.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].target.id) ||
			   (searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].target.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].source.id)) {
			
				$('#output').html(searchPath[j-1].substring(1,searchPath[j-1].length) + " to " + searchPath[j].substring(1,searchPath[j].length));
				
				for (var l = 0; l < hiddenItems.length; l++) {
				
					if ( hiddenItems[l] == g.edges[e].source.id || hiddenItems[l] == g.edges[e].target.id ) {
						
						//alert(hiddenItems[l] + " " + g.edges[e].source.id);
						//alert(hiddenItems[l] + " " + g.edges[e].target.id);
						hiddenItems.splice(l, 1);
						$('#hidden').html("Hidden Items: ");
						
						for (var o = 0; o < hiddenItems.length; o++) {
		
							//alert(hiddenItems);
							
							$('#hidden').append(hiddenItems[o] + " ");
						
						}
	
					}
					
				}
				
				g.edges[e].style.stroke = "#00c8a1";
				g.edges[e].style.fill = "#00c8a1";
				
				renderer.draw();
				return;
				
			} else {
				
				g.edges[e].style.stroke = "#fff";
			
			}
			
		}
		
	}

}

function getRandomColor() {
	
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++ ) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
	
}
