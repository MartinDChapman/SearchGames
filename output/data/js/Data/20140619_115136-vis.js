var graphNodes = "[(v81 : v93) 8.8399824543275, (v3 : v65) 4.2550864811816345, (v23 : v62) 1.9697111853686078, (v79 : v19) 5.865285047812641, (v47 : v53) 1.761359472000531, (v80 : v25) 3.3614219375829615, (v44 : v45) 2.9024873583992052, (v66 : v79) 4.857912074365997, (v46 : v78) 8.911682539810695, (v60 : v40) 4.744528654392909, (v7 : v79) 3.010226360027307, (v60 : v6) 6.10693105539955, (v57 : v66) 9.357401099012773, (v45 : v55) 8.194137688422718, (v73 : v76) 7.82792541186998, (v22 : v66) 4.593973168386537, (v16 : v60) 3.9823324324321128, (v58 : v79) 6.532139523520456, (v57 : v60) 6.932160861439755, (v13 : v54) 6.794887124026616, (v42 : v95) 7.53515621888798, (v47 : v23) 9.058441180458546, (v85 : v4) 9.030999649797188, (v91 : v76) 2.1657625512821497, (v71 : v63) 0.7614508945007936, (v20 : v24) 0.3045298258217577, (v99 : v58) 2.082452556499599, (v27 : v51) 5.697310441977194, (v10 : v71) 9.698215365187863, (v12 : v63) 6.809886648682827, (v42 : v24) 4.313359360747079, (v47 : v61) 0.11700144207556384, (v29 : v93) 6.249834978445392, (v95 : v2) 8.943042319307155, (v24 : v61) 9.207856012764154, (v83 : v2) 7.031262680783059, (v37 : v88) 4.017960759678405, (v1 : v78) 4.4082049779970784, (v87 : v46) 2.5443452127583264, (v92 : v98) 7.325421425219901, (v29 : v85) 6.023795418407918, (v82 : v62) 5.010029235922877, (v66 : v78) 2.38215209452333, (v64 : v10) 2.4769712075230332, (v92 : v49) 6.43978694219407, (v98 : v5) 8.493240832227983, (v78 : v26) 3.533816421496172, (v2 : v11) 0.0881325805959754, (v72 : v36) 6.738751715480601, (v35 : v68) 2.8304655212141205, (v11 : v5) 6.506234539485936, (v20 : v25) 8.906567691874603, (v95 : v1) 7.771962420106129, (v80 : v58) 1.2007577919824297, (v47 : v92) 7.153635428704133, (v6 : v29) 0.8784977893846513, (v67 : v23) 3.2037507326611, (v26 : v97) 2.0829616066942203, (v51 : v15) 7.357633206399554, (v89 : v7) 0.36636708114678673, (v83 : v29) 6.458694756486464, (v39 : v3) 0.38217504267666236, (v99 : v9) 8.934372258587526, (v67 : v1) 3.5635814975811684, (v6 : v98) 2.8784696726219283, (v37 : v65) 2.3142387533407636, (v80 : v96) 2.6660399796607956, (v19 : v41) 4.351749059705777, (v61 : v1) 1.1389630434272224, (v89 : v98) 8.892296062083618, (v76 : v26) 1.8637918000972586, (v68 : v77) 6.371229931288846, (v21 : v41) 3.144267626898344, (v14 : v42) 0.2911279557298574, (v96 : v65) 5.191397691784411, (v36 : v62) 4.913704444481, (v56 : v66) 9.592679062020585, (v76 : v35) 6.109093519285784, (v91 : v35) 6.6136846181262055, (v18 : v89) 6.39584903390231, (v98 : v38) 9.200847687177664, (v39 : v27) 4.604156264793261, (v53 : v65) 1.2811146970267884, (v18 : v48) 7.636108856480519, (v62 : v84) 3.1757401068835387, (v76 : v14) 7.349612995046025, (v0 : v40) 4.921605957196936, (v18 : v63) 1.9319397270208571, (v12 : v80) 2.9400914976142687, (v60 : v56) 4.436782487285079, (v31 : v87) 0.8829673196774435, (v20 : v15) 4.022786939567295, (v34 : v84) 8.345536341353846, (v45 : v25) 9.346056084699221, (v83 : v62) 3.3540837641705403, (v32 : v92) 1.4244568397079116, (v62 : v95) 5.648628909405512, (v60 : v58) 1.9143447043324224, (v32 : v52) 7.490255567028895, (v78 : v30) 5.333429242907818, (v12 : v31) 9.37847335156212, (v94 : v1) 2.446107654245563, (v68 : v61) 7.177859872014658, (v44 : v34) 0.32504855122234777, (v5 : v92) 9.890705585128273, (v61 : v86) 9.946781492650905, (v29 : v98) 8.995769189637885, (v17 : v19) 8.407422281629785, (v78 : v70) 8.881076565302301, (v35 : v18) 2.7015684813005514, (v42 : v32) 6.565724947643062, (v18 : v67) 9.643245150529275, (v83 : v97) 8.422912331658466, (v34 : v43) 9.979192047514218, (v82 : v72) 2.931132831649612, (v1 : v5) 8.514659927070644, (v1 : v31) 5.196233361028051, (v90 : v48) 9.509355741902603, (v27 : v26) 9.863511122347472, (v32 : v37) 2.4816550753030975, (v95 : v82) 0.4923344643190686, (v32 : v88) 6.564293887308993, (v2 : v88) 2.0680869812689173, (v58 : v49) 6.7723904571717775, (v55 : v93) 8.306143332693466, (v57 : v7) 6.968934586490065, (v22 : v59) 1.1448043234442506, (v99 : v34) 7.344232339864707, (v41 : v53) 8.369689525933154, (v61 : v51) 8.17084237018872, (v79 : v92) 8.858271154470092, (v0 : v56) 2.1671697280801006, (v35 : v5) 8.333532461259814, (v50 : v92) 9.620242446484653, (v43 : v23) 1.7799386610347545, (v87 : v11) 9.50667756159654, (v9 : v74) 9.469010992875237, (v90 : v99) 6.142076141581754, (v19 : v62) 9.688071609964721, (v25 : v0) 0.7209768091686619, (v79 : v20) 3.242696964720948, (v99 : v26) 5.726169985345391, (v32 : v39) 8.24583615510069, (v34 : v67) 4.238036918794772, (v88 : v65) 1.9054426410129188, (v10 : v34) 6.21824879425947, (v38 : v41) 2.425092503432791, (v51 : v46) 6.840558891753496, (v20 : v69) 4.8419393574974094, (v7 : v85) 3.763658621896522, (v30 : v16) 0.9032522941880783, (v48 : v20) 8.162557151683092, (v68 : v53) 3.8427063445327683, (v61 : v8) 9.537308699051238, (v87 : v52) 3.232817770925495, (v3 : v7) 4.389065166479572, (v84 : v79) 4.688958244220939, (v96 : v69) 0.28748010441539296, (v86 : v46) 0.9679934676160262, (v32 : v94) 7.550863696262093, (v10 : v40) 9.48180447876952, (v81 : v5) 2.5277928758476986, (v44 : v93) 1.1300225749391757, (v45 : v16) 7.5190341699731436, (v61 : v44) 4.00075475128847, (v58 : v15) 9.830758733836037, (v80 : v14) 5.402664303772291, (v82 : v31) 4.829522968445187, (v2 : v18) 7.04252096663124, (v20 : v67) 7.607993808240994, (v7 : v12) 1.2714994424004344, (v87 : v33) 3.805795413320393, (v6 : v97) 4.169617493736314, (v30 : v63) 0.006299106851243019, (v61 : v12) 1.955511477972478, (v10 : v22) 7.098049406149965, (v51 : v47) 6.5892820652337525, (v9 : v1) 9.105463804844709, (v71 : v54) 0.42665919466056246, (v96 : v51) 4.7203483773593895, (v86 : v25) 6.9867503964239415, (v40 : v42) 7.472782137937227, (v36 : v77) 9.072923438055193, (v69 : v24) 2.9424223846152255, (v16 : v44) 8.052939814749857, (v51 : v8) 1.3109182693337906, (v18 : v78) 0.6325709791754586, (v30 : v39) 0.980782295048449, (v47 : v25) 6.175103404432925, (v41 : v93) 2.9298920075662482, (v85 : v33) 7.912151493602883, (v19 : v14) 6.334173985141631, (v32 : v1) 2.3000421518130754, (v11 : v93) 8.080601513671722, (v32 : v98) 9.498003216602722, (v4 : v93) 2.8212986883108258, (v89 : v59) 4.33297032716463, (v32 : v61) 5.806435827055832, (v93 : v60) 6.180811195420027, (v96 : v3) 8.904110869881048, (v17 : v28) 0.6011488096853601, (v2 : v22) 5.901176402059397, (v71 : v95) 8.13502791034695, (v37 : v70) 7.717897173892406, (v29 : v9) 1.889915862698992, (v96 : v30) 1.8055194868838054, (v84 : v30) 6.029730121710709, (v75 : v42) 4.3797319134248145, (v31 : v86) 0.34975961523170507, (v14 : v49) 4.831201683590423, (v74 : v94) 0.19475169690683192, (v60 : v98) 0.6097914975213092, (v95 : v65) 7.17659418425281, (v78 : v17) 8.970840957377135, (v50 : v39) 0.7257015191278471, (v95 : v27) 1.475405961403058, (v18 : v51) 7.38341423040529, (v9 : v90) 4.233257183560162, (v85 : v39) 7.983733327340248, (v45 : v31) 4.155612511109984, (v12 : v11) 9.210021209805696, (v77 : v55) 0.4381648811328476, (v16 : v22) 7.330708797549006, (v66 : v44) 4.024368163095645, (v45 : v79) 7.758527936629328, (v90 : v14) 2.710783319116489, (v36 : v47) 4.13765445997388, (v61 : v76) 9.06346691493384, (v68 : v25) 7.29586435234244, (v21 : v56) 4.5360402476196455, (v49 : v6) 5.114181742361426, (v26 : v81) 9.641603644109471, (v66 : v67) 4.330524819459239, (v29 : v17) 4.163692501496344, (v9 : v49) 9.82880323115609, (v55 : v47) 7.033908256009593, (v92 : v61) 4.049309860123148, (v91 : v81) 5.399823424696559, (v29 : v31) 1.9248469844195615, (v56 : v64) 0.706674209407816, (v26 : v36) 5.990832132347457, (v81 : v69) 4.376819412076708, (v88 : v90) 2.9839323432789664, (v25 : v60) 1.354887141962221, (v51 : v44) 0.9360738541099245, (v20 : v71) 9.763069455084349, (v5 : v30) 3.2487370932306536, (v32 : v79) 3.9555564702174473, (v3 : v23) 9.912296079307401, (v13 : v93) 5.055269279106003, (v43 : v29) 2.4890577678850354, (v25 : v74) 2.6877411104113946, (v8 : v20) 7.935115458327885, (v84 : v60) 8.090354563078265, (v79 : v14) 1.1799174807703616, (v78 : v7) 7.470549245767603, (v88 : v0) 9.654584508932452, (v86 : v92) 4.720729130687779, (v8 : v78) 6.857757195381322, (v91 : v10) 0.08328686633537918, (v2 : v7) 1.4246182047951028, (v45 : v34) 0.7155906188694816, (v81 : v27) 3.0304973441291336, (v12 : v29) 6.357315727660061, (v15 : v60) 4.481136685060653, (v83 : v50) 8.382802715504639, (v78 : v20) 8.339532466531121, (v88 : v29) 9.76707689206518, (v15 : v68) 6.89279877935153, (v44 : v12) 2.1498966664322037, (v58 : v44) 1.806483908897134, (v23 : v18) 0.8981216105857237, (v89 : v62) 7.739223167849406, (v52 : v14) 0.39943280025550476, (v11 : v26) 5.9447972779145175, (v57 : v63) 6.732885750070122, (v4 : v63) 5.575109066504057, (v48 : v30) 9.223087442779892, (v54 : v17) 3.276045232912942, (v92 : v85) 3.470333112564985, (v16 : v82) 4.654679025288897, (v71 : v66) 7.440473099916179, (v43 : v2) 3.363054023998985, (v92 : v24) 6.6834839853683325, (v27 : v70) 6.619391379181638, (v24 : v90) 1.2228436220185679, (v31 : v36) 6.8567415028360825, (v14 : v54) 3.01923422578216, (v38 : v45) 2.3928724403430444, (v57 : v54) 0.968470644069821, (v98 : v17) 0.25082144054015876, (v23 : v73) 8.357765320252335, (v46 : v27) 8.88055022381442, (v28 : v61) 2.6956239355180744, (v15 : v57) 0.04828926360475161, (v49 : v39) 8.374229132848027, (v33 : v98) 7.737470220113201, (v29 : v21) 1.1507249332366087, (v32 : v59) 7.865875943378617, (v92 : v64) 8.783290189063834]"; 
 var hidden = new Array(); 
 var path = new Array(); 
hidden[0] = "[v86, v36, v26, v78, v89]"; 
path[0] = "[v75, v42, v14, v52, v87, v31, v86, v46, v51, v44, v34, v45, v38, v41, v93, v4, v63, v30, v16, v60, v98, v17, v28, v61, v47, v53, v65, v88, v2, v11, v26, v76, v91, v10, v64, v56, v0, v25, v74, v94, v1, v32, v92, v85, v7, v89, v59, v22, v66, v78, v18, v23, v43, v29, v6, v97, v83, v62, v84, v79, v20, v24, v90, v9, v99, v58, v80, v96, v69, v81, v5, v35, v68, v77, v55, v77, v36]"; 
var step, play;

function showGraph() {
    
	var width = $(document).width();
	
    var height = $(document).height() - 100;

    var g = new Graph();
	
	var graph = graphNodes.split(",");
	
	var hiddenItems = hidden[$('#round-to-play').val()].substring(0, hidden[$('#round-to-play').val()].length - 1).split(",");
	
	for (var k = 0; k < hiddenItems.length; k++) {
		
		hiddenItems[k] = hiddenItems[k].substring(1, hiddenItems[k].length);
		
		g.addNode(hiddenItems[k], { label : hiddenItems[k] + " HIDE" });
	
		$('#hidden').append(hiddenItems[k] + " ");
	
	}
	
	for (var i = 0; i < graph.length; i++) {
		
		g.addEdge(graph[i].substring(graph[i].indexOf("(") + 1, graph[i].indexOf(":") - 1), graph[i].substring(graph[i].indexOf(":") + 2, graph[i].indexOf(")")));
		 
	}
	
	var layouter = new Graph.Layout.Spring(g);
	
	var searchPath = path[$('#round-to-play').val()].substring(0, path[$('#round-to-play').val()].length - 1).split(",");
	
	var renderer = new Graph.Renderer.Raphael('canvas', g, width, height);
	
	step = function() {
		
		drawPath(hiddenItems, searchPath, g, renderer);
		
		searchPath.splice(0,1);
		
	}
	
	play = function() {
		
		setInterval(function(){step()},1000);
		
	}
		
	step();
	
};

function drawPath(hiddenItems, searchPath, g, renderer) {
	
	
	for (var j = 1; j < searchPath.length; j++) {
		
	
		 /* colourising the shortest paths and setting labels */
		for(e in g.edges) {
			
			if((searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].source.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].target.id) ||
			   (searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].target.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].source.id)) {
			
				$('#output').html(searchPath[j-1].substring(1,searchPath[j-1].length) + " to " + searchPath[j].substring(1,searchPath[j].length));
				
				for (var l = 0; l < hiddenItems.length; l++) {
				
					if ( hiddenItems[l] == g.edges[e].source.id || hiddenItems[l] == g.edges[e].target.id ) {
						
						//alert(hiddenItems[l] + " " + g.edges[e].source.id);
						//alert(hiddenItems[l] + " " + g.edges[e].target.id);
						hiddenItems.splice(l, 1);
						$('#hidden').html("Hidden Items: ");
						
						for (var o = 0; o < hiddenItems.length; o++) {
		
							//alert(hiddenItems);
							
							$('#hidden').append(hiddenItems[o] + " ");
						
						}
	
					}
					
				}
				
				g.edges[e].style.stroke = "#00c8a1";
				g.edges[e].style.fill = "#00c8a1";
				
				renderer.draw();
				return;
				
			} else {
				
				g.edges[e].style.stroke = "#fff";
			
			}
			
		}
		
	}

}

function getRandomColor() {
	
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++ ) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
	
}
