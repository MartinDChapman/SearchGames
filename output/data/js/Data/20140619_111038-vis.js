var graphNodes = "[(v94 : v95) 8.645723950107602, (v5 : v9) 7.778738138839104, (v20 : v96) 6.231571940453221, (v59 : v24) 0.8330782659768865, (v90 : v48) 2.4557875882490965, (v18 : v84) 5.863714168605715, (v54 : v97) 2.2017510788478867, (v13 : v93) 3.644624665703795, (v21 : v23) 4.301312274611327, (v14 : v7) 7.60480838149625, (v56 : v18) 0.9232574147314732, (v19 : v61) 7.900858795230499, (v59 : v29) 0.8881786864500596, (v49 : v0) 5.292824030205207, (v69 : v73) 2.1741868578855783, (v68 : v98) 9.548485647870649, (v14 : v55) 1.0965657424622655, (v6 : v79) 9.846284421566354, (v67 : v56) 1.3207834325524614, (v91 : v60) 2.007085119668508, (v56 : v19) 0.1682331505675172, (v65 : v11) 6.791442810458417, (v20 : v25) 7.919970083954645, (v78 : v59) 8.78990316970207, (v57 : v52) 5.9940312509094875, (v71 : v21) 9.35328000905955, (v81 : v66) 5.101461213507394, (v45 : v41) 3.708196974295843, (v27 : v34) 5.565911648919912, (v11 : v30) 9.937089265473345, (v36 : v81) 9.868921930843541, (v2 : v57) 0.33423951361000737, (v26 : v47) 5.7612218020430115, (v61 : v73) 7.149394621790406, (v59 : v5) 5.719402882118825, (v79 : v85) 9.673487373136156, (v54 : v22) 1.5430863250291171, (v60 : v39) 6.688581894652605, (v44 : v18) 8.052552200382774, (v21 : v24) 2.584299940137643, (v98 : v95) 6.389190921295133, (v44 : v25) 0.929769837628146, (v99 : v92) 9.725859759913764, (v32 : v4) 1.3839951500918701, (v1 : v77) 4.302302260552149, (v74 : v81) 3.835084035931491, (v19 : v92) 8.809467907787578, (v90 : v0) 3.2929099666554853, (v50 : v46) 0.10937180217163833, (v37 : v88) 4.939638809882291, (v62 : v17) 3.1038401049072197, (v23 : v39) 6.893532215869197, (v65 : v86) 4.922086340821501, (v16 : v96) 8.595173923294658, (v15 : v32) 6.305843641543784, (v84 : v51) 1.6196560780519142, (v33 : v51) 6.6102468000539405, (v77 : v59) 2.397431716606574, (v0 : v52) 8.843575842205242, (v98 : v10) 9.440904797532566, (v45 : v90) 0.9303671528048174, (v34 : v10) 1.7800011803703686, (v47 : v2) 2.3475202054343636, (v69 : v23) 7.370856083649031, (v5 : v36) 7.555408017782831, (v43 : v67) 6.126498750752276, (v47 : v21) 0.4853916244237022, (v91 : v5) 9.202396160144463, (v35 : v49) 6.667566751326857, (v96 : v71) 5.434591857200583, (v54 : v42) 0.46028959389511237, (v52 : v55) 4.96181762322373, (v41 : v52) 6.00457170013843, (v37 : v72) 5.559514788552535, (v41 : v93) 8.85654762827701, (v82 : v2) 6.97356866144479, (v18 : v20) 5.290929786009615, (v53 : v46) 4.371367581805165, (v20 : v39) 2.7149330318143394, (v51 : v53) 2.140450365812583, (v7 : v55) 4.839110383676722, (v34 : v9) 0.7796264835049149, (v0 : v37) 1.728612778794284, (v19 : v65) 1.069450776380616, (v42 : v80) 7.771647173989083, (v23 : v18) 3.509937133842392, (v90 : v39) 0.27357124755214013, (v93 : v36) 6.0112928628720645, (v62 : v16) 0.7936633583688524, (v56 : v74) 6.762404060688603, (v96 : v15) 8.621931388361109, (v59 : v28) 1.2321691031087867, (v59 : v97) 6.736344057695414, (v1 : v10) 5.437225043408543, (v85 : v66) 1.1338899104980171, (v96 : v87) 1.3990166937462656, (v98 : v8) 3.1953873758468196, (v0 : v58) 3.4826645937538636, (v54 : v30) 5.483751003409456, (v43 : v78) 5.835090912776452, (v55 : v26) 5.504487221098242, (v97 : v23) 5.102001408237438, (v53 : v47) 1.0478058839475202, (v89 : v34) 9.090471323705223, (v27 : v5) 9.012414642706883, (v44 : v13) 0.050221365222057335, (v84 : v50) 6.4665657287746345, (v28 : v33) 1.1725368821729754, (v10 : v55) 5.173279990070393, (v46 : v89) 1.0578713483608149, (v46 : v82) 6.091132530750926, (v59 : v64) 3.9943305988724687, (v89 : v71) 8.313074594750441, (v93 : v8) 3.538630190253189, (v62 : v6) 2.533244089140534, (v82 : v86) 4.124126814843441, (v42 : v38) 5.10160418611425, (v1 : v18) 5.168790452158769, (v62 : v44) 7.860809200973961, (v24 : v54) 5.757405117868812, (v28 : v92) 6.737446118084706, (v78 : v95) 5.670989763210911, (v71 : v17) 9.115501136515862, (v14 : v56) 1.982824173739114, (v50 : v9) 4.644572018203435, (v87 : v93) 5.191166644517915, (v97 : v26) 4.776256193761647, (v70 : v7) 6.8766819260315835, (v59 : v63) 4.082800661770632, (v40 : v83) 3.026860276165193, (v32 : v28) 7.552277381157532, (v30 : v55) 5.735736345036422, (v27 : v11) 6.490252026838222, (v35 : v9) 7.146611031230394, (v73 : v88) 5.461419503081416, (v47 : v80) 5.84615376037958, (v78 : v93) 0.6045004492488248, (v14 : v12) 8.934362360551592, (v23 : v31) 7.53458865072643, (v70 : v72) 5.586739361926226, (v38 : v36) 4.4501290593409015, (v53 : v79) 6.899401205089427, (v35 : v41) 2.6840644788681645, (v99 : v23) 5.377501451851353, (v4 : v12) 5.133912307736709, (v97 : v5) 7.711519930575081, (v53 : v63) 0.28340625134208874, (v32 : v93) 0.00998274140625699, (v62 : v10) 1.0548630610417797, (v49 : v79) 2.8527187482506724, (v70 : v94) 8.82888517193903, (v2 : v4) 8.233690744411566, (v88 : v20) 1.614900950298619, (v33 : v15) 4.420909203094787, (v29 : v26) 4.6871341430246884, (v8 : v95) 2.1233442804655667, (v86 : v2) 2.806908076992337, (v93 : v70) 4.177724341809271, (v75 : v96) 6.380987972659903, (v81 : v44) 5.714547659093711, (v9 : v73) 3.1604637944040572, (v77 : v58) 5.8016738217930985, (v85 : v38) 1.1252403425225455, (v67 : v38) 9.670891582280968, (v99 : v76) 3.4415530451065726, (v72 : v95) 1.4895306525399443, (v10 : v38) 9.396314747109534, (v98 : v51) 6.333372693998449, (v41 : v33) 5.231070481123506, (v34 : v30) 0.5429721601616178, (v47 : v19) 0.20461232075154934, (v85 : v3) 7.403414272855641, (v80 : v43) 8.047949724174781, (v95 : v57) 9.384138866441585, (v41 : v22) 4.43556594336838, (v54 : v14) 4.723658062821661, (v83 : v11) 2.0362679121783356, (v59 : v83) 9.562918146717704, (v55 : v58) 6.135189957060222, (v72 : v89) 3.146092693922393, (v73 : v14) 3.401687027970807, (v98 : v82) 2.7503982194698606, (v95 : v80) 1.9381884991490572, (v49 : v37) 3.314970870634667, (v81 : v28) 2.7611149375696806, (v30 : v36) 9.457076993118317, (v66 : v78) 6.971446041064278, (v71 : v84) 1.3423599544901954, (v10 : v36) 2.3604764383447363, (v57 : v56) 1.271054469605084, (v27 : v25) 1.512988650866477, (v33 : v69) 1.817061884636565, (v63 : v99) 6.719009522659588, (v53 : v62) 4.780578435183629, (v14 : v6) 6.446274366269467, (v48 : v45) 0.3630243934551691, (v43 : v56) 2.6745097801788873, (v99 : v87) 9.026944797993705, (v50 : v6) 7.121933506789075, (v68 : v85) 2.0512658533391703, (v36 : v25) 9.032467833563526, (v34 : v6) 7.32791192223512, (v80 : v36) 4.623845198931176, (v27 : v64) 2.3697129864391595, (v55 : v50) 3.0630530625235517, (v41 : v66) 8.61840739299067, (v51 : v39) 0.633703943060816, (v15 : v95) 8.168254894549667, (v29 : v40) 0.9434224655701162, (v49 : v29) 3.0744652471735714, (v13 : v98) 7.097994946397908, (v16 : v43) 7.021698502446104, (v28 : v25) 1.908837147249678, (v74 : v99) 1.7179634283584255, (v83 : v10) 4.723560673578584, (v66 : v18) 4.791204423606331, (v77 : v31) 1.35459753981364, (v41 : v25) 9.943866954882328, (v81 : v67) 4.962710180916144, (v21 : v81) 2.8151728061445014, (v99 : v0) 6.421810067122101, (v11 : v79) 0.46833812482786397, (v25 : v30) 8.596085978008887, (v53 : v42) 8.123439028191097, (v37 : v78) 8.703527371374527, (v15 : v37) 2.065198119200562, (v41 : v42) 0.2812681492779212, (v60 : v24) 2.3440293348836017, (v3 : v10) 2.6238103390201406, (v17 : v84) 6.639878680782832, (v9 : v95) 2.507364652561982, (v3 : v51) 7.559617686668542, (v63 : v33) 4.770777849643718, (v97 : v29) 8.684135241662247, (v18 : v74) 4.280597575073148, (v41 : v86) 0.2712164756993596, (v70 : v32) 9.005728701912423, (v54 : v10) 7.961436282814132, (v39 : v37) 9.56316540120866, (v98 : v5) 7.8395210424092685, (v7 : v12) 4.52393432839965, (v26 : v66) 8.392085615414615, (v12 : v61) 7.997422107445395, (v51 : v60) 5.2997249459235976, (v2 : v20) 9.208713527493387, (v77 : v67) 3.538771248503283, (v75 : v22) 5.769685859428786, (v72 : v85) 4.283504377878207, (v9 : v43) 8.598920158322764, (v79 : v60) 1.837378323122132, (v16 : v67) 7.6027474663983385, (v59 : v76) 9.932271424193042, (v1 : v55) 1.5809902388147667, (v72 : v13) 2.7745450104091782, (v92 : v77) 1.813423585763887, (v46 : v2) 6.148677138300654, (v60 : v12) 7.520205114542132, (v94 : v19) 8.582573776891675, (v45 : v10) 9.131256501196791, (v83 : v92) 4.308740864919435, (v93 : v52) 5.961851996476314, (v88 : v91) 4.70396298550685, (v43 : v58) 2.546735393699051, (v18 : v8) 5.644873766273685, (v6 : v4) 9.261468671502941, (v54 : v27) 6.271953255391413, (v47 : v46) 9.842173882461724, (v72 : v14) 2.910450115546416, (v76 : v62) 0.5443853566922618, (v82 : v27) 7.16012794123216, (v10 : v0) 2.6556480296986686, (v76 : v80) 2.64947677164155, (v29 : v58) 4.248280432487511, (v72 : v48) 2.7732526127977986, (v98 : v90) 5.93816307988127, (v92 : v84) 5.420295791195018, (v20 : v80) 4.168495089837782, (v87 : v80) 7.683167678864215, (v56 : v88) 9.486481899369018, (v49 : v41) 7.660153296229794, (v84 : v14) 4.404357823201178, (v12 : v22) 4.457701242214117, (v31 : v39) 8.868817569654576, (v36 : v63) 5.527847461401541, (v6 : v66) 1.8957882130074377, (v93 : v68) 0.5872007432186499, (v12 : v26) 6.507851071089662, (v67 : v13) 8.024571983715402, (v16 : v59) 5.342968348644698, (v11 : v32) 6.282428307526619, (v94 : v36) 4.945310339200769, (v99 : v48) 3.9684506681715783, (v9 : v47) 4.217880903649256, (v47 : v0) 7.099200775633932, (v70 : v26) 3.38460163161568, (v99 : v68) 4.986157167396774, (v99 : v38) 3.3050322758536064, (v35 : v96) 1.839300977126208, (v69 : v9) 5.49276147258155, (v34 : v2) 4.585400457524925]"; 
 var hidden = new Array(); 
 var path = new Array(); 
hidden[0] = "[v11, v65, v19, v47, v53]"; 
path[0] = "[v85, v38, v99, v74, v81, v28, v33, v69, v73, v9, v34, v30, v54, v42, v41, v86, v2, v57, v56, v19, v47, v21, v24, v59, v29, v40, v83, v11, v79, v60, v91, v88, v20, v39, v90, v45, v48, v72, v95, v80, v76, v62, v16, v43, v58, v0, v37, v15, v32, v93, v68, v98, v82, v46, v50, v55, v14, v84, v71, v96, v87, v99, v23, v18, v66, v6, v4, v12, v22, v75, v22, v75, v96, v35, v49, v0, v10, v36, v94, v70, v26, v97, v5, v27, v25, v44, v13, v67, v77, v31, v23, v69, v73, v61, v19, v65, v11, v83, v92, v84, v51, v53]"; 
var step, play;

function showGraph() {
    
	var width = $(document).width();
	
    var height = $(document).height() - 100;

    var g = new Graph();
	
	var graph = graphNodes.split(",");
	
	var hiddenItems = hidden[$('#round-to-play').val()].substring(0, hidden[$('#round-to-play').val()].length - 1).split(",");
	
	for (var k = 0; k < hiddenItems.length; k++) {
		
		hiddenItems[k] = hiddenItems[k].substring(1, hiddenItems[k].length);
		
		g.addNode(hiddenItems[k], { label : hiddenItems[k] + " HIDE" });
	
		$('#hidden').append(hiddenItems[k] + " ");
	
	}
	
	for (var i = 0; i < graph.length; i++) {
		
		g.addEdge(graph[i].substring(graph[i].indexOf("(") + 1, graph[i].indexOf(":") - 1), graph[i].substring(graph[i].indexOf(":") + 2, graph[i].indexOf(")")));
		 
	}
	
	var layouter = new Graph.Layout.Spring(g);
	
	var searchPath = path[$('#round-to-play').val()].substring(0, path[$('#round-to-play').val()].length - 1).split(",");
	
	var renderer = new Graph.Renderer.Raphael('canvas', g, width, height);
	
	step = function() {
		
		drawPath(hiddenItems, searchPath, g, renderer);
		
		searchPath.splice(0,1);
		
	}
	
	play = function() {
		
		setInterval(function(){step()},1000);
		
	}
		
	step();
	
};

function drawPath(hiddenItems, searchPath, g, renderer) {
	
	
	for (var j = 1; j < searchPath.length; j++) {
		
	
		 /* colourising the shortest paths and setting labels */
		for(e in g.edges) {
			
			if((searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].source.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].target.id) ||
			   (searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].target.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].source.id)) {
			
				$('#output').html(searchPath[j-1].substring(1,searchPath[j-1].length) + " to " + searchPath[j].substring(1,searchPath[j].length));
				
				for (var l = 0; l < hiddenItems.length; l++) {
				
					if ( hiddenItems[l] == g.edges[e].source.id || hiddenItems[l] == g.edges[e].target.id ) {
						
						//alert(hiddenItems[l] + " " + g.edges[e].source.id);
						//alert(hiddenItems[l] + " " + g.edges[e].target.id);
						hiddenItems.splice(l, 1);
						$('#hidden').html("Hidden Items: ");
						
						for (var o = 0; o < hiddenItems.length; o++) {
		
							//alert(hiddenItems);
							
							$('#hidden').append(hiddenItems[o] + " ");
						
						}
	
					}
					
				}
				
				g.edges[e].style.stroke = "#00c8a1";
				g.edges[e].style.fill = "#00c8a1";
				
				renderer.draw();
				return;
				
			} else {
				
				g.edges[e].style.stroke = "#fff";
			
			}
			
		}
		
	}

}

function getRandomColor() {
	
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++ ) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
	
}
