var graphNodes = "[(v1 : v0) 8.957592637779314, (v0 : v2) 6.721479077575139, (v3 : v0) 1.3598165807740692, (v4 : v0) 7.427322417799179, (v4 : v3) 4.657643446677771, (v5 : v0) 5.895269208411538, (v0 : v6) 5.280434718990053, (v0 : v7) 3.4337031993689893, (v5 : v8) 7.039730792968442, (v9 : v3) 5.8976221623685765, (v3 : v10) 8.921694494220846, (v0 : v11) 1.2329484168101523, (v0 : v12) 2.456635322157087, (v12 : v11) 5.880146400813693, (v0 : v13) 2.5720965232327995, (v3 : v14) 5.809717513478087, (v8 : v15) 0.8390760689601162, (v16 : v0) 1.1967431117679717, (v17 : v5) 0.21996506547947714, (v3 : v18) 4.110642460550478, (v10 : v18) 3.800238451474746, (v0 : v19) 8.843846379800668, (v0 : v20) 9.668591307247873, (v0 : v21) 8.779554812382548, (v22 : v0) 0.8930808889129849, (v2 : v22) 0.06078330400230758, (v23 : v4) 4.371206509313613, (v0 : v24) 5.2334057530455835, (v25 : v0) 8.813209735068643, (v5 : v25) 2.863997042411036, (v4 : v26) 9.010012955563946, (v27 : v11) 6.6543810259940726, (v28 : v0) 7.256120794138125, (v28 : v4) 8.470515697815815, (v5 : v29) 9.915768856015854, (v18 : v29) 9.061597036314687, (v26 : v29) 6.866124043510978, (v30 : v11) 2.060190776508739, (v31 : v0) 8.309192789001088, (v31 : v11) 6.526164519273428, (v32 : v5) 9.2552876870115, (v33 : v4) 0.1328712443538016, (v34 : v4) 9.042711844069737, (v29 : v34) 4.806290538445468, (v0 : v35) 6.424244890763137, (v2 : v35) 3.835815373888459, (v35 : v31) 0.03084904222557361, (v0 : v36) 0.20448115937375388, (v36 : v4) 7.082730420615693, (v22 : v36) 0.06829005643615105, (v37 : v3) 7.879808405777483, (v38 : v2) 9.286799085923185, (v19 : v38) 0.3462254006221166, (v39 : v0) 9.91444011636181, (v39 : v3) 3.361583190382218, (v40 : v0) 4.254520462091284, (v11 : v40) 3.0761050238171226, (v25 : v41) 7.012158510994174, (v40 : v42) 6.325174292986494, (v43 : v8) 8.221425018166403, (v44 : v39) 5.734200160057625, (v11 : v45) 6.834821134952965, (v46 : v4) 3.397282274953425, (v0 : v47) 4.425346906034424, (v48 : v5) 3.0386988248887494, (v49 : v0) 1.544397521012978, (v14 : v49) 3.397083980265627, (v4 : v50) 3.490499940346634, (v50 : v37) 9.936830527542789, (v5 : v51) 4.068585858248486, (v51 : v18) 4.774491631653346, (v22 : v52) 3.2574849943013673, (v53 : v8) 0.4507890487509669, (v53 : v39) 9.361260098017013, (v54 : v0) 6.578539129611296, (v54 : v3) 6.4107782621240705, (v8 : v54) 6.8068685349317555, (v54 : v10) 0.42466206564023334, (v55 : v11) 9.472319182163037, (v55 : v34) 2.1588858028616453, (v56 : v52) 8.923800523469746, (v57 : v1) 1.6034061981557568, (v5 : v58) 6.1331514676679735, (v0 : v59) 9.560245185847672, (v59 : v10) 9.814797555144601, (v36 : v59) 1.9045118830467966, (v8 : v60) 1.0114353199860127, (v43 : v61) 1.738342179821507, (v0 : v62) 0.7488218044859596, (v17 : v63) 6.654312302374951, (v64 : v37) 7.868898983468339, (v3 : v65) 2.192402676241451, (v65 : v11) 1.1201159917998926, (v11 : v66) 6.672234225195554, (v25 : v67) 9.77672917970105, (v64 : v67) 6.685411154332389, (v68 : v4) 1.8910462148601603, (v26 : v68) 0.32308171207359293, (v69 : v22) 0.3263237796827889, (v18 : v70) 6.779094894689136, (v4 : v71) 8.20182506878176, (v46 : v72) 5.303597437661113, (v73 : v8) 6.690185096374228, (v62 : v74) 3.985907962607528, (v75 : v5) 6.28169658846608, (v54 : v76) 3.825716214481758, (v77 : v14) 4.867727132622237, (v77 : v29) 6.72093610859836, (v78 : v0) 2.1496821330044447, (v5 : v78) 6.978065717248044, (v79 : v4) 4.960541311005745, (v79 : v46) 5.7620343476253275, (v11 : v80) 4.758999096830008, (v35 : v80) 1.4789118954097824, (v80 : v44) 9.643932105640744, (v81 : v17) 7.764404421601726, (v26 : v82) 4.21778449716887, (v21 : v83) 4.777881287431081, (v83 : v23) 2.1362931641515837, (v39 : v83) 0.526202187223257, (v84 : v40) 6.5097662131480725, (v55 : v85) 2.5204429573535494, (v86 : v30) 0.9151688986528472, (v86 : v54) 8.164662919465597, (v6 : v87) 9.742043820163925, (v0 : v88) 5.7582632997375, (v89 : v11) 7.188603355136204, (v36 : v89) 9.137617714864094, (v2 : v90) 3.3631541196727266, (v90 : v3) 3.970193265868367, (v11 : v90) 7.702650819720496, (v43 : v90) 5.133169714818791, (v91 : v4) 1.0231150833315084, (v92 : v64) 3.952789088569315, (v40 : v93) 9.850682924606652, (v40 : v94) 4.250684035017032, (v95 : v25) 9.788153643425, (v11 : v96) 3.945901344841328, (v14 : v97) 8.247399414185804, (v98 : v26) 7.609141540310085, (v98 : v54) 3.2763420228931626, (v99 : v4) 6.978018377821009, (v8 : v99) 1.9402033771758798, (v99 : v31) 4.544290997231565]"; 
 var hidden = new Array(); 
 var path = new Array(); 
hidden[0] = "[v11, v44, v39, v83, v0]"; 
path[0] = "[v71, v4, v33, v4, v91, v4, v68, v26, v82, v26, v29, v34, v55, v85, v55, v11, v65, v3, v0, v36, v22, v2, v90, v43, v61, v43, v8, v53, v39, v83, v23, v4, v46, v72, v46, v79, v46, v4, v50, v37, v64, v92, v64, v67, v25, v5, v17, v63, v17, v81, v17, v5, v48, v5, v51, v18, v10, v54, v98, v54, v76, v54, v86, v30, v86, v54, v76, v54, v76, v54, v98, v54, v8, v15, v8, v60, v8, v99, v31, v35, v80, v44]"; 
hidden[1] = "[v27, v11, v54, v3, v49]"; 
path[1] = "[v52, v22, v2, v90, v3, v0, v36, v59, v10, v54, v98, v26, v68, v4, v33, v4, v91, v4, v46, v72, v46, v79, v46, v4, v50, v37, v64, v92, v64, v67, v25, v5, v17, v63, v17, v81, v17, v5, v48, v5, v51, v18, v70, v18, v29, v34, v55, v85, v55, v11, v65, v11, v30, v86, v30, v86, v54, v76, v54, v8, v53, v39, v83, v23, v4, v99, v31, v35, v80, v44, v39, v0, v62, v74, v62, v0, v16, v0, v49, v14, v77, v29, v77, v29, v26, v82, v26, v4, v71, v4, v28, v4, v68, v4, v46, v79, v4, v99, v31, v11, v40, v94, v40, v42, v40, v84, v40, v93, v40, v93, v40, v93, v40, v11, v96, v11, v12, v11, v27]"; 
hidden[2] = "[v40, v93, v0, v30, v11]"; 
path[2] = "[v18, v10, v54, v98, v26, v68, v4, v33, v4, v91, v4, v46, v72, v46, v79, v46, v79, v46, v4, v50, v37, v64, v92, v64, v67, v25, v5, v17, v63, v17, v81, v17, v5, v48, v5, v51, v5, v0, v36, v22, v2, v90, v3, v65, v11, v30, v86, v30, v86, v30, v11, v40, v94, v40, v42, v40, v84, v40, v93]"; 
hidden[3] = "[v4, v36, v59, v54, v3]"; 
path[3] = "[v44, v39, v83, v23, v4, v33, v4, v91, v4, v68, v26, v82, v26, v29, v34, v55, v85, v55, v11, v65, v3, v0, v36, v22, v2, v90, v43, v61, v43, v8, v53, v8, v15, v8, v60, v8, v99, v31, v35, v80, v11, v30, v86, v54, v10, v18, v51, v5, v17, v63, v17, v81, v17, v81, v17, v81, v17, v63, v17, v81, v17, v63, v17, v81, v17, v63, v17, v63, v17, v5, v25, v41, v25, v67, v64, v92, v64, v37, v50, v4, v46, v72, v46, v79, v46, v72, v46, v4, v71, v4, v28, v0, v62, v74, v62, v74, v62, v74, v62, v0, v16, v0, v49, v14, v77, v14, v97, v14, v77, v29, v26, v98, v26, v29, v5, v48, v5, v58, v5, v75, v5, v78, v5, v32, v5, v17, v5, v48, v5, v51, v5, v25, v95, v25, v0, v12, v11, v40, v94, v40, v42, v40, v84, v40, v93, v40, v94, v40, v93, v40, v42, v40, v42, v40, v11, v96, v11, v27, v11, v66, v11, v45, v11, v89, v11, v0, v13, v0, v7, v0, v47, v0, v24, v0, v6, v87, v6, v0, v88, v0, v21, v0, v19, v38, v2, v0, v1, v57, v1, v0, v59]"; 
hidden[4] = "[v84, v40, v42, v35, v2]"; 
path[4] = "[v33, v4, v91, v4, v68, v26, v82, v26, v29, v34, v55, v85, v55, v11, v65, v3, v0, v36, v22, v2, v90, v43, v61, v43, v8, v53, v39, v83, v23, v83, v21, v83, v21, v0, v62, v74, v62, v0, v16, v0, v49, v14, v77, v29, v18, v10, v54, v98, v54, v76, v54, v86, v30, v11, v40, v94, v40, v42, v40, v84, v40, v93, v40, v94, v40, v42, v40, v0, v78, v5, v17, v63, v17, v81, v17, v5, v25, v41, v25, v67, v64, v92, v64, v37, v50, v37, v50, v4, v46, v72, v46, v79, v4, v99, v31, v35]"; 
hidden[5] = "[v83, v23, v4, v0, v16]"; 
path[5] = "[v78, v0, v36, v22, v2, v90, v3, v65, v11, v30, v86, v54, v10, v18, v51, v5, v17, v63, v17, v81, v17, v63, v17, v5, v25, v41, v25, v67, v64, v92, v64, v37, v50, v4, v33, v4, v91, v4, v68, v26, v82, v26, v29, v34, v55, v85, v55, v34, v55, v34, v29, v77, v14, v49, v14, v97, v14, v49, v14, v49, v0, v62, v74, v62, v74, v62, v0, v16, v0, v12, v0, v13, v0, v7, v0, v40, v94, v40, v42, v40, v84, v40, v93, v40, v0, v47, v0, v24, v0, v6, v87, v6, v87, v6, v0, v88, v0, v35, v31, v99, v8, v53, v39, v83, v23]"; 
hidden[6] = "[v36, v4, v99, v60, v8]"; 
path[6] = "[v91, v4, v33, v4, v68, v26, v82, v26, v29, v34, v55, v85, v55, v11, v65, v3, v0, v36, v22, v2, v90, v43, v61, v43, v8, v53, v39, v83, v23, v83, v21, v83, v23, v4, v46, v72, v46, v79, v46, v79, v46, v72, v46, v79, v46, v4, v50, v37, v64, v92, v64, v67, v25, v5, v17, v63, v17, v81, v17, v81, v17, v5, v48, v5, v51, v18, v10, v54, v98, v54, v76, v54, v86, v30, v86, v30, v11, v40, v94, v40, v42, v40, v84, v40, v93, v40, v0, v62, v74, v62, v74, v62, v74, v62, v0, v16, v0, v49, v14, v77, v14, v97, v14, v77, v14, v77, v14, v77, v14, v49, v14, v49, v14, v3, v9, v3, v54, v76, v54, v10, v59, v0, v78, v5, v58, v5, v75, v5, v32, v5, v0, v12, v11, v96, v11, v80, v35, v31, v99, v4, v71, v4, v28, v0, v13, v0, v7, v0, v47, v0, v24, v0, v6, v87, v6, v87, v6, v87, v6, v0, v88, v0, v19, v38, v19, v38, v2, v22, v69, v22, v52, v56, v52, v22, v0, v1, v57, v1, v57, v1, v57, v1, v57, v1, v57, v1, v0, v20, v0, v7, v0, v7, v0, v20, v0, v19, v0, v22, v52, v22, v2, v35, v80, v44, v39, v44, v80, v44, v39, v53, v8, v15, v8, v60]"; 
hidden[7] = "[v50, v37, v67, v25, v35]"; 
path[7] = "[v17, v5, v25, v41, v25, v0, v36, v22, v2, v90, v3, v65, v11, v30, v86, v54, v10, v18, v51, v5, v48, v5, v58, v5, v75, v5, v78, v5, v8, v53, v39, v83, v23, v4, v33, v4, v91, v4, v68, v26, v82, v26, v29, v34, v55, v85, v55, v11, v40, v94, v40, v42, v40, v84, v40, v93, v40, v42, v40, v94, v40, v94, v40, v84, v40, v93, v40, v93, v40, v94, v40, v0, v62, v74, v62, v0, v16, v0, v49, v14, v77, v14, v97, v14, v97, v14, v3, v9, v3, v37, v64, v92, v64, v67, v25, v95, v25, v67, v64, v92, v64, v67, v64, v37, v50, v4, v46, v72, v46, v79, v46, v72, v46, v72, v46, v4, v99, v31, v35]"; 
hidden[8] = "[v49, v90, v55, v34, v4]"; 
path[8] = "[v28, v0, v36, v22, v2, v90, v3, v65, v11, v30, v86, v54, v10, v18, v51, v5, v17, v63, v17, v81, v17, v81, v17, v63, v17, v5, v25, v41, v25, v67, v64, v92, v64, v37, v50, v4, v33, v4, v91, v4, v68, v26, v82, v26, v29, v34, v55, v85, v55, v34, v4, v46, v72, v46, v79, v46, v72, v46, v72, v46, v79, v4, v23, v83, v39, v44, v80, v35, v31, v99, v8, v53, v8, v15, v8, v60, v8, v73, v8, v43, v61, v43, v90, v3, v14, v49]"; 
hidden[9] = "[v50, v4, v71, v79, v46]"; 
path[9] = "[v6, v0, v36, v22, v2, v90, v3, v65, v11, v30, v86, v54, v10, v18, v51, v5, v17, v63, v17, v81, v17, v81, v17, v63, v17, v5, v25, v41, v25, v67, v64, v92, v64, v37, v50, v4, v33, v4, v91, v4, v68, v26, v82, v26, v29, v34, v55, v85, v55, v85, v55, v85, v55, v85, v55, v11, v40, v94, v40, v42, v40, v84, v40, v93, v40, v94, v40, v42, v40, v42, v40, v42, v40, v94, v40, v0, v62, v74, v62, v74, v62, v0, v16, v0, v49, v14, v77, v29, v34, v4, v46, v72, v46, v79, v46, v79, v4, v23, v83, v39, v44, v80, v35, v31, v99, v8, v53, v8, v15, v8, v60, v8, v73, v8, v43, v61, v43, v61, v43, v8, v54, v98, v26, v4, v71]"; 
var step, play;

function showGraph() {
    
	var width = $(document).width();
	
    var height = $(document).height() - 100;

    var g = new Graph();
	
	var graph = graphNodes.split(",");
	
	var hiddenItems = hidden[$('#round-to-play').val()].substring(0, hidden[$('#round-to-play').val()].length - 1).split(",");
	
	for (var k = 0; k < hiddenItems.length; k++) {
		
		hiddenItems[k] = hiddenItems[k].substring(1, hiddenItems[k].length);
		
		g.addNode(hiddenItems[k], { label : hiddenItems[k] + " HIDE" });
	
		$('#hidden').append(hiddenItems[k] + " ");
	
	}
	
	for (var i = 0; i < graph.length; i++) {
		
		g.addEdge(graph[i].substring(graph[i].indexOf("(") + 1, graph[i].indexOf(":") - 1), graph[i].substring(graph[i].indexOf(":") + 2, graph[i].indexOf(")")));
		 
	}
	
	var layouter = new Graph.Layout.Spring(g);
	
	var searchPath = path[$('#round-to-play').val()].substring(0, path[$('#round-to-play').val()].length - 1).split(",");
	
	var renderer = new Graph.Renderer.Raphael('canvas', g, width, height);
	
	step = function() {
		
		drawPath(hiddenItems, searchPath, g, renderer);
		
		searchPath.splice(0,1);
		
	}
	
	play = function() {
		
		setInterval(function(){step()},1000);
		
	}
		
	step();
	
};

function drawPath(hiddenItems, searchPath, g, renderer) {
	
	
	for (var j = 1; j < searchPath.length; j++) {
		
	
		 /* colourising the shortest paths and setting labels */
		for(e in g.edges) {
			
			if((searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].source.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].target.id) ||
			   (searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].target.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].source.id)) {
			
				$('#output').html(searchPath[j-1].substring(1,searchPath[j-1].length) + " to " + searchPath[j].substring(1,searchPath[j].length));
				
				for (var l = 0; l < hiddenItems.length; l++) {
				
					if ( hiddenItems[l] == g.edges[e].source.id || hiddenItems[l] == g.edges[e].target.id ) {
						
						//alert(hiddenItems[l] + " " + g.edges[e].source.id);
						//alert(hiddenItems[l] + " " + g.edges[e].target.id);
						hiddenItems.splice(l, 1);
						$('#hidden').html("Hidden Items: ");
						
						for (var o = 0; o < hiddenItems.length; o++) {
		
							//alert(hiddenItems);
							
							$('#hidden').append(hiddenItems[o] + " ");
						
						}
	
					}
					
				}
				
				g.edges[e].style.stroke = "#00c8a1";
				g.edges[e].style.fill = "#00c8a1";
				
				renderer.draw();
				return;
				
			} else {
				
				g.edges[e].style.stroke = "#fff";
			
			}
			
		}
		
	}

}

function getRandomColor() {
	
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++ ) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
	
}
