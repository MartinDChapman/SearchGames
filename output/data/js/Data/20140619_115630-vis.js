var graphNodes = "[(v3 : v56) 6.647856593615477, (v88 : v57) 8.250014773664635, (v26 : v22) 3.479139188110163, (v81 : v15) 9.043355561314213, (v68 : v79) 2.4722303726889736, (v2 : v23) 7.539115320444338, (v27 : v51) 1.7864170614799946, (v63 : v30) 4.8854117249851186, (v32 : v6) 5.055950201999019, (v25 : v19) 2.4897586049420117, (v11 : v48) 1.5951931908844474, (v39 : v70) 4.416973391378595, (v61 : v87) 3.59696327644756, (v57 : v24) 2.592347662174882, (v7 : v5) 2.800497062414432, (v74 : v17) 9.489520557127271, (v13 : v1) 2.321449186205159, (v57 : v90) 3.5705942231845746, (v76 : v35) 6.654482313299744, (v28 : v67) 5.624805827438504, (v45 : v8) 4.757855760377236, (v42 : v80) 4.565609265254191, (v94 : v37) 3.243708422840167, (v52 : v88) 5.844762035926089, (v78 : v19) 2.318502931676214, (v84 : v35) 4.982556205644509, (v88 : v37) 9.692597321977082, (v13 : v4) 9.758608291463428, (v44 : v28) 3.309661040631835, (v16 : v66) 3.2267306997312426, (v3 : v99) 3.6954220464235332, (v92 : v27) 3.185775780515274, (v9 : v89) 9.907033659749203, (v41 : v57) 3.2375812600282883, (v29 : v25) 8.551446254981178, (v91 : v83) 3.681174287350345, (v98 : v12) 4.862082684436145, (v81 : v49) 3.7233132495081547, (v54 : v57) 5.262606181525367, (v82 : v35) 7.729700568497167, (v9 : v18) 6.745657891022921, (v74 : v45) 9.305370222386948, (v84 : v52) 4.45038401107951, (v59 : v97) 6.089791409973532, (v53 : v16) 2.3888993850593856, (v67 : v94) 2.4012207059807555, (v28 : v13) 5.858292675679445, (v34 : v9) 4.791205086898374, (v83 : v30) 7.847405565119043, (v10 : v4) 9.605522607487812, (v34 : v93) 6.028656984815149, (v87 : v66) 0.6301124369981181, (v29 : v94) 4.693169222057913, (v76 : v14) 6.573875247340865, (v3 : v54) 5.377138861444243, (v68 : v20) 1.654964540041508, (v21 : v25) 6.729800446647971, (v61 : v54) 0.9700111459311078, (v4 : v14) 4.335723592549529, (v69 : v73) 5.099501906235295, (v4 : v90) 3.3300760866488064, (v51 : v10) 3.9064228447734326, (v10 : v20) 4.4946472040093335, (v46 : v16) 7.494645994429035, (v93 : v88) 9.51086205717592, (v20 : v7) 6.490053199703308, (v13 : v48) 4.74601231694235, (v60 : v63) 4.278926218162362, (v86 : v89) 9.588978903166366, (v65 : v72) 9.578828607639693, (v57 : v19) 4.316603686097816, (v42 : v26) 9.127464036883664, (v66 : v97) 0.8025932845446115, (v43 : v4) 1.6614449258087216, (v92 : v55) 4.274681765809278, (v70 : v74) 6.4324429725197145, (v91 : v88) 5.6362287851547705, (v61 : v70) 1.891965050187887, (v8 : v11) 6.605298923191257, (v87 : v48) 3.893373425837412, (v12 : v23) 6.753517411112977, (v27 : v82) 2.742420667606642, (v46 : v3) 5.270943851283988, (v14 : v47) 6.013358100148581, (v35 : v63) 6.420314235508276, (v36 : v14) 9.480757193655602, (v45 : v89) 6.8090944002288385, (v54 : v32) 3.4479533829737887, (v20 : v80) 3.0918235713715756, (v4 : v30) 1.7380978555600857, (v45 : v77) 8.96551287159168, (v54 : v74) 7.616107318545539, (v81 : v30) 1.4408982626135147, (v29 : v69) 5.798444133543993, (v82 : v12) 4.621895364115586, (v84 : v77) 4.7580548989810465, (v29 : v34) 8.520685051051428, (v96 : v85) 4.925572057691819, (v36 : v53) 4.848742718947695, (v1 : v30) 8.712931291861402, (v58 : v57) 7.983310576643311, (v2 : v19) 9.036022401538263, (v30 : v58) 9.299092986708807, (v92 : v21) 7.0892663711731725, (v93 : v18) 6.317314877101786, (v44 : v40) 4.333724324098876, (v93 : v48) 4.356015964463873, (v40 : v21) 1.2144003532683212, (v75 : v52) 9.920054640137245, (v85 : v40) 8.140932912523036, (v59 : v98) 9.456540089332435, (v11 : v39) 6.27426529595207, (v43 : v26) 9.487316777665034, (v25 : v22) 4.091801815036748, (v54 : v73) 9.836945478954304, (v39 : v75) 4.392856158765897, (v72 : v53) 8.680894897686771, (v78 : v18) 8.09905198328962, (v88 : v63) 9.579120733808415, (v19 : v13) 0.05111409058244032, (v29 : v93) 7.325899016161294, (v48 : v16) 6.060836911662491, (v65 : v68) 2.2849528620637836, (v74 : v76) 4.207829483111427, (v55 : v19) 5.493086119528456, (v26 : v86) 0.1440520131798595, (v46 : v28) 7.965476853467721, (v4 : v88) 0.7605665006541185, (v19 : v84) 3.737508806081884, (v19 : v24) 1.661964085314428, (v76 : v63) 3.803784711139675, (v94 : v51) 6.572499515288315, (v95 : v72) 6.4933048939509606, (v84 : v20) 5.058192387769449, (v19 : v33) 3.3354549858450055, (v93 : v99) 4.191444232325275, (v38 : v59) 0.16545324598229771, (v71 : v8) 9.315699798923438, (v63 : v20) 3.2875298846833454, (v69 : v36) 4.600254385738413, (v72 : v6) 4.812850493231546, (v2 : v4) 0.22860314109730995, (v45 : v0) 9.826835311943954, (v85 : v18) 5.8631479560412645, (v92 : v74) 8.483068132058333, (v93 : v95) 9.406246281055497, (v69 : v54) 6.290700803458689, (v26 : v51) 2.3704168671620263, (v35 : v61) 6.237671944258043, (v83 : v7) 3.623124247223879, (v90 : v49) 2.6079056912483214, (v45 : v40) 8.534363736432859, (v94 : v42) 1.6979966389883294, (v69 : v89) 1.1848827325468991, (v21 : v48) 2.5649403794719614, (v82 : v31) 0.25219937695385775, (v4 : v82) 7.54478890108113, (v36 : v67) 0.34976419421206106, (v18 : v69) 8.832441332743825, (v81 : v94) 7.227030003664096, (v99 : v56) 2.8211416851167237, (v57 : v72) 8.526505476784052, (v1 : v8) 7.238917094359781, (v9 : v70) 9.325946188108391, (v56 : v21) 9.116665758256044, (v16 : v60) 9.963837954598812, (v27 : v5) 1.1636567399335462, (v36 : v45) 0.5546235132303035, (v39 : v64) 4.751852259028366, (v23 : v32) 3.95337979402546, (v74 : v60) 4.117971531033087, (v80 : v87) 4.940730329424231, (v58 : v59) 5.935102057364427, (v26 : v35) 5.186848377980158, (v10 : v8) 3.5936876643856297, (v93 : v4) 9.643830825086818, (v3 : v97) 6.530909088210727, (v22 : v92) 2.840167111486119, (v34 : v17) 2.0800763585732476, (v19 : v80) 1.9473644974512117, (v61 : v0) 3.5562025743831214, (v25 : v70) 5.201174025504055, (v31 : v54) 1.7851687372203995, (v84 : v43) 8.43866576076573, (v70 : v35) 3.812869256301167, (v73 : v40) 2.2142884269368057, (v36 : v26) 8.044672254664253, (v2 : v69) 6.645890555283371, (v46 : v42) 8.167988873691945, (v34 : v26) 9.184624268144237, (v94 : v38) 2.6614684618834437, (v67 : v10) 1.6760946754953976, (v67 : v8) 3.9093356711570615, (v78 : v46) 1.065687115997851, (v23 : v87) 2.490941393028152, (v95 : v6) 2.9866076111938424, (v25 : v63) 2.33221444978853, (v42 : v87) 8.248925488113308, (v84 : v4) 0.4721437358388936, (v29 : v77) 9.322233952787785, (v9 : v76) 8.254709276612406, (v60 : v49) 1.5800537145133953, (v77 : v62) 6.0020840348857085, (v39 : v84) 3.063703475732188, (v99 : v6) 0.51194770119387, (v44 : v2) 6.446199726828876, (v81 : v65) 9.06017580804685, (v77 : v21) 8.75818208004899, (v73 : v3) 7.645991027745788, (v69 : v75) 3.2095751556334795, (v37 : v41) 7.812156350136565, (v3 : v95) 4.440551501936991, (v60 : v30) 0.9864821009018487, (v10 : v12) 4.007501183412932, (v39 : v38) 2.5575531926204773, (v57 : v51) 8.504545422765805, (v96 : v70) 8.108193832203328, (v19 : v62) 3.9952717235422233, (v33 : v83) 9.832035230798304, (v99 : v23) 9.345733956499732, (v37 : v40) 3.2551402665479587, (v73 : v24) 8.477467511295677, (v43 : v50) 9.235758602649302, (v58 : v76) 9.773725345735919, (v94 : v73) 7.736926932547315, (v51 : v31) 6.054981595756215, (v92 : v30) 2.131072022194791, (v22 : v45) 3.2788566832475663, (v66 : v20) 2.531530028051808, (v52 : v1) 1.9091543716420678, (v87 : v13) 5.737728628333915, (v83 : v84) 4.63902557537714, (v39 : v8) 7.369715688888972, (v27 : v78) 4.651058843634611, (v67 : v83) 8.35099624056742, (v0 : v65) 3.0652147911707672, (v4 : v71) 5.429818227333144, (v72 : v48) 4.7831129478871235, (v13 : v98) 1.417844042982488, (v45 : v25) 2.109643204752343, (v41 : v82) 0.4376199073283049, (v38 : v24) 2.7518455825888957, (v18 : v0) 2.028633214256421, (v31 : v40) 6.898374947926273, (v89 : v79) 3.444583700617253, (v10 : v17) 9.814771355011832, (v62 : v26) 5.016514767148481, (v70 : v32) 5.9006058861300135, (v63 : v2) 9.848711363779518, (v80 : v38) 5.500980639860932, (v16 : v36) 7.303998132736132, (v69 : v31) 1.409734085548906, (v43 : v20) 3.3258110801101393, (v27 : v64) 1.314185980839201, (v7 : v18) 8.395922515360617, (v53 : v37) 0.18671943228094068, (v3 : v70) 2.2549758293732958, (v26 : v93) 1.5086075920256548, (v9 : v29) 9.990327683936599, (v28 : v59) 3.3041186836914225, (v16 : v10) 5.950590069308992, (v46 : v93) 8.262223171441695, (v51 : v91) 4.563483889125774, (v13 : v64) 2.129583379441936, (v47 : v4) 2.5541976393112242, (v11 : v76) 0.3785455086624634, (v69 : v30) 7.482613477768936, (v90 : v40) 5.600486299770094, (v62 : v86) 7.7930786249787065, (v61 : v45) 1.7672333491318326, (v84 : v75) 9.70959343888298, (v87 : v83) 2.466744917129031, (v90 : v65) 3.9783962091830083, (v49 : v73) 8.385482646648498, (v51 : v30) 8.481198957827452, (v65 : v8) 1.0167923937498768, (v4 : v46) 1.5942992449141125, (v46 : v80) 0.06628147690009412, (v60 : v26) 1.4862143014665796, (v53 : v23) 7.952043447818813, (v85 : v41) 1.6203687408256318, (v93 : v15) 6.716259039221056, (v35 : v32) 6.007000646424711, (v87 : v50) 7.538084787498129, (v18 : v61) 5.333323292745803, (v17 : v13) 6.734994989196455, (v49 : v51) 8.252874073111576, (v3 : v68) 1.9362204285112683, (v49 : v79) 9.749908447229306, (v6 : v53) 9.189296808651996, (v95 : v77) 9.684920863856345, (v35 : v67) 3.7068870928074227, (v43 : v33) 1.1014108452756821, (v92 : v13) 0.2700940714951172, (v77 : v76) 6.516630916856028, (v2 : v20) 1.8768442985012235, (v96 : v28) 5.771257381446753, (v29 : v47) 8.8662425820595, (v62 : v65) 5.772008371209277, (v65 : v9) 3.674937098800858]"; 
 var hidden = new Array(); 
 var path = new Array(); 
hidden[0] = "[v26, v36, v79, v73, v13]"; 
path[0] = "[v7, v5, v27, v64, v13, v19, v24, v57, v41, v82, v31, v69, v89, v79, v68, v20, v2, v4, v84, v39, v38, v59, v28, v44, v40, v21, v48, v11, v76, v63, v25, v45, v36, v67, v10, v8, v65, v0, v18, v61, v54, v32, v23, v87, v66, v97, v3, v70, v35, v26, v86, v62, v77, v29, v94, v42, v80, v46, v78, v18, v85, v96, v28, v46, v16, v53, v37, v88, v91, v83, v30, v60, v49, v90, v4, v43, v33, v83, v7, v20, v66, v20, v10, v51, v26, v93, v99, v6, v95, v72, v6, v53, v72, v57, v58, v57, v54, v74, v92, v22, v45, v36, v14, v47, v14, v36, v53, v23, v12, v98, v13, v1, v52, v75, v69, v73]"; 
var step, play;

function showGraph() {
    
	var width = $(document).width();
	
    var height = $(document).height() - 100;

    var g = new Graph();
	
	var graph = graphNodes.split(",");
	
	var hiddenItems = hidden[$('#round-to-play').val()].substring(0, hidden[$('#round-to-play').val()].length - 1).split(",");
	
	for (var k = 0; k < hiddenItems.length; k++) {
		
		hiddenItems[k] = hiddenItems[k].substring(1, hiddenItems[k].length);
		
		g.addNode(hiddenItems[k], { label : hiddenItems[k] + " HIDE" });
	
		$('#hidden').append(hiddenItems[k] + " ");
	
	}
	
	for (var i = 0; i < graph.length; i++) {
		
		g.addEdge(graph[i].substring(graph[i].indexOf("(") + 1, graph[i].indexOf(":") - 1), graph[i].substring(graph[i].indexOf(":") + 2, graph[i].indexOf(")")));
		 
	}
	
	var layouter = new Graph.Layout.Spring(g);
	
	var searchPath = path[$('#round-to-play').val()].substring(0, path[$('#round-to-play').val()].length - 1).split(",");
	
	var renderer = new Graph.Renderer.Raphael('canvas', g, width, height);
	
	step = function() {
		
		drawPath(hiddenItems, searchPath, g, renderer);
		
		searchPath.splice(0,1);
		
	}
	
	play = function() {
		
		setInterval(function(){step()},1000);
		
	}
		
	step();
	
};

function drawPath(hiddenItems, searchPath, g, renderer) {
	
	
	for (var j = 1; j < searchPath.length; j++) {
		
	
		 /* colourising the shortest paths and setting labels */
		for(e in g.edges) {
			
			if((searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].source.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].target.id) ||
			   (searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].target.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].source.id)) {
			
				$('#output').html(searchPath[j-1].substring(1,searchPath[j-1].length) + " to " + searchPath[j].substring(1,searchPath[j].length));
				
				for (var l = 0; l < hiddenItems.length; l++) {
				
					if ( hiddenItems[l] == g.edges[e].source.id || hiddenItems[l] == g.edges[e].target.id ) {
						
						//alert(hiddenItems[l] + " " + g.edges[e].source.id);
						//alert(hiddenItems[l] + " " + g.edges[e].target.id);
						hiddenItems.splice(l, 1);
						$('#hidden').html("Hidden Items: ");
						
						for (var o = 0; o < hiddenItems.length; o++) {
		
							//alert(hiddenItems);
							
							$('#hidden').append(hiddenItems[o] + " ");
						
						}
	
					}
					
				}
				
				g.edges[e].style.stroke = "#00c8a1";
				g.edges[e].style.fill = "#00c8a1";
				
				renderer.draw();
				return;
				
			} else {
				
				g.edges[e].style.stroke = "#fff";
			
			}
			
		}
		
	}

}

function getRandomColor() {
	
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++ ) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
	
}
