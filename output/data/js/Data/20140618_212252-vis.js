var graphNodes = "[(v71 : v77) 5.554436214506952, (v67 : v61) 5.048395504115511, (v24 : v47) 8.762307894450787, (v22 : v62) 1.1881743233543751, (v31 : v28) 3.398064169454409, (v63 : v61) 0.053155308445587135, (v78 : v34) 5.430816930964363, (v12 : v64) 5.015455310547806, (v57 : v92) 1.9512252944699149, (v19 : v66) 8.70536373703062, (v16 : v9) 7.704370773109652, (v66 : v38) 2.5592242011500224, (v95 : v88) 0.7175088078727498, (v37 : v68) 0.14670856921592534, (v1 : v17) 3.4555733303080274, (v38 : v60) 2.8999488674721583, (v50 : v47) 3.3549555821658505, (v34 : v28) 4.87940641694755, (v89 : v94) 9.707451575852431, (v96 : v0) 1.6785089103429418, (v3 : v77) 8.794902347156988, (v4 : v18) 3.3600730088489428, (v38 : v40) 7.170692011036648, (v79 : v41) 9.707768793111434, (v75 : v96) 2.9629468891454023, (v74 : v97) 9.246998533798848, (v15 : v55) 6.108249737218342, (v73 : v24) 9.02946071448735, (v65 : v35) 2.2424761932602797, (v85 : v60) 6.57847815044769, (v89 : v27) 8.461715771772328, (v21 : v2) 6.558278459026706, (v4 : v1) 6.862216329946738, (v38 : v56) 4.4664877149718185, (v84 : v0) 8.371095798620004, (v2 : v95) 6.167982623041338, (v55 : v86) 2.242775069921464, (v1 : v16) 2.509133519164346, (v77 : v23) 8.22941903587087, (v63 : v27) 1.0997064024045544, (v58 : v56) 9.003167645592981, (v73 : v27) 5.056948772197307, (v75 : v26) 0.23586275934957102, (v15 : v69) 9.910536401676357, (v36 : v44) 7.806829945961847, (v26 : v61) 2.7122451420056883, (v47 : v72) 4.045837896756812, (v4 : v55) 0.8308419665269928, (v57 : v22) 3.5176382928950622, (v41 : v25) 4.997375608853705, (v33 : v26) 9.563756503677986, (v60 : v39) 1.361710445344505, (v87 : v24) 4.2399721405109485, (v71 : v83) 8.996897905122465, (v34 : v71) 0.18395812990407379, (v49 : v20) 2.2192392870980338, (v75 : v11) 4.732871244878999, (v48 : v23) 4.960272296761232, (v58 : v76) 5.857542759189462, (v82 : v93) 7.320326613029973, (v38 : v15) 0.4168528133919014, (v64 : v8) 1.3458701411383323, (v5 : v72) 7.247623488108104, (v97 : v84) 4.4049922437525915, (v86 : v66) 7.732972226421937, (v53 : v78) 8.593704870771248, (v44 : v12) 1.9327749332801947, (v83 : v24) 4.103149481700704, (v56 : v41) 8.967227167766925, (v65 : v4) 3.033441491908917, (v46 : v83) 1.1282241007508842, (v13 : v6) 8.779144225419229, (v6 : v86) 4.819413742480517, (v61 : v87) 9.765880940137869, (v8 : v92) 0.7165870629917426, (v71 : v92) 6.325261067194319, (v18 : v48) 5.974070328988358, (v76 : v94) 6.100255427377691, (v66 : v33) 3.5147328816401133, (v74 : v38) 8.225793615228925, (v6 : v4) 5.7221496777339, (v25 : v22) 5.186312182971521, (v5 : v69) 0.6506104881610586, (v89 : v7) 5.676162457897589, (v81 : v27) 9.285581768064088, (v5 : v80) 2.8493008186804714, (v31 : v20) 8.68364581731621, (v29 : v11) 2.3169571300078164, (v0 : v64) 1.9129035386586013, (v68 : v36) 9.317628536395269, (v80 : v74) 5.674581090760755, (v90 : v52) 7.230666824563857, (v17 : v98) 7.042646649293185, (v52 : v87) 1.5270734246245876, (v81 : v59) 3.7953939659026625, (v2 : v9) 7.2492572099583015, (v97 : v70) 7.87219165816584, (v99 : v19) 0.9921044386157452, (v56 : v8) 8.267196678987126, (v71 : v82) 3.333642793436067, (v72 : v51) 0.523311790044424, (v64 : v94) 6.853981168153908, (v16 : v99) 2.4237874342359134, (v81 : v52) 1.8114891115613796, (v29 : v8) 4.661643465243098, (v83 : v7) 3.646958410443114, (v82 : v3) 6.520786516092092, (v95 : v82) 7.597675551746241, (v81 : v89) 7.9058414084838615, (v1 : v15) 8.56805503050121, (v20 : v92) 3.545053873438074, (v53 : v19) 3.1721384441587395, (v34 : v29) 3.653183492491845, (v44 : v81) 3.5924896852331956, (v55 : v12) 8.72635965056814, (v5 : v32) 4.052702661102297, (v77 : v8) 8.051915488124754, (v21 : v9) 3.646027427982357, (v26 : v19) 0.7130333252905974, (v40 : v80) 8.77590443071846, (v66 : v40) 0.7666349143231377, (v47 : v34) 3.2271156334777573, (v27 : v82) 1.4455896518399214, (v41 : v23) 8.986692767396928, (v19 : v42) 5.9115300490473155, (v74 : v85) 0.36584205980213946, (v16 : v8) 8.647095014310233, (v73 : v13) 3.138296578504798, (v6 : v38) 4.067309363208881, (v2 : v57) 8.613368997150321, (v80 : v91) 9.54630009839155, (v65 : v32) 5.516424108243609, (v1 : v5) 3.651166103469321, (v61 : v86) 4.874657166332014, (v83 : v36) 6.959333671054467, (v88 : v96) 0.8273629458823195, (v13 : v2) 0.07514453038397151, (v93 : v41) 3.3289209897134864, (v21 : v44) 9.178015202511617, (v86 : v52) 3.4274297399757723, (v70 : v35) 4.106786212986018, (v99 : v23) 3.426402535445141, (v38 : v37) 3.2476128442029095, (v97 : v81) 9.421617169434274, (v62 : v75) 6.636951243659067, (v33 : v59) 3.0066914375634846, (v51 : v50) 7.164135075707595, (v67 : v25) 9.322170483033528, (v53 : v7) 5.663224158561651, (v5 : v66) 5.952957486281173, (v28 : v92) 0.2810139045289206, (v72 : v87) 8.733222214107988, (v14 : v88) 2.713334136442432, (v34 : v65) 7.478106877917372, (v63 : v9) 2.787299795454221, (v2 : v20) 4.615497068850142, (v36 : v64) 0.16152686410849104, (v55 : v97) 9.133006815264903, (v91 : v89) 4.5042558886279735, (v52 : v95) 5.085497191003342, (v84 : v6) 7.931848420194444, (v86 : v57) 9.933572333772709, (v34 : v51) 0.4445049810771695, (v81 : v10) 1.4164642006961925, (v66 : v54) 7.9358146062762955, (v83 : v37) 9.62264215726868, (v88 : v26) 5.587646599150551, (v70 : v33) 1.9338052800229166, (v9 : v1) 7.25795232955906, (v17 : v72) 5.014216563358065, (v54 : v61) 4.14852983568696, (v31 : v39) 8.835561960401314, (v7 : v18) 6.581219470851978, (v28 : v32) 0.6117674603762002, (v11 : v2) 9.249129140830613, (v48 : v0) 0.6188918587146675, (v23 : v14) 8.63532229725, (v90 : v33) 0.24897359897776195, (v86 : v18) 7.352241926586364, (v90 : v8) 4.75642243053409, (v21 : v15) 2.5544656297008017, (v87 : v89) 7.370372972399548, (v80 : v87) 8.074985277632923, (v73 : v32) 7.54172752176448, (v22 : v89) 3.9470890123256073, (v10 : v5) 7.75106536455819, (v33 : v89) 4.07234062964169, (v61 : v72) 0.6110674855006115, (v98 : v35) 7.208652814259194, (v4 : v34) 9.948740833449689, (v84 : v56) 7.565758821734767, (v2 : v16) 6.548925166975242, (v15 : v16) 6.149560301343083, (v14 : v5) 5.587945430084297, (v88 : v72) 9.78910060431479, (v61 : v95) 9.197759122915178, (v13 : v30) 1.3638090182021045, (v56 : v51) 3.6956427239044896, (v52 : v54) 7.13396081219439, (v35 : v38) 7.8177888869278425, (v9 : v48) 7.929991593729237, (v86 : v93) 0.7387654884839023, (v28 : v1) 3.0986795345261675, (v71 : v9) 8.080514190884307, (v12 : v85) 5.014768664394355, (v39 : v32) 0.7585930346035752, (v71 : v86) 8.280120066550728, (v82 : v60) 7.030061532480747, (v79 : v90) 9.739965216992692, (v58 : v53) 8.053432287246498, (v66 : v94) 1.5945515765518403, (v96 : v63) 3.6093474902607294, (v21 : v59) 1.2779454724986128, (v11 : v30) 8.23022151038694, (v11 : v4) 4.673740788700945, (v14 : v73) 1.123427718728084, (v66 : v26) 7.5559454670965875, (v16 : v87) 2.127311012398697, (v60 : v52) 7.954629482525598, (v90 : v25) 3.1003041389331045, (v97 : v50) 6.178557081913267, (v2 : v45) 1.1048251830221267, (v63 : v60) 1.3657288046435845, (v40 : v43) 9.409841300241256, (v74 : v69) 3.218565707727695, (v31 : v26) 1.5056409944778548, (v50 : v11) 4.710637362289983, (v1 : v39) 5.214345251713878, (v64 : v26) 8.379868952779304, (v99 : v26) 0.709164513212398, (v70 : v60) 2.858851313183509, (v56 : v54) 1.349735650835947, (v98 : v11) 2.702215561368091, (v37 : v3) 7.131727706247282, (v9 : v51) 8.676297126673443, (v61 : v12) 1.0741478973968543, (v57 : v1) 5.456014227200443, (v61 : v55) 1.7715642282829325, (v0 : v51) 2.262791797692251, (v70 : v25) 4.77117810059152, (v4 : v22) 0.16648839471303245, (v49 : v97) 9.452969396708136, (v18 : v64) 8.510890947465988, (v75 : v39) 1.1578831630295094, (v57 : v68) 5.809957445944645, (v68 : v27) 3.793383253696855, (v94 : v33) 6.260360292154148, (v83 : v51) 0.8230372216716975, (v80 : v9) 8.141050083289592, (v91 : v29) 1.0987844918198253, (v48 : v80) 1.3947621066185711, (v8 : v45) 5.509033957523819, (v66 : v57) 7.838162006520932, (v65 : v99) 4.886914597527144, (v62 : v79) 3.111424745411251, (v2 : v44) 4.451217684656803, (v73 : v38) 6.695494994766761, (v47 : v14) 4.544500267152342, (v16 : v14) 7.293316942467546, (v86 : v76) 7.301315267063576, (v32 : v22) 0.44352292490611345, (v87 : v75) 8.743778468449158, (v17 : v26) 3.4211249434360456, (v93 : v54) 1.6870310044074244, (v26 : v83) 6.945748313166447, (v2 : v7) 6.675267060237244, (v12 : v88) 1.7860895949571554, (v3 : v15) 2.2977600590538927, (v73 : v49) 1.4981305237623899, (v51 : v57) 7.897872243094617, (v52 : v45) 5.898928847586311, (v98 : v33) 7.536761889058758, (v91 : v45) 6.748579525878954, (v41 : v95) 4.664056814207145, (v28 : v42) 0.9374344183297989, (v26 : v53) 9.243031684425695, (v65 : v45) 3.357424895786939, (v13 : v61) 8.946936316500857, (v72 : v36) 2.8351000357343614, (v53 : v2) 0.7614927742184563, (v8 : v37) 8.935789101418827, (v64 : v22) 0.07781431830976682, (v90 : v64) 4.185404261484141, (v50 : v0) 8.728027390651233, (v83 : v20) 7.027303859308, (v31 : v50) 7.896802804257479, (v65 : v23) 2.521130814312734, (v64 : v84) 4.336251694891066, (v18 : v88) 4.939629380028551, (v70 : v75) 0.625818521276108, (v8 : v85) 3.7253829862436874, (v73 : v86) 0.5658340188008371, (v23 : v36) 9.085748203576255, (v13 : v98) 6.292386204589974, (v4 : v48) 8.340710358720845, (v46 : v57) 2.8775413833361076, (v81 : v83) 9.161023865734322, (v92 : v4) 1.4643178872862062, (v62 : v96) 1.365028561090742, (v96 : v28) 2.2180978892937153]"; 
 var hidden = new Array(); 
 var path = new Array(); 
hidden[0] = "[v67, v61, v72, v4, v92]"; 
path[0] = "[v75, v26, v99, v19, v53, v2, v13, v30, v11, v29, v91, v89, v22, v64, v36, v72, v51, v34, v71, v82, v27, v63, v61, v12, v88, v95, v41, v93, v86, v73, v14, v47, v50, v97, v84, v56, v54, v52, v87, v16, v1, v28, v92, v8, v85, v74, v69, v5, v80, v48, v0, v96, v62, v79, v90, v33, v70, v60, v39, v32, v65, v35, v98, v17, v26, v31, v20, v49, v97, v55, v4, v18, v7, v83, v46, v57, v68, v37, v38, v15, v3, v77, v23, v41, v25, v67]"; 
var step, play;

function showGraph() {
    
	var width = $(document).width();
	
    var height = $(document).height() - 100;

    var g = new Graph();
	
	var graph = graphNodes.split(",");
	
	var hiddenItems = hidden[$('#round-to-play').val()].substring(0, hidden[$('#round-to-play').val()].length - 1).split(",");
	
	for (var k = 0; k < hiddenItems.length; k++) {
		
		hiddenItems[k] = hiddenItems[k].substring(1, hiddenItems[k].length);
		
		g.addNode(hiddenItems[k], { label : hiddenItems[k] + " HIDE" });
	
		$('#hidden').append(hiddenItems[k] + " ");
	
	}
	
	for (var i = 0; i < graph.length; i++) {
		
		g.addEdge(graph[i].substring(graph[i].indexOf("(") + 1, graph[i].indexOf(":") - 1), graph[i].substring(graph[i].indexOf(":") + 2, graph[i].indexOf(")")));
		 
	}
	
	var layouter = new Graph.Layout.Spring(g);
	
	var searchPath = path[$('#round-to-play').val()].substring(0, path[$('#round-to-play').val()].length - 1).split(",");
	
	var renderer = new Graph.Renderer.Raphael('canvas', g, width, height);
	
	step = function() {
		
		drawPath(hiddenItems, searchPath, g, renderer);
		
		searchPath.splice(0,1);
		
	}
	
	play = function() {
		
		setInterval(function(){step()},1000);
		
	}
		
	step();
	
};

function drawPath(hiddenItems, searchPath, g, renderer) {
	
	
	for (var j = 1; j < searchPath.length; j++) {
		
	
		 /* colourising the shortest paths and setting labels */
		for(e in g.edges) {
			
			if((searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].source.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].target.id) ||
			   (searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].target.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].source.id)) {
			
				$('#output').html(searchPath[j-1].substring(1,searchPath[j-1].length) + " to " + searchPath[j].substring(1,searchPath[j].length));
				
				for (var l = 0; l < hiddenItems.length; l++) {
				
					if ( hiddenItems[l] == g.edges[e].source.id || hiddenItems[l] == g.edges[e].target.id ) {
						
						//alert(hiddenItems[l] + " " + g.edges[e].source.id);
						//alert(hiddenItems[l] + " " + g.edges[e].target.id);
						hiddenItems.splice(l, 1);
						$('#hidden').html("Hidden Items: ");
						
						for (var o = 0; o < hiddenItems.length; o++) {
		
							//alert(hiddenItems);
							
							$('#hidden').append(hiddenItems[o] + " ");
						
						}
	
					}
					
				}
				
				g.edges[e].style.stroke = "#00c8a1";
				g.edges[e].style.fill = "#00c8a1";
				
				renderer.draw();
				return;
				
			} else {
				
				g.edges[e].style.stroke = "#fff";
			
			}
			
		}
		
	}

}

function getRandomColor() {
	
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++ ) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
	
}
