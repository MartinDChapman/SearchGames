var graphNodes = "[(v86 : v9) 0.8329976357669666, (v9 : v61) 8.912586405699287, (v50 : v74) 3.9074954698767908, (v49 : v98) 1.58424050058107, (v78 : v14) 3.526830422746441, (v16 : v4) 3.934899744122131, (v64 : v37) 7.6445157254985, (v0 : v2) 1.5558739035803049, (v33 : v3) 5.353806750668925, (v28 : v23) 8.410298086797333, (v8 : v54) 6.907871595253225, (v91 : v20) 0.025129484404146085, (v18 : v86) 0.9228369899138611, (v5 : v83) 4.975711062538678, (v7 : v52) 4.702198713806414, (v57 : v95) 5.749955718339532, (v15 : v27) 9.691077913570952, (v99 : v21) 6.587733018655704, (v25 : v43) 9.280020856544194, (v13 : v82) 3.791769321038987, (v25 : v97) 1.6340131282849535, (v41 : v76) 4.168464990067538, (v34 : v61) 2.1828610949145077, (v54 : v59) 1.955855505424119, (v34 : v99) 2.7901204037066463, (v60 : v80) 0.013160214821742455, (v39 : v92) 1.4915633690876606, (v49 : v65) 9.769850336265959, (v26 : v88) 4.789309705548761, (v23 : v76) 7.956071474734835, (v83 : v93) 5.688956702923754, (v64 : v50) 9.36095857959, (v69 : v6) 4.5153450336245005, (v82 : v24) 0.5975457127965011, (v4 : v27) 5.735268173957571, (v19 : v5) 3.3054569953212996, (v17 : v26) 4.9059693146025225, (v24 : v76) 8.514537378286027, (v49 : v99) 2.966451549095587, (v66 : v12) 0.549419649610422, (v83 : v26) 5.560475130704383, (v10 : v26) 6.308368632278315, (v60 : v61) 8.247865576474826, (v72 : v22) 7.837493280214007, (v92 : v74) 2.3029711545624254, (v51 : v87) 5.587694391885591, (v7 : v42) 3.450502728948015, (v95 : v51) 0.7369446499585197, (v25 : v39) 8.14061893060731, (v19 : v98) 5.541273583336588, (v8 : v40) 9.764233042725175, (v91 : v55) 5.30708580172842, (v16 : v46) 4.159620586819578, (v43 : v26) 7.624292692885285, (v14 : v72) 8.622294099247863, (v14 : v98) 8.739581174460223, (v46 : v33) 7.817764665536289, (v49 : v48) 2.063621829637313, (v74 : v67) 0.08352283806208893, (v90 : v57) 4.883026278236312, (v21 : v16) 7.820840420814541, (v74 : v95) 0.3815268642282632, (v49 : v12) 0.4035937237539944, (v68 : v97) 8.46557893915033, (v74 : v21) 9.311259965462195, (v33 : v34) 9.944006480315373, (v50 : v47) 5.223788005919889, (v21 : v79) 0.04231743488093076, (v66 : v88) 0.4507296641301317, (v66 : v49) 3.6590531847286645, (v7 : v8) 7.315590822250348, (v85 : v71) 2.2193857621309476, (v73 : v59) 1.6448403569653713, (v42 : v99) 0.3817901668074064, (v95 : v44) 8.141672114200398, (v29 : v61) 6.544882986681304, (v75 : v55) 1.6359514854415802, (v27 : v32) 9.32756458827652, (v18 : v67) 0.6285790843688022, (v18 : v6) 9.606838177985185, (v28 : v68) 0.48176721124816524, (v78 : v41) 4.8507304037344925, (v89 : v63) 6.49372689264477, (v29 : v63) 6.341506131648307, (v97 : v92) 8.040512921174129, (v63 : v87) 6.315982325701807, (v65 : v59) 5.229047584513542, (v55 : v44) 8.33061210003945, (v64 : v72) 7.999639553440089, (v33 : v87) 1.4707542938980922, (v57 : v1) 3.4159159613905943, (v92 : v94) 4.9540571429549685, (v18 : v9) 1.713497850889728, (v55 : v0) 0.7213284666791198, (v38 : v22) 2.430739975405091, (v57 : v49) 5.6649948086955995, (v72 : v97) 3.156439563210184, (v3 : v38) 4.0219450197636695, (v40 : v26) 9.797870785782694, (v48 : v62) 2.367074262735127, (v96 : v75) 6.151317783909667, (v11 : v88) 1.7053429692725453, (v4 : v17) 4.456246847340158, (v16 : v10) 1.8990391342721968, (v50 : v33) 7.699377892441789, (v25 : v95) 5.514803197105755, (v33 : v22) 9.028460261387362, (v27 : v92) 9.969759008093536, (v1 : v20) 6.716040417572878, (v78 : v64) 6.341904164590012, (v69 : v67) 2.815692750249319, (v65 : v66) 9.537165508418624, (v0 : v81) 5.768097959432056, (v55 : v38) 0.7308439685669499, (v9 : v32) 7.689235966459136, (v56 : v91) 8.587449719372502, (v89 : v13) 4.511360882165784, (v91 : v57) 9.079319140861507, (v72 : v67) 5.309080306957088, (v99 : v53) 4.546273274081946, (v7 : v79) 7.44380363173787, (v27 : v39) 4.647595520507835, (v12 : v96) 8.17231500735049, (v2 : v92) 5.141634684775584, (v83 : v9) 5.317776899522127, (v11 : v65) 3.9815441410091355, (v68 : v52) 8.878854032313495, (v89 : v48) 8.43842059509678, (v27 : v90) 9.095871915822112, (v51 : v61) 6.162057293197069, (v32 : v60) 1.6992652508283745, (v12 : v60) 7.9775674047947165, (v18 : v36) 7.688529715590607, (v3 : v43) 0.41239840328537225, (v66 : v23) 8.03924621209593, (v4 : v31) 2.478141433429648, (v71 : v6) 5.877514246058064, (v15 : v50) 9.026684238270926, (v82 : v42) 2.7175543472473365, (v63 : v50) 3.398547938244522, (v72 : v20) 6.807875237718406, (v20 : v44) 5.32683282564618, (v88 : v86) 1.1089685739374333, (v61 : v28) 7.803456327444826, (v46 : v93) 4.2220473206936315, (v34 : v14) 4.411956958133426, (v7 : v14) 8.151121750607683, (v92 : v31) 8.445931030704987, (v7 : v22) 3.2132459703497487, (v81 : v55) 7.8333180010224375, (v74 : v29) 8.973808751418929, (v44 : v87) 7.749642980531586, (v66 : v63) 4.691336555792544, (v41 : v21) 2.0096019205579863, (v9 : v67) 7.481643260581312, (v79 : v60) 7.46392444563566, (v42 : v69) 7.982867509335325, (v16 : v65) 4.191412333604095, (v88 : v23) 3.6056999674473844, (v18 : v93) 1.1648291304069214, (v96 : v55) 8.027976606527101, (v56 : v59) 9.090523892841725, (v72 : v29) 2.137043790760762, (v86 : v80) 2.488239763584472, (v73 : v47) 8.490392051196839, (v29 : v15) 3.9085733676901824, (v20 : v40) 6.06481884023803, (v72 : v86) 8.00646633235882, (v98 : v6) 9.762767929020269, (v19 : v50) 9.431511137988808, (v33 : v85) 5.163824237429616, (v49 : v71) 9.997658548213652, (v59 : v13) 1.3281090267580486, (v46 : v32) 0.10027385878296546, (v32 : v86) 6.211282494737461, (v21 : v85) 1.0077542047957777, (v54 : v18) 1.2290534595826907, (v23 : v58) 6.524779317070136, (v39 : v19) 4.659764486103331, (v5 : v66) 9.067575474013635, (v9 : v96) 1.5003000093523466, (v60 : v47) 9.77748817717096, (v26 : v8) 8.852998616207056, (v72 : v65) 9.703068480455393, (v79 : v39) 7.335480717535924, (v85 : v70) 7.984414267706698, (v35 : v34) 6.943565822435401, (v12 : v48) 8.46458213399129, (v87 : v13) 9.48829614437305, (v67 : v39) 2.225607667952678, (v56 : v68) 3.556238064181596, (v33 : v19) 5.601464870329296, (v61 : v74) 3.9487460323926484, (v89 : v9) 0.5637761010510023, (v79 : v14) 7.937992177034746, (v37 : v94) 2.721153196709131, (v67 : v29) 0.288802493661674, (v50 : v96) 6.138848844112261, (v31 : v86) 7.845488228376695, (v33 : v56) 9.797314393337274, (v4 : v97) 0.23788970335806292, (v9 : v93) 7.697928736021657, (v30 : v44) 3.743076525527239, (v38 : v24) 9.729497066339976, (v44 : v9) 1.0270511922848347, (v85 : v16) 8.674219369592404, (v43 : v77) 6.019152348917361, (v81 : v13) 6.807134653721448, (v21 : v51) 3.8316976743361364, (v84 : v6) 3.9851550034854997, (v60 : v16) 3.875953438029213, (v66 : v43) 4.893634726770431, (v56 : v65) 6.2463466936079595, (v60 : v67) 2.089099375982202, (v50 : v82) 8.307654696094858, (v19 : v37) 0.9216818834074558, (v90 : v48) 9.140780842084878, (v15 : v70) 3.521622705741052, (v47 : v77) 3.15387866044204, (v91 : v62) 9.378768550888646, (v8 : v0) 2.475565372745494, (v58 : v33) 6.126505975491763, (v12 : v97) 7.600516161471912, (v62 : v38) 3.862362196333242, (v47 : v23) 1.6958852710243355, (v76 : v5) 1.503261391468692, (v84 : v58) 0.6970005215316954, (v13 : v50) 2.4970036385026475, (v56 : v63) 6.176170603627385, (v76 : v70) 6.812099631418303, (v53 : v60) 3.4689629122582497, (v0 : v30) 5.03102769155629, (v39 : v59) 3.8540034637660083, (v25 : v88) 1.0089142629258152, (v18 : v79) 7.027445463812722, (v37 : v11) 0.7684830914956398, (v88 : v39) 1.670307889441558, (v93 : v54) 4.826996001944632, (v33 : v48) 5.710627966910765, (v38 : v49) 8.142218906877908, (v61 : v65) 9.723844058686698, (v46 : v7) 9.3788263911627, (v97 : v22) 2.7412782453695805, (v52 : v62) 8.697002993414255, (v10 : v44) 8.151541534221145, (v37 : v77) 9.12044676135213, (v63 : v72) 2.1429112496067084, (v36 : v79) 0.5269157580225337, (v14 : v4) 9.662224962714888, (v5 : v28) 1.1025329854851063, (v2 : v5) 4.729901122291564, (v37 : v33) 8.799166043404533, (v8 : v84) 7.379795125656244, (v10 : v47) 3.926451002832363, (v45 : v42) 7.871559248142902, (v11 : v93) 3.8968591356629423, (v24 : v7) 7.192952580564872, (v8 : v75) 6.630208967445105, (v69 : v62) 8.42745516655744, (v88 : v47) 0.926136854976799, (v86 : v38) 6.162058136462798, (v73 : v18) 9.848358566311079, (v58 : v83) 5.761026331136506, (v42 : v12) 7.858507903032511, (v81 : v61) 3.699747305709379, (v95 : v77) 9.021543521080385, (v45 : v11) 7.060782739133805, (v84 : v13) 3.4170649475657933, (v34 : v77) 0.22042322406837345, (v64 : v47) 2.1755305462531895, (v47 : v69) 0.333182201841592, (v24 : v65) 9.965690858712218, (v64 : v11) 8.744780840052307, (v49 : v94) 2.8462009441893343, (v70 : v55) 1.3785180729194246, (v7 : v13) 1.1232321083737007, (v50 : v46) 8.549013183186169, (v94 : v99) 2.096117950333485, (v41 : v18) 9.820923744660954, (v66 : v20) 8.600018183816116, (v41 : v28) 6.3643858801213495, (v20 : v93) 2.2499318448911554, (v66 : v29) 5.835865208816925, (v45 : v3) 7.84199290917725, (v33 : v67) 9.8613633976357, (v21 : v45) 8.97001936809912, (v55 : v99) 3.6032604355331777, (v6 : v16) 7.46811335377328, (v95 : v15) 0.19350083101571824, (v52 : v20) 7.600395337706085, (v20 : v83) 9.7116271848261, (v20 : v56) 3.199564832069134, (v37 : v73) 5.229820459615077, (v71 : v10) 4.326083165362778, (v59 : v12) 4.748428219513165, (v24 : v37) 3.0047293633777006, (v87 : v46) 2.7704129916551548, (v89 : v28) 2.6267554638410893, (v38 : v98) 4.1340484781550035, (v86 : v13) 6.5217356712278205]"; 
 var hidden = new Array(); 
 var path = new Array(); 
hidden[0] = "[v16, v60, v61, v5, v83]"; 
path[0] = "[v38, v55, v0, v2, v0, v55, v70, v15, v95, v74, v67, v29, v72, v29, v67, v18, v86, v18, v67, v74, v95, v51, v21, v79, v36, v79, v39, v67, v74, v95, v51, v21, v85, v71, v85, v21, v51, v95, v74, v67, v18, v86, v88, v66, v12, v49, v98, v49, v12, v66, v88, v47, v69, v6, v69, v47, v88, v25, v97, v4, v31, v4, v97, v25, v88, v86, v18, v93, v20, v91, v56, v20, v93, v18, v54, v59, v13, v7, v22, v38, v55, v75, v96, v50, v96, v50, v96, v75, v96, v50, v96, v75, v96, v9, v89, v28, v41, v28, v68, v52, v7, v13, v89, v9, v44, v30, v44, v9, v89, v28, v61, v28, v23, v47, v88, v86, v9, v89, v28, v23, v47, v88, v86, v9, v89, v28, v68, v56, v59, v73, v37, v11, v45, v11, v37, v94, v37, v24, v76, v24, v7, v13, v82, v24, v7, v13, v82, v24, v37, v77, v43, v77, v47, v77, v95, v57, v49, v12, v66, v88, v47, v77, v34, v35, v34, v77, v43, v26, v43, v25, v88, v66, v43, v3, v38, v55, v81, v61, v34, v77, v47, v88, v11, v37, v94, v37, v33, v19, v37, v94, v37, v19, v5, v83, v5, v83, v5, v83, v5, v83, v5, v28, v41, v76, v5, v2, v92, v27, v39, v88, v47, v10, v47, v88, v86, v9, v32, v9, v18, v67, v60, v32, v60, v80, v60, v53, v60, v32, v46, v32, v60, v53, v60, v67, v74, v95, v51, v21, v41, v78, v64, v47, v88, v66, v12, v49, v48, v90, v57, v95, v74, v29, v67, v9, v93, v54, v8, v0, v55, v70, v15, v95, v74, v21, v51, v95, v15, v29, v15, v95, v51, v95, v15, v70, v85, v16]"; 
var step, play;

function showGraph() {
    
	var width = $(document).width();
	
    var height = $(document).height() - 100;

    var g = new Graph();
	
	var graph = graphNodes.split(",");
	
	var hiddenItems = hidden[$('#round-to-play').val()].substring(0, hidden[$('#round-to-play').val()].length - 1).split(",");
	
	for (var k = 0; k < hiddenItems.length; k++) {
		
		hiddenItems[k] = hiddenItems[k].substring(1, hiddenItems[k].length);
		
		g.addNode(hiddenItems[k], { label : hiddenItems[k] + " HIDE" });
	
		$('#hidden').append(hiddenItems[k] + " ");
	
	}
	
	for (var i = 0; i < graph.length; i++) {
		
		g.addEdge(graph[i].substring(graph[i].indexOf("(") + 1, graph[i].indexOf(":") - 1), graph[i].substring(graph[i].indexOf(":") + 2, graph[i].indexOf(")")));
		 
	}
	
	var layouter = new Graph.Layout.Spring(g);
	
	var searchPath = path[$('#round-to-play').val()].substring(0, path[$('#round-to-play').val()].length - 1).split(",");
	
	var renderer = new Graph.Renderer.Raphael('canvas', g, width, height);
	
	step = function() {
		
		drawPath(hiddenItems, searchPath, g, renderer);
		
		searchPath.splice(0,1);
		
	}
	
	play = function() {
		
		setInterval(function(){step()},1000);
		
	}
		
	step();
	
};

function drawPath(hiddenItems, searchPath, g, renderer) {
	
	
	for (var j = 1; j < searchPath.length; j++) {
		
	
		 /* colourising the shortest paths and setting labels */
		for(e in g.edges) {
			
			if((searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].source.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].target.id) ||
			   (searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].target.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].source.id)) {
			
				$('#output').html(searchPath[j-1].substring(1,searchPath[j-1].length) + " to " + searchPath[j].substring(1,searchPath[j].length));
				
				for (var l = 0; l < hiddenItems.length; l++) {
				
					if ( hiddenItems[l] == g.edges[e].source.id || hiddenItems[l] == g.edges[e].target.id ) {
						
						//alert(hiddenItems[l] + " " + g.edges[e].source.id);
						//alert(hiddenItems[l] + " " + g.edges[e].target.id);
						hiddenItems.splice(l, 1);
						$('#hidden').html("Hidden Items: ");
						
						for (var o = 0; o < hiddenItems.length; o++) {
		
							//alert(hiddenItems);
							
							$('#hidden').append(hiddenItems[o] + " ");
						
						}
	
					}
					
				}
				
				g.edges[e].style.stroke = "#00c8a1";
				g.edges[e].style.fill = "#00c8a1";
				
				renderer.draw();
				return;
				
			} else {
				
				g.edges[e].style.stroke = "#fff";
			
			}
			
		}
		
	}

}

function getRandomColor() {
	
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++ ) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
	
}
