var graphNodes = "[(v89 : v80) 0.6659337497584468, (v78 : v41) 0.5998660770703844, (v91 : v16) 0.5220951626965746, (v92 : v23) 0.6821995640887477, (v40 : v9) 0.8614826038111051, (v45 : v40) 0.7046839228727558, (v81 : v53) 0.3484422093444347, (v89 : v6) 0.2179740554871863, (v49 : v11) 0.06635289435812575, (v77 : v40) 0.7043486499799313, (v61 : v65) 0.7952806349388938, (v53 : v73) 0.2823347710699118, (v88 : v82) 0.20193507631798402, (v5 : v38) 0.2906336333353039, (v47 : v87) 0.7104527586252706, (v43 : v96) 0.36889530349902633, (v9 : v0) 0.32003293983173087, (v39 : v51) 0.4940508105682643, (v7 : v72) 0.3263732690392278, (v19 : v40) 0.7374623924969722, (v91 : v13) 0.86729689432241, (v64 : v70) 0.0857628569222566, (v6 : v14) 0.543654600558267, (v97 : v65) 0.9632111837549869, (v28 : v83) 0.4248777024596684, (v19 : v72) 0.44260819595956113, (v16 : v27) 0.4104272269613993, (v10 : v60) 0.012831339773392125, (v30 : v74) 0.8254311598469078, (v68 : v94) 0.05202737828204629, (v98 : v99) 0.9382546131026107, (v68 : v38) 0.34523319270089414, (v5 : v57) 0.7224553367921045, (v87 : v19) 0.48309271201510795, (v98 : v89) 0.08401892719290005, (v31 : v55) 0.32444208168393185, (v71 : v70) 0.1410434119681585, (v51 : v15) 0.8305082117558289, (v15 : v73) 0.19688023392287668, (v75 : v91) 0.053597931031091894, (v98 : v85) 0.27448719174218394, (v9 : v92) 0.3503597598597562, (v4 : v8) 0.4803887917454778, (v46 : v60) 0.5915166264904691, (v46 : v33) 0.8077674247231452, (v41 : v92) 0.24956068821099653, (v30 : v58) 0.05205614858922247, (v89 : v33) 0.39705843442044386, (v22 : v50) 0.3468192536201796, (v61 : v56) 0.36535085770320463, (v60 : v26) 0.996167369795709, (v20 : v16) 0.7615878343042127, (v49 : v20) 0.11156171989571806, (v46 : v66) 0.7768723410133156, (v76 : v9) 0.40034386566496916, (v68 : v64) 0.9360983263865125, (v2 : v10) 0.9110330252400292, (v24 : v96) 0.22775826168406454, (v41 : v36) 0.7423420361025296, (v5 : v91) 0.6371148096799091, (v66 : v76) 0.5605735786224525, (v19 : v38) 0.6068356975393915, (v92 : v36) 0.15079993909693634, (v70 : v37) 0.6242749415931295, (v46 : v47) 0.32385159126907326, (v33 : v99) 0.6334575375388581, (v65 : v93) 0.0021209279999865327, (v58 : v14) 0.08253041284719387, (v20 : v4) 0.6666264454122914, (v29 : v92) 0.3246422055657402, (v81 : v4) 0.03540931730492092, (v34 : v24) 0.6131976610388332, (v89 : v85) 0.5944975177867735, (v44 : v59) 0.7831143813501042, (v55 : v94) 0.668349954023735, (v16 : v74) 0.7406269913241763, (v61 : v2) 0.11348720304504278, (v47 : v48) 0.3385036319041652, (v92 : v7) 0.4791502126850351, (v7 : v54) 0.9750478086070649, (v60 : v12) 0.9001585522900624, (v77 : v99) 0.09837222977150883, (v89 : v63) 0.8831392622980591, (v0 : v5) 0.637186958924277, (v87 : v52) 0.09706948761470513, (v77 : v88) 0.5214072743784307, (v83 : v23) 0.8773462631181381, (v62 : v82) 0.846546253564049, (v28 : v89) 0.2597174815384611, (v61 : v31) 0.712026473696674, (v17 : v34) 0.35235545622735975, (v12 : v71) 0.3027640482299234, (v80 : v51) 0.8727292316100466, (v10 : v65) 0.7538108551253502, (v61 : v40) 0.8779628634858163, (v41 : v18) 0.7482751057341548, (v99 : v69) 0.5259025977643558, (v95 : v8) 0.5485918232199266, (v30 : v6) 0.057635848761339314, (v90 : v52) 0.29052188589586503, (v45 : v67) 0.7948087309582842, (v94 : v85) 0.3086839206030204, (v26 : v81) 0.5165033419275974, (v73 : v77) 0.08325953617995518, (v21 : v43) 0.10601440793524897, (v13 : v55) 0.06166903273644808, (v26 : v85) 0.3385808565133104, (v70 : v67) 0.21903576900977884, (v83 : v39) 0.3835856101888011, (v34 : v4) 0.27030138532132286, (v98 : v23) 0.3011616427750158, (v12 : v8) 0.06871616227084221, (v60 : v36) 0.07138575929969615, (v9 : v29) 0.9445170646437325, (v92 : v63) 0.567780877154924, (v22 : v7) 0.7189641652130551, (v46 : v52) 0.20478270597126624, (v14 : v25) 0.42819593291871216, (v3 : v83) 0.5958875112711829, (v47 : v82) 0.6048742907377386, (v30 : v21) 0.565730740232262, (v82 : v58) 0.38023723576767876, (v86 : v1) 0.8913339078289365, (v56 : v87) 0.9124961649867217, (v64 : v79) 0.5967952804380001, (v76 : v54) 0.3376753809869918, (v48 : v28) 0.8990206259446394, (v74 : v38) 0.8347759435077022, (v99 : v73) 0.6725391645307568, (v9 : v62) 0.6479752387108298, (v14 : v82) 0.7575101511457633, (v70 : v12) 0.30448083511069346, (v48 : v72) 0.5307917708094619, (v27 : v70) 0.48831114957338995, (v43 : v79) 0.8651496513944017, (v87 : v54) 0.39896132499441184, (v17 : v66) 0.15167266128275914, (v59 : v71) 0.15154770890593683, (v97 : v26) 0.2062198292525338, (v11 : v35) 0.2141451859890413, (v80 : v23) 0.13884430046818985, (v14 : v53) 0.7718042005319581, (v69 : v28) 0.16785294792762495, (v5 : v67) 0.6389457226935578, (v89 : v96) 0.7053186941669498, (v63 : v55) 0.18689911781364765, (v81 : v22) 0.14194045999097982, (v12 : v66) 0.12630664969540428, (v7 : v85) 0.6952453144622619, (v56 : v62) 0.6906346547088297, (v26 : v76) 0.5509764265190548, (v43 : v30) 0.2533941495818359, (v89 : v47) 0.6834587781754199, (v67 : v12) 0.014795700300406, (v17 : v37) 0.0627598677869321, (v71 : v32) 0.5909864461551123, (v6 : v85) 0.08616636341793071, (v8 : v75) 0.9989014317816187, (v46 : v19) 0.6661057847225892, (v95 : v92) 0.16090001074121407, (v48 : v98) 0.3890070611602866, (v24 : v94) 0.05516224878942133, (v13 : v31) 0.9681911460348562, (v99 : v18) 0.5503301590012366, (v8 : v72) 0.05281549570005095, (v51 : v89) 0.7167579483741444, (v91 : v18) 0.5438883363326422, (v81 : v38) 0.5732740207507804, (v40 : v80) 0.39277545623439347, (v61 : v86) 0.2694683555609261, (v17 : v90) 0.4184158510707844, (v93 : v78) 0.2217414738380431, (v98 : v14) 0.7432494233609817, (v64 : v90) 0.7098503310254684, (v81 : v92) 0.7968615735680821, (v44 : v19) 0.5332496766195866, (v94 : v0) 0.518421991618327, (v81 : v11) 0.04757025616954669, (v33 : v86) 0.9676117413546191, (v83 : v13) 0.9161358698356404, (v2 : v5) 0.3579968099578731, (v82 : v59) 0.27516441060242924, (v83 : v34) 0.9014440694572081, (v29 : v80) 0.42051137124176285, (v48 : v19) 0.40753799026882354, (v52 : v75) 0.1654143114626221, (v64 : v48) 0.44402109608600737, (v16 : v50) 0.42021992681665676, (v8 : v97) 0.9246486595145075, (v43 : v31) 0.42468745554576304, (v96 : v16) 0.1567454196122824, (v46 : v75) 0.17995154900486598, (v16 : v69) 0.8250308427383419, (v93 : v40) 0.6300087356527105, (v99 : v45) 0.799416142941599, (v33 : v6) 0.8217028375930611, (v56 : v36) 0.48657240057676077, (v20 : v29) 0.808291230913958, (v32 : v59) 0.1678511365458858, (v10 : v27) 0.2760632195007353, (v69 : v51) 0.11495839538281238, (v98 : v72) 0.47806952597173347, (v35 : v80) 0.5006176217073066, (v97 : v93) 0.9063463316063455, (v0 : v36) 0.2409056818907589, (v91 : v10) 0.46724252687944745, (v18 : v44) 0.9512389349472948, (v3 : v48) 0.6273738509902079, (v0 : v85) 0.46697124798075806, (v7 : v84) 0.8447470448978046, (v80 : v85) 0.6857228421300263, (v76 : v68) 0.5057592494518963, (v34 : v52) 0.41098622778363647, (v68 : v16) 0.8597472742547122, (v39 : v62) 0.009982671248433328, (v96 : v67) 0.024827041527355154, (v88 : v46) 0.9035191989476352, (v8 : v21) 0.8688393520432234, (v50 : v37) 0.5576995086315975, (v79 : v42) 0.4248428774832238, (v76 : v67) 0.8883739411393236, (v76 : v88) 0.8499346365720558, (v39 : v4) 0.9764000704237946, (v99 : v32) 0.7880182799672326, (v40 : v83) 0.14797815456033414, (v88 : v94) 0.25089862493597304, (v71 : v42) 0.7380014392414621, (v57 : v22) 0.8277935428471987, (v58 : v29) 0.9296216244010113, (v61 : v70) 0.6016873974603002, (v23 : v81) 0.6698005555079514, (v16 : v57) 0.6631907998820374, (v87 : v89) 0.783853583913491, (v89 : v73) 0.5306368775419104, (v86 : v7) 0.5528626078529942, (v71 : v4) 0.21156854089306132, (v7 : v10) 0.44295042453633515, (v42 : v5) 0.5687245783567482, (v94 : v82) 0.6669894543360783, (v14 : v85) 0.2168981291823059, (v0 : v61) 0.36521706699055223, (v10 : v32) 0.4000373381117308, (v94 : v3) 0.47492548069776686, (v18 : v82) 0.34572160473370916, (v55 : v11) 0.6499862457370578, (v7 : v6) 0.02234300017843227, (v24 : v85) 0.7331847574300759, (v91 : v50) 0.22923922670933616, (v1 : v30) 0.38853178660324406, (v34 : v10) 0.6185775089353793, (v86 : v14) 0.19286036671537177, (v47 : v68) 0.8075144582886078, (v29 : v97) 0.15771361576889753, (v46 : v9) 0.8082235377264817, (v43 : v33) 0.7110028132944288, (v52 : v15) 0.840572756441407, (v22 : v65) 0.2860235786376123, (v43 : v98) 0.34697032174205544, (v50 : v90) 0.03163143233809207, (v43 : v49) 0.9912102230025721, (v43 : v87) 0.725802944269483, (v99 : v13) 0.27370877299704643, (v87 : v30) 0.7151689636810314, (v60 : v17) 0.4556164427340397, (v0 : v6) 0.8507536670317689, (v43 : v24) 0.9658297615057714, (v73 : v79) 0.6960661078186252, (v21 : v73) 0.7204555101424094, (v61 : v60) 0.264467651459499, (v38 : v66) 0.5569579377336401, (v53 : v25) 0.7306096764504707, (v33 : v34) 0.6588381540944218, (v78 : v85) 0.7535491242288034, (v12 : v4) 0.6956668136010667, (v44 : v73) 0.560383990105571, (v90 : v66) 0.8426568422057998, (v66 : v51) 0.848007247126033, (v99 : v41) 0.679385665129828, (v2 : v40) 0.9615822754465455, (v11 : v44) 0.6450446216573387, (v35 : v52) 0.06194768271889628, (v5 : v17) 0.5846224274438034, (v57 : v90) 0.9763413211943724, (v38 : v15) 0.4342581980915017, (v90 : v86) 0.779192815991449, (v67 : v62) 0.1327906123804743, (v60 : v81) 0.5294983854272559, (v37 : v21) 0.919074030080796, (v95 : v26) 0.9213128862600275, (v27 : v17) 0.6803434037157108, (v69 : v33) 0.3226476014438382, (v53 : v5) 0.4958255714344195, (v36 : v51) 0.9896508477657638, (v39 : v95) 0.9025802728247982, (v46 : v42) 0.3670975714486546, (v79 : v83) 0.268499169339644, (v6 : v69) 0.8082759158186742, (v12 : v31) 0.45240777164773116, (v85 : v60) 0.7683103646318716, (v68 : v95) 0.2658448077633976]"; 
 var hidden = new Array(); 
 var path = new Array(); 
hidden[0] = "[v40, v51, v57, v50, v8]"; 
path[0] = "[v35, v80, v29, v9, v46, v33, v34, v24, v43, v31, v55, v11, v49, v20, v16, v91, v18, v82, v47, v48, v64, v70, v71, v59, v32, v10, v7, v92, v81, v60, v61, v56, v62, v67, v76, v88, v77, v99, v13, v83, v28, v69, v51, v36, v41, v78, v93, v97, v26, v95, v68, v38, v15, v73, v89, v98, v72, v8, v21, v30, v58, v14, v6, v0, v5, v57, v90, v17, v27, v17, v66, v12, v4, v39, v62, v9, v40, v19, v44, v73, v53, v25, v53, v14, v86, v1, v30, v74, v30, v87, v52, v75, v91, v50]"; 
var step, play;

function showGraph() {
    
	var width = $(document).width();
	
    var height = $(document).height() - 100;

    var g = new Graph();
	
	var graph = graphNodes.split(",");
	
	var hiddenItems = hidden[$('#round-to-play').val()].substring(0, hidden[$('#round-to-play').val()].length - 1).split(",");
	
	for (var k = 0; k < hiddenItems.length; k++) {
		
		hiddenItems[k] = hiddenItems[k].substring(1, hiddenItems[k].length);
		
		g.addNode(hiddenItems[k], { label : hiddenItems[k] + " HIDE" });
	
		$('#hidden').append(hiddenItems[k] + " ");
	
	}
	
	for (var i = 0; i < graph.length; i++) {
		
		g.addEdge(graph[i].substring(graph[i].indexOf("(") + 1, graph[i].indexOf(":") - 1), graph[i].substring(graph[i].indexOf(":") + 2, graph[i].indexOf(")")));
		 
	}
	
	var layouter = new Graph.Layout.Spring(g);
	
	var searchPath = path[$('#round-to-play').val()].substring(0, path[$('#round-to-play').val()].length - 1).split(",");
	
	var renderer = new Graph.Renderer.Raphael('canvas', g, width, height);
	
	step = function() {
		
		drawPath(hiddenItems, searchPath, g, renderer);
		
		searchPath.splice(0,1);
		
	}
	
	play = function() {
		
		setInterval(function(){step()},1000);
		
	}
		
	step();
	
};

function drawPath(hiddenItems, searchPath, g, renderer) {
	
	
	for (var j = 1; j < searchPath.length; j++) {
		
	
		 /* colourising the shortest paths and setting labels */
		for(e in g.edges) {
			
			if((searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].source.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].target.id) ||
			   (searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].target.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].source.id)) {
			
				$('#output').html(searchPath[j-1].substring(1,searchPath[j-1].length) + " to " + searchPath[j].substring(1,searchPath[j].length));
				
				for (var l = 0; l < hiddenItems.length; l++) {
				
					if ( hiddenItems[l] == g.edges[e].source.id || hiddenItems[l] == g.edges[e].target.id ) {
						
						//alert(hiddenItems[l] + " " + g.edges[e].source.id);
						//alert(hiddenItems[l] + " " + g.edges[e].target.id);
						hiddenItems.splice(l, 1);
						$('#hidden').html("Hidden Items: ");
						
						for (var o = 0; o < hiddenItems.length; o++) {
		
							//alert(hiddenItems);
							
							$('#hidden').append(hiddenItems[o] + " ");
						
						}
	
					}
					
				}
				
				g.edges[e].style.stroke = "#00c8a1";
				g.edges[e].style.fill = "#00c8a1";
				
				renderer.draw();
				return;
				
			} else {
				
				g.edges[e].style.stroke = "#fff";
			
			}
			
		}
		
	}

}

function getRandomColor() {
	
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++ ) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
	
}
