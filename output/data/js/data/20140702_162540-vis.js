var graphNodes = "[(v78 : v32) 0.6780810293210532, (v60 : v49) 0.4029446999717786, (v7 : v70) 0.10743641368011536, (v81 : v22) 0.21830458184632406, (v53 : v52) 0.008823730223925241, (v31 : v50) 0.37642545974479613, (v97 : v4) 0.8023863320846688, (v33 : v24) 0.14626371950244732, (v13 : v18) 0.4439224486047306, (v83 : v41) 0.014705457088406204, (v50 : v0) 0.8606391978948035, (v2 : v88) 0.53918247458113, (v29 : v13) 0.8506608353907543, (v77 : v99) 0.6995953518137407, (v66 : v93) 0.9795789687939918, (v19 : v75) 0.4601629375683085, (v0 : v47) 0.7742421329597419, (v4 : v67) 0.06844067823373567, (v18 : v14) 0.8161107196556312, (v30 : v76) 0.7894400789875561, (v72 : v66) 0.22169938958361668, (v11 : v97) 0.8219474873907989, (v5 : v23) 0.02937170311956805, (v22 : v74) 0.7368281590664973, (v31 : v11) 0.5191401098456474, (v36 : v95) 0.9689671745894357, (v8 : v40) 0.8198880001698376, (v2 : v71) 0.38183995181549524, (v86 : v73) 0.9169168592588368, (v69 : v88) 0.2934274443216006, (v47 : v25) 0.48791255981841364, (v53 : v30) 0.33184126374763756, (v16 : v88) 0.7589160385709758, (v50 : v75) 0.1967599597213735, (v48 : v87) 0.6909065370661636, (v25 : v17) 0.597392341497393, (v48 : v58) 0.45500953841770964, (v28 : v64) 0.9685899796279733, (v13 : v77) 0.018602710666140276, (v54 : v28) 0.8239669720841907, (v10 : v51) 0.1998144037771845, (v42 : v74) 0.9691165358642738, (v80 : v23) 0.2238165325884458, (v78 : v23) 0.09052878847020063, (v40 : v2) 0.36625833122745544, (v55 : v37) 0.16852633727714683, (v8 : v23) 0.9481461801140043, (v44 : v7) 0.5879839169890236, (v18 : v21) 0.7690496477880232, (v5 : v14) 0.9819486384828456, (v26 : v6) 0.06393045686987897, (v63 : v53) 0.6243173622962155, (v19 : v97) 0.541002194459098, (v77 : v18) 0.36287191422571086, (v50 : v82) 0.8173092575069631, (v74 : v85) 0.5682605191550685, (v16 : v74) 0.19426724717749988, (v94 : v82) 0.6736076758962372, (v25 : v43) 0.8019581798151761, (v70 : v16) 0.5396255311571231, (v41 : v67) 0.5488758951586258, (v5 : v53) 0.9383009033674446, (v35 : v0) 0.4190454712730055, (v33 : v10) 0.8819815814966464, (v81 : v8) 0.6025970853616497, (v99 : v63) 0.7021500001698417, (v8 : v42) 0.8861858939419884, (v87 : v45) 0.7121372441661314, (v33 : v41) 0.08896805723966794, (v12 : v11) 0.8699140290999416, (v40 : v58) 0.04664263987040418, (v36 : v75) 0.13093214774708917, (v53 : v13) 0.4244553426341444, (v67 : v10) 0.57744855153512, (v17 : v78) 0.19975533738029894, (v51 : v75) 0.0011300060056750327, (v16 : v12) 0.9810560704576583, (v81 : v66) 0.3619254949502493, (v89 : v71) 0.9245481156734794, (v98 : v75) 0.5507445928472954, (v93 : v28) 0.13725126290152168, (v73 : v47) 0.639556796474625, (v66 : v41) 0.400699099796897, (v37 : v39) 0.4439186211931264, (v12 : v36) 0.358073664090367, (v70 : v93) 0.774055475041284, (v31 : v88) 0.04452841620855719, (v90 : v4) 0.3765154529269511, (v33 : v84) 0.6341548769770416, (v94 : v27) 0.8247314793811524, (v66 : v69) 0.372388796115127, (v51 : v70) 0.6998716482523142, (v46 : v26) 0.9699678007411568, (v43 : v8) 0.4000346190165295, (v74 : v75) 0.87981973890032, (v73 : v83) 0.05369817857988968, (v59 : v77) 0.25308197463372595, (v2 : v74) 0.9105200706752992, (v8 : v21) 0.38205183864295544, (v61 : v56) 0.4979068909159968, (v7 : v73) 0.7591009682613282, (v62 : v17) 0.9146263583123955, (v83 : v78) 0.6999253525745567, (v54 : v2) 0.1731778051452595, (v41 : v45) 0.7510526958482279, (v79 : v44) 0.18131982617112674, (v14 : v79) 0.7950134062150367, (v64 : v98) 0.09137204859347836, (v85 : v48) 0.11735499621668655, (v77 : v72) 0.5555737441660635, (v22 : v87) 0.4587161607118363, (v37 : v40) 0.2594342228848736, (v42 : v48) 0.7590799216773795, (v87 : v67) 0.7058138264841481, (v54 : v95) 0.44231992955768606, (v15 : v72) 0.9742170096907068, (v75 : v81) 0.4850930187870799, (v22 : v54) 0.3568767170069098, (v0 : v82) 0.4784908394800421, (v14 : v20) 0.7906999737131851, (v94 : v62) 0.5027435744287465, (v31 : v6) 0.6676910975358517, (v85 : v28) 0.9893998048633503, (v76 : v18) 0.36236373865368854, (v61 : v62) 0.20213536034675283, (v5 : v48) 0.9998063215524914, (v62 : v59) 0.4026516443746164, (v67 : v16) 0.08001899659994216, (v48 : v90) 0.8236072981396773, (v43 : v79) 0.4410563821146568, (v7 : v36) 0.903418317885159, (v2 : v95) 0.19418035208126838, (v55 : v89) 0.7709060177683267, (v26 : v17) 0.09806181941125025, (v89 : v74) 0.13965223634038804, (v79 : v62) 0.8961123004560292, (v34 : v88) 0.7866337109825635, (v14 : v60) 0.351936209062097, (v38 : v90) 0.8669825277910466, (v64 : v8) 0.6539652379205603, (v71 : v73) 0.9419056721604476, (v86 : v54) 0.9834772507658255, (v40 : v72) 0.7708736584567347, (v81 : v13) 0.9529573218986753, (v17 : v80) 0.4087543355323521, (v42 : v2) 0.3172875676516055, (v64 : v55) 0.7358523256782301, (v76 : v33) 0.47234790994862685, (v17 : v54) 0.28166759860810664, (v96 : v7) 0.3086835235989984, (v70 : v45) 0.6450848513128574, (v55 : v7) 0.6469867008373786, (v47 : v50) 0.2937506592843431, (v23 : v53) 0.8029149471096084, (v76 : v3) 0.3883144675193957, (v45 : v21) 0.5075123844984666, (v59 : v64) 0.13335295051805518, (v99 : v40) 0.033132306364677344, (v12 : v15) 0.13214381580317525, (v89 : v85) 0.6708129556052425, (v42 : v24) 0.20860239410541292, (v11 : v88) 0.7917025629363603, (v8 : v37) 0.06387502903157549, (v79 : v75) 0.36114973438000453, (v92 : v7) 0.1301412134436175, (v73 : v41) 0.6088880037316237, (v67 : v48) 0.7585958487225213, (v63 : v46) 0.3823853642717804, (v78 : v0) 0.8864593348526333, (v20 : v78) 0.7035677162407424, (v5 : v18) 0.03892734300939238, (v65 : v83) 0.033045837922142884, (v39 : v47) 0.6715723422442247, (v64 : v97) 0.4325940540494245, (v81 : v3) 0.6978249077370848, (v48 : v84) 0.05848513898111374, (v12 : v93) 0.5913930125022935, (v77 : v84) 0.4585416085575601, (v34 : v58) 0.7370510081746827, (v97 : v34) 0.868210583205798, (v21 : v14) 0.02299697995099892, (v37 : v27) 0.8800197462080243, (v44 : v1) 0.8374145385613604, (v36 : v14) 0.41146535641381066, (v79 : v41) 0.2300843110552998, (v57 : v3) 0.12438372972491107, (v98 : v13) 0.6215986054010811, (v47 : v3) 0.3004548955912649, (v57 : v20) 0.9482906984990089, (v13 : v80) 0.48959392120019174, (v31 : v92) 0.8963744283676279, (v8 : v77) 0.998141530050615, (v10 : v24) 0.04560342982647403, (v59 : v45) 0.8401363126535164, (v41 : v60) 0.46822634366492943, (v54 : v56) 0.1463217964557737, (v73 : v1) 0.035988667148105, (v41 : v3) 0.11133167410185008, (v99 : v22) 0.3148890108076474, (v41 : v27) 0.3997396524147625, (v15 : v18) 0.17843841253778825, (v87 : v41) 0.957025009818488, (v50 : v20) 0.8650245637759356, (v52 : v66) 0.4532775855730975, (v87 : v98) 0.12899699422675837, (v3 : v78) 0.08756050373603019, (v86 : v49) 0.88924419412367, (v62 : v22) 0.3018072427938452, (v6 : v18) 0.6299283044480933, (v45 : v29) 0.5881118904246536, (v76 : v1) 0.037904851230167846, (v92 : v3) 0.15606961582139522, (v65 : v67) 0.5180369319539769, (v31 : v75) 0.781851735162733, (v77 : v9) 0.3745887643883199, (v25 : v33) 0.8529943701789525, (v12 : v99) 0.4132575538201497, (v19 : v50) 0.008107158945071968, (v64 : v9) 0.34889961918358414, (v40 : v54) 0.04515687931102086, (v2 : v32) 0.8089784656452034, (v95 : v55) 0.022564161449361686, (v39 : v32) 0.5281862298766452, (v43 : v66) 0.9316102688784368, (v18 : v54) 0.9271675326930022, (v48 : v80) 0.5947459249518577, (v22 : v73) 0.0650305031067504, (v88 : v19) 0.8011194191330641, (v85 : v73) 0.6242188586590791, (v61 : v81) 0.2774054392913641, (v51 : v62) 0.3158138746767287, (v3 : v89) 0.19886227067487183, (v19 : v55) 0.8375417113041222, (v42 : v29) 0.2531359853546945, (v9 : v75) 0.24540198691249093, (v30 : v11) 0.09895328500925604, (v96 : v10) 0.5482633970972972, (v4 : v68) 0.6254178794639446, (v99 : v19) 0.2539649440043491, (v63 : v15) 0.06768305096216243, (v88 : v47) 0.002020532492710503, (v38 : v26) 0.5144832097364755, (v25 : v91) 0.8441761774340303, (v5 : v69) 0.03615659255858794, (v25 : v15) 0.9776636299429455, (v82 : v53) 0.8427949340842844, (v40 : v13) 0.11051021523802307, (v76 : v72) 0.9660524731471184, (v99 : v2) 0.2228023639663944, (v78 : v13) 0.7506005271543543, (v53 : v86) 0.37708545251917724, (v28 : v44) 0.3885137099350795, (v14 : v0) 0.7854699388676315, (v67 : v25) 0.16893429895881396, (v68 : v48) 0.43647554024159185, (v30 : v45) 0.5237203789297399, (v44 : v82) 0.8627867014225807, (v75 : v22) 0.19560687412764421, (v52 : v68) 0.7491386239466246, (v37 : v88) 0.44748324331075595, (v39 : v60) 0.9603545902095568, (v75 : v96) 0.569134193765296, (v68 : v28) 0.6515909945924921, (v54 : v30) 0.5612364522843339, (v16 : v7) 0.6102159482526341, (v26 : v86) 0.7162223629511724, (v76 : v22) 0.0911775266944318, (v51 : v12) 0.4430963904728523, (v31 : v3) 0.6305612465360664, (v34 : v98) 0.5603390289169055, (v20 : v26) 0.6562686737682931, (v21 : v86) 0.010193452601644504, (v88 : v75) 0.9269720267765297, (v31 : v45) 0.5220658288898508, (v73 : v89) 0.702939683217346, (v19 : v43) 0.8062715947796261, (v34 : v41) 0.1328375298770943, (v45 : v61) 0.9163404332622012, (v51 : v99) 0.1926645558428004, (v10 : v68) 0.1435902353867613, (v9 : v27) 0.9656837816576995, (v67 : v61) 0.2573611271517767, (v50 : v79) 0.4502837530973499, (v26 : v33) 0.77445224010715, (v51 : v50) 0.036506770505222996, (v50 : v52) 0.8188403208547482, (v74 : v66) 0.42748137388676133, (v12 : v79) 0.7452203120806037, (v92 : v36) 0.9908020637450734, (v64 : v31) 0.16545834564620865, (v76 : v78) 0.21423375200022077, (v97 : v49) 0.09447319237159546, (v74 : v71) 0.28283507886336334, (v74 : v92) 0.27078184428641927, (v36 : v99) 0.4791683572087291, (v54 : v37) 0.09699295599561308, (v59 : v17) 0.5887979707042934, (v51 : v52) 0.2675762224673409, (v1 : v4) 0.23949832561939455, (v95 : v23) 0.8265624886751247]"; 
 var hidden = new Array(); 
 var path = new Array(); 
hidden[0] = "[v86, v23, v18, v66, v9]"; 
path[0] = "[v29, v45, v31, v3, v76, v22, v74, v71, v89, v85, v28, v44, v7, v36, v95, v55, v19, v75, v88, v2, v42, v24, v33, v84, v48, v58, v40, v37, v39, v60, v49, v97, v64, v9, v77, v72, v66, v52, v51, v50, v0, v35, v0, v78, v17, v80, v23, v5, v18, v54, v30, v53, v13, v98, v34, v41, v73, v1, v4, v67, v10, v96, v75, v79, v43, v8, v81, v61, v56, v61, v62, v94, v27, v9, v77, v59, v17, v26, v6, v26, v38, v90, v48, v87, v48, v68, v10, v24, v10, v33, v25, v15, v12, v11, v30, v53, v82, v53, v86]"; 
var step, play;

function showGraph() {
    
	var width = $(document).width();
	
    var height = $(document).height() - 100;

    var g = new Graph();
	
	var graph = graphNodes.split(",");
	
	var hiddenItems = hidden[$('#round-to-play').val()].substring(0, hidden[$('#round-to-play').val()].length - 1).split(",");
	
	for (var k = 0; k < hiddenItems.length; k++) {
		
		hiddenItems[k] = hiddenItems[k].substring(1, hiddenItems[k].length);
		
		g.addNode(hiddenItems[k], { label : hiddenItems[k] + " HIDE" });
	
		$('#hidden').append(hiddenItems[k] + " ");
	
	}
	
	for (var i = 0; i < graph.length; i++) {
		
		g.addEdge(graph[i].substring(graph[i].indexOf("(") + 1, graph[i].indexOf(":") - 1), graph[i].substring(graph[i].indexOf(":") + 2, graph[i].indexOf(")")));
		 
	}
	
	var layouter = new Graph.Layout.Spring(g);
	
	var searchPath = path[$('#round-to-play').val()].substring(0, path[$('#round-to-play').val()].length - 1).split(",");
	
	var renderer = new Graph.Renderer.Raphael('canvas', g, width, height);
	
	step = function() {
		
		drawPath(hiddenItems, searchPath, g, renderer);
		
		searchPath.splice(0,1);
		
	}
	
	play = function() {
		
		setInterval(function(){step()},1000);
		
	}
		
	step();
	
};

function drawPath(hiddenItems, searchPath, g, renderer) {
	
	
	for (var j = 1; j < searchPath.length; j++) {
		
	
		 /* colourising the shortest paths and setting labels */
		for(e in g.edges) {
			
			if((searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].source.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].target.id) ||
			   (searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].target.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].source.id)) {
			
				$('#output').html(searchPath[j-1].substring(1,searchPath[j-1].length) + " to " + searchPath[j].substring(1,searchPath[j].length));
				
				for (var l = 0; l < hiddenItems.length; l++) {
				
					if ( hiddenItems[l] == g.edges[e].source.id || hiddenItems[l] == g.edges[e].target.id ) {
						
						//alert(hiddenItems[l] + " " + g.edges[e].source.id);
						//alert(hiddenItems[l] + " " + g.edges[e].target.id);
						hiddenItems.splice(l, 1);
						$('#hidden').html("Hidden Items: ");
						
						for (var o = 0; o < hiddenItems.length; o++) {
		
							//alert(hiddenItems);
							
							$('#hidden').append(hiddenItems[o] + " ");
						
						}
	
					}
					
				}
				
				g.edges[e].style.stroke = "#00c8a1";
				g.edges[e].style.fill = "#00c8a1";
				
				renderer.draw();
				return;
				
			} else {
				
				g.edges[e].style.stroke = "#fff";
			
			}
			
		}
		
	}

}

function getRandomColor() {
	
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++ ) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
	
}
