var graphNodes = "[(v174 : v166) 0.7598199855811251, (v125 : v169) 0.07106364047818137, (v136 : v191) 0.8944136745542344, (v100 : v167) 0.03144511091953539, (v188 : v112) 0.7307467532583573, (v190 : v165) 0.5021624209880227, (v102 : v175) 0.48261249773478, (v175 : v129) 0.7603301807168068, (v134 : v119) 0.3684025495158165, (v164 : v118) 0.5588054367505956, (v198 : v100) 0.6098920997826481, (v154 : v193) 0.8321015088124912, (v130 : v170) 0.7453054102128894, (v102 : v123) 0.5530150939576329, (v163 : v115) 0.9371809360949309, (v199 : v108) 0.8240144041781989, (v196 : v146) 0.7617725696901047, (v172 : v174) 0.8562565821268763, (v160 : v134) 0.8745643640818893, (v105 : v194) 0.8846452112046658, (v130 : v105) 0.06629175750958327, (v137 : v117) 0.37651597200483655, (v139 : v150) 0.18162992018449442, (v139 : v175) 0.34189014956794284, (v149 : v189) 0.5600304633416984, (v105 : v187) 0.7629258108920186, (v196 : v110) 0.48228827244189043, (v191 : v139) 0.3880143462249206, (v173 : v127) 0.24015225783731764, (v149 : v146) 0.5313282551381641, (v164 : v152) 0.07813316004884141, (v195 : v151) 0.37156687189918136, (v160 : v182) 0.34071106937579876, (v182 : v168) 0.23482976669070088, (v147 : v100) 0.664130811499259, (v115 : v133) 0.7972663256729275, (v196 : v191) 0.21524542315284922, (v165 : v196) 0.2653153267135855, (v156 : v141) 0.5514058001405259, (v180 : v142) 0.7375008297543697, (v112 : v173) 0.1717969873204137, (v177 : v111) 0.8650541781411992, (v184 : v185) 0.7841163780900509, (v174 : v191) 0.992875263369324, (v150 : v108) 0.5189284797899554, (v126 : v177) 0.4519432856917289, (v155 : v122) 0.1008896507169077, (v170 : v114) 0.004277865484276111, (v183 : v147) 0.4104179894884509, (v143 : v147) 0.41759886222609666, (v176 : v141) 0.03601281715732707, (v112 : v199) 0.2152267935140867, (v136 : v140) 0.6866585373946825, (v145 : v156) 0.14441993286134425, (v169 : v132) 0.5815538941303893, (v110 : v121) 0.31079713407966025, (v131 : v184) 0.8023926495355342, (v113 : v182) 0.1059125724545209, (v132 : v121) 0.7388111486381502, (v131 : v192) 0.5182171079165946, (v152 : v141) 0.1032639224505445, (v113 : v123) 0.5639770121973536, (v135 : v175) 0.9759679298095264, (v188 : v194) 0.9442618787354283, (v196 : v177) 0.16776857274635337, (v160 : v191) 0.5575241148472868, (v197 : v178) 0.07855538822060215, (v181 : v112) 0.7458621853199539, (v176 : v122) 0.6665421604466791, (v181 : v166) 0.5887018118925421, (v197 : v131) 0.1303023847046324, (v101 : v140) 0.7828837422825444, (v142 : v105) 0.20751734888674744, (v155 : v108) 0.6561758903007076, (v126 : v178) 0.394178855685542, (v189 : v138) 0.28582350269183177, (v199 : v177) 0.9333411093684166, (v104 : v182) 0.0593241141179468, (v197 : v110) 0.6769146028188526, (v133 : v117) 0.9862063921325268, (v103 : v151) 0.21654059060259245, (v164 : v188) 0.7028659958078072, (v196 : v157) 0.3550029957440767, (v191 : v145) 0.10375656678282141, (v115 : v109) 0.6582789313511409, (v134 : v178) 0.4683652164491886, (v110 : v138) 0.6161748417640011, (v177 : v152) 0.5619554769010336, (v106 : v145) 0.7381432750602414, (v179 : v181) 0.5872055124792778, (v192 : v189) 0.627554903919784, (v182 : v118) 0.8123883993623932, (v115 : v161) 0.8852597255518668, (v184 : v197) 0.8490548277492866, (v105 : v191) 0.2801894378080728, (v157 : v151) 0.6883202676722738, (v176 : v158) 0.4451304761381035, (v144 : v113) 0.9104967924679472, (v102 : v172) 0.8793602752906587, (v168 : v173) 0.7792302175759054, (v186 : v102) 0.0019407102450885727, (v127 : v124) 0.9304224049830098, (v146 : v182) 0.6510772642112729, (v182 : v116) 0.9205739648178408, (v162 : v108) 0.7826840997448844, (v144 : v128) 0.2519392311780685, (v102 : v153) 0.21736739494511492, (v189 : v108) 0.5268317334053738, (v117 : v104) 0.4173073078107433, (v132 : v175) 0.8749689647213037, (v182 : v138) 0.25645557295412, (v160 : v122) 0.6609385523229312, (v119 : v154) 0.15817550840839611, (v140 : v156) 0.01936879134861491, (v102 : v113) 0.40865885071411057, (v136 : v165) 0.9294831870176031, (v142 : v152) 0.7725124751062656, (v134 : v106) 0.16532576444749203, (v176 : v188) 0.11479162661085351, (v106 : v193) 0.5206004578272264, (v151 : v159) 0.7130704465447832, (v190 : v114) 0.575937385412281, (v158 : v166) 0.48110716072843607, (v132 : v115) 0.9602712921132195, (v190 : v173) 0.8451363125156068, (v149 : v135) 0.4563060438859847, (v126 : v161) 0.45327618811995907, (v117 : v182) 0.45278347402810437, (v191 : v199) 0.962082532531686, (v134 : v107) 0.5841384944780805, (v163 : v148) 0.5516303779650414, (v189 : v190) 0.992395528435173, (v112 : v194) 0.557022465530551, (v134 : v173) 0.4587560799041598, (v119 : v197) 0.1708754316672354, (v122 : v165) 0.7857849388831408, (v108 : v152) 0.8347315427306689, (v134 : v196) 0.7585852420979535, (v173 : v199) 0.9797040952994428, (v188 : v126) 0.9086509222973466, (v146 : v116) 0.7458473149042997, (v155 : v119) 0.1716117973622162, (v100 : v137) 0.26921712636637884, (v109 : v131) 0.5348816079078236, (v170 : v100) 0.9044626865272123, (v180 : v103) 0.46894707019727355, (v161 : v198) 0.19378598028330896, (v149 : v120) 0.5229835491261637, (v199 : v149) 0.6105785064855559, (v141 : v169) 0.028567182011083103, (v184 : v123) 0.7239676783042513, (v195 : v160) 0.6220114767757602, (v161 : v120) 0.8404831943911434, (v115 : v151) 0.8844515855069547, (v119 : v148) 0.7883093749229755, (v117 : v185) 0.06802498083221886, (v133 : v166) 0.9909785709039245, (v110 : v120) 0.7757608346707314, (v108 : v176) 0.5193560539991604, (v196 : v112) 0.8821374734272431, (v120 : v177) 0.3674724701798665, (v197 : v182) 0.6013572395893116, (v163 : v140) 0.73890170969838, (v141 : v144) 0.7525122621821086, (v195 : v191) 0.8913106685025962, (v196 : v122) 0.14688672652445722, (v161 : v128) 0.8185009845748034, (v124 : v198) 0.985199881390479, (v137 : v176) 0.26832195832391725, (v193 : v135) 0.9448037609726602, (v162 : v123) 0.8334844533626781, (v144 : v199) 0.6424989758858183, (v102 : v176) 0.9084017254013927, (v138 : v148) 0.6521356363225153, (v175 : v118) 0.4921976748638808, (v164 : v138) 0.6525631378498644, (v145 : v131) 0.21506108887590836, (v113 : v116) 0.386446158949004, (v164 : v153) 0.6669105489277111, (v176 : v161) 0.3702643754506103, (v139 : v190) 0.47422016744949536, (v115 : v126) 0.0473732920777683, (v187 : v175) 0.47882005166558006, (v169 : v138) 0.7968635477906512, (v138 : v174) 0.46312554791993954, (v100 : v129) 0.76927865875625, (v184 : v189) 0.7967958264075864, (v193 : v182) 0.4248264658917349, (v197 : v146) 0.07312379362241594, (v111 : v189) 0.2999617054973117, (v195 : v142) 0.697995274559836, (v187 : v166) 0.46416428046069824, (v106 : v117) 0.6941239904533808, (v114 : v164) 0.2810548123823924, (v100 : v152) 0.9082003799784442, (v174 : v127) 0.027965169435305248, (v158 : v101) 0.8439344368289885, (v195 : v140) 0.1176297142821584, (v164 : v159) 0.4907061933252814, (v143 : v191) 0.7073235263769827, (v102 : v145) 0.5422596146014527, (v109 : v168) 0.3677101670648494, (v161 : v190) 0.08481637777492967, (v139 : v124) 0.8496622833180998, (v161 : v157) 0.22699548267416225, (v195 : v138) 0.356799123681395, (v188 : v107) 0.8084785275178565, (v196 : v101) 0.7694824716902089, (v139 : v129) 0.5895626919247737, (v149 : v147) 0.02819343024858878, (v121 : v115) 0.5343184037401543, (v131 : v148) 0.06686386763073615, (v189 : v122) 0.5663685439660855, (v180 : v127) 0.8767726784997328, (v103 : v171) 0.6243084448064125, (v191 : v100) 0.20657896068460735, (v108 : v163) 0.8650905397355227, (v194 : v121) 0.18211283345119134, (v135 : v112) 0.36553276249676125, (v147 : v193) 0.5194719565734939, (v104 : v133) 0.8273256371847442, (v183 : v151) 0.656190115383832, (v133 : v193) 0.2879875147879519, (v104 : v195) 0.8277935255780062, (v187 : v116) 0.1332508439178708, (v179 : v180) 0.0516033730281672, (v196 : v111) 0.26508171999600816, (v199 : v110) 0.9674711938183274, (v154 : v105) 0.8392928234245192, (v120 : v128) 0.2381585042345823, (v170 : v193) 0.7984805286143272, (v136 : v120) 0.5828336171463618, (v117 : v159) 0.5064048256189124, (v163 : v181) 0.7488217569465447, (v198 : v180) 0.17115922267119255, (v126 : v122) 0.703097322599249, (v143 : v181) 0.724401995304049, (v155 : v126) 0.820463121120136, (v183 : v160) 0.21601300469084816, (v176 : v196) 0.7749624098640266, (v145 : v120) 0.16690652538419892, (v138 : v165) 0.5104749814292076, (v154 : v127) 0.2920941498087186, (v190 : v108) 0.021953123774043903, (v149 : v139) 0.42180667549821804, (v170 : v134) 0.5572652776037152, (v108 : v179) 0.686524369967518, (v125 : v188) 0.22867876759258376, (v159 : v109) 0.2337343181244943, (v128 : v139) 0.27078870347632444, (v193 : v113) 0.0673574406974553, (v142 : v119) 0.3069785611161414, (v127 : v103) 0.4679182178130118, (v117 : v124) 0.8886929837825405, (v105 : v178) 0.8011430037839994, (v183 : v157) 0.29095403570436695, (v120 : v137) 0.058870865432629094, (v180 : v194) 0.5143220111291831, (v102 : v163) 0.9186693375341985, (v136 : v145) 0.7291810176522495, (v137 : v148) 0.442718790548121, (v149 : v121) 0.9647311605245438, (v103 : v126) 0.2633397074837358, (v183 : v189) 0.7949323723333664, (v140 : v186) 0.4885880433201688, (v188 : v148) 0.6000344818112899, (v146 : v101) 0.8888628844802117, (v189 : v141) 0.8190322258423834, (v185 : v139) 0.742307153088426, (v170 : v189) 0.47981731545211825, (v175 : v119) 0.08641548128452481, (v194 : v181) 0.36500067952041215, (v171 : v159) 0.8747927613201285, (v193 : v143) 0.9980120486556612, (v166 : v156) 0.516160139913495, (v135 : v133) 0.41243779776963696, (v115 : v187) 0.5878335533151773, (v136 : v110) 0.48454894367415047, (v164 : v199) 0.7939800747634209, (v155 : v124) 0.6921343626575942, (v171 : v195) 0.8715901141679014, (v113 : v163) 0.1302576471095538, (v161 : v116) 0.5415171752165321, (v104 : v111) 0.7251858016741355, (v145 : v166) 0.4309802559669066, (v129 : v156) 0.9909092756207437, (v180 : v170) 0.34607749791707, (v175 : v136) 0.6584253291761011, (v168 : v145) 0.30222007257927685, (v131 : v120) 0.7569533032865907, (v131 : v186) 0.29669416068197174, (v160 : v140) 0.5597806411758068, (v160 : v113) 0.1661435005496591, (v120 : v124) 0.4374169549790444, (v108 : v129) 0.7636148324954807, (v172 : v176) 0.43969825371675897, (v166 : v136) 0.6315239084685567, (v120 : v100) 0.09959936068605046, (v170 : v121) 0.8707068577451531, (v103 : v110) 0.898568303540799]"; 
 var hidden = new Array(); 
 var path = new Array(); 
hidden[0] = "[v167, v158, v151, v119, v123]"; 
path[0] = "[v109, v115, v132, v121, v110, v196, v165, v122, v160, v195, v140, v101, v158, v176, v108, v163, v102, v172, v174, v127, v124, v139, v185, v117, v137, v148, v131, v197, v184, v189, v183, v157, v161, v116, v146, v149, v135, v175, v136, v145, v166, v187, v105, v154, v193, v182, v118, v164, v188, v194, v181, v179, v180, v142, v152, v141, v169, v125, v188, v107, v134, v119, v155, v126, v103, v171, v159, v151, v115, v133, v104, v111, v177, v199, v112, v173, v190, v114, v170, v100, v191, v143, v147, v100, v167, v100, v120, v128, v144, v113, v123]"; 
var step, play;

function showGraph() {
    
	var width = $(document).width();
	
    var height = $(document).height() - 100;

    var g = new Graph();
	
	var graph = graphNodes.split(",");
	
	var hiddenItems = hidden[$('#round-to-play').val()].substring(0, hidden[$('#round-to-play').val()].length - 1).split(",");
	
	for (var k = 0; k < hiddenItems.length; k++) {
		
		hiddenItems[k] = hiddenItems[k].substring(1, hiddenItems[k].length);
		
		g.addNode(hiddenItems[k], { label : hiddenItems[k] + " HIDE" });
	
		$('#hidden').append(hiddenItems[k] + " ");
	
	}
	
	for (var i = 0; i < graph.length; i++) {
		
		g.addEdge(graph[i].substring(graph[i].indexOf("(") + 1, graph[i].indexOf(":") - 1), graph[i].substring(graph[i].indexOf(":") + 2, graph[i].indexOf(")")));
		 
	}
	
	var layouter = new Graph.Layout.Spring(g);
	
	var searchPath = path[$('#round-to-play').val()].substring(0, path[$('#round-to-play').val()].length - 1).split(",");
	
	var renderer = new Graph.Renderer.Raphael('canvas', g, width, height);
	
	step = function() {
		
		drawPath(hiddenItems, searchPath, g, renderer);
		
		searchPath.splice(0,1);
		
	}
	
	play = function() {
		
		setInterval(function(){step()},1000);
		
	}
		
	step();
	
};

function drawPath(hiddenItems, searchPath, g, renderer) {
	
	
	for (var j = 1; j < searchPath.length; j++) {
		
	
		 /* colourising the shortest paths and setting labels */
		for(e in g.edges) {
			
			if((searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].source.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].target.id) ||
			   (searchPath[j-1].substring(1,searchPath[j-1].length) == g.edges[e].target.id && searchPath[j].substring(1,searchPath[j].length) == g.edges[e].source.id)) {
			
				$('#output').html(searchPath[j-1].substring(1,searchPath[j-1].length) + " to " + searchPath[j].substring(1,searchPath[j].length));
				
				for (var l = 0; l < hiddenItems.length; l++) {
				
					if ( hiddenItems[l] == g.edges[e].source.id || hiddenItems[l] == g.edges[e].target.id ) {
						
						//alert(hiddenItems[l] + " " + g.edges[e].source.id);
						//alert(hiddenItems[l] + " " + g.edges[e].target.id);
						hiddenItems.splice(l, 1);
						$('#hidden').html("Hidden Items: ");
						
						for (var o = 0; o < hiddenItems.length; o++) {
		
							//alert(hiddenItems);
							
							$('#hidden').append(hiddenItems[o] + " ");
						
						}
	
					}
					
				}
				
				g.edges[e].style.stroke = "#00c8a1";
				g.edges[e].style.fill = "#00c8a1";
				
				renderer.draw();
				return;
				
			} else {
				
				g.edges[e].style.stroke = "#fff";
			
			}
			
		}
		
	}

}

function getRandomColor() {
	
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++ ) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
	
}
